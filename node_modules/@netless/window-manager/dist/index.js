"use strict";var cg=Object.defineProperty,dg=Object.defineProperties;var hg=Object.getOwnPropertyDescriptors;var pu=Object.getOwnPropertySymbols;var pg=Object.prototype.hasOwnProperty,fg=Object.prototype.propertyIsEnumerable;var fu=(e,t,i)=>t in e?cg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,q=(e,t)=>{for(var i in t||(t={}))pg.call(t,i)&&fu(e,i,t[i]);if(pu)for(var i of pu(t))fg.call(t,i)&&fu(e,i,t[i]);return e},Ge=(e,t)=>dg(e,hg(t));Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var gg=require("p-retry"),mg=require("emittery"),E=require("lodash"),A=require("white-web-sdk"),vg=require("uuid"),Gi=require("side-effect-manager"),wg=require("@juggle/resize-observer"),yg=require("video.js");function Ho(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function xg(e){if(e&&e.__esModule)return e;var t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return e&&Object.keys(e).forEach(function(i){if(i!=="default"){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}}),t.default=e,Object.freeze(t)}var Sg=Ho(gg),Xi=Ho(mg),gu=Ho(yg),J=(e=>(e.AppMove="AppMove",e.AppFocus="AppFocus",e.AppResize="AppResize",e.AppBoxStateChange="AppBoxStateChange",e.GetAttributes="GetAttributes",e.UpdateWindowManagerWrapper="UpdateWindowManagerWrapper",e.InitReplay="InitReplay",e.WindowCreated="WindowCreated",e.SetMainViewScenePath="SetMainViewScenePath",e.SetMainViewSceneIndex="SetMainViewSceneIndex",e.SetAppFocusIndex="SetAppFocusIndex",e.SwitchViewsToFreedom="SwitchViewsToFreedom",e.MoveCamera="MoveCamera",e.MoveCameraToContain="MoveCameraToContain",e.CursorMove="CursorMove",e.RootDirRemoved="RootDirRemoved",e.Refresh="Refresh",e.InitMainViewCamera="InitMainViewCamera",e))(J||{});const Na="__WindowManger",ta="__WindowMangerEnsureReconnected__";var Ae=(e=>(e.Size="size",e.Position="position",e.SceneIndex="SceneIndex",e.ZIndex="zIndex",e))(Ae||{}),xd=(e=>(e.setBoxSize="setBoxSize",e.setBoxMinSize="setBoxMinSize",e.destroy="destroy",e))(xd||{}),Da=(e=>(e.StartCreate="StartCreate",e))(Da||{}),Sd=(e=>(e.Leave="leave",e.Normal="normal",e))(Sd||{});const mu="2.16.1",Mg=340/720,Cg=340/720,Ig=9/16,Le="/",Md="/init",Cd=50,ne=new Xi.default;class bg{constructor(){this.list=[],this.isEmit=!1,this.invoked=()=>{this.currentInvoker=void 0,this.list.length===0&&(this.clear(),this.emitReady())},this.clear=()=>{clearInterval(this.timer),this.timer=void 0}}initInterval(){return setInterval(()=>{this.invoke()},50)}push(t){this.list.push(t),this.invoke(),this.timer===void 0&&this.list.length>0&&(this.timer=this.initInterval())}invoke(){if(this.list.length===0||this.currentInvoker!==void 0)return;const t=this.list.shift();t&&(this.currentInvoker=t,t().then(()=>{this.invoked()}).catch(i=>{console.error(`[WindowManager]: create app error: ${i.message}`),this.invoked()}))}emitReady(){this.isEmit||setTimeout(()=>{ne.emit("ready")},Cd),this.isEmit=!0}empty(){this.list=[],this.clear()}destroy(){this.timer&&this.clear()}}const B=new Xi.default,Ag="__WindowManagerAppCache";let Ln,vu;const Eg=async()=>{Ln=await Pg()},Tg=(e,t)=>{if(!!Ln)return Dg(Ln,{kind:e,sourceCode:t})},kg=async e=>Ln?await Ng(Ln,e):null;function Pg(){return new Promise((e,t)=>{const i=indexedDB.open(Ag,2);i.onerror=n=>{t(n)},i.onupgradeneeded=n=>{const r=n.target.result;r.objectStoreNames.contains("apps")||(vu=r.createObjectStore("apps",{keyPath:"kind"}),vu.createIndex("kind","kind",{unique:!0}))},i.onsuccess=()=>{const n=i.result;e(n)}})}function Ng(e,t){return new Promise((i,n)=>{const s=e.transaction(["apps"]).objectStore("apps").index("kind").get(t);s.onerror=a=>n(a),s.onsuccess=()=>{s.result?i(s.result):i(null)}})}function Dg(e,t){return new Promise((i,n)=>{const r=e.transaction(["apps"],"readwrite").objectStore("apps").add(t);r.onsuccess=()=>i(),r.onerror=()=>n()})}const zg="NetlessApp",Lg=1e4,Rg=async e=>{const t=await kg(e);if(t)return t.sourceCode;{const n=await(await _g(e,{timeout:Lg})).text();return await Tg(e,n),n}},wu=(e,t)=>{let i=Function(e+`
;return ${t}`)();return typeof i=="undefined"&&(i=window[t]),i},jg=async(e,t,i)=>{const n=i||zg+t;ne.emit("loadApp",{kind:t,status:"start"});let r;try{if(r=await Rg(e),!r||r.length===0)throw ne.emit("loadApp",{kind:t,status:"failed",reason:"script is empty."}),new Error("[WindowManager]: script is empty.")}catch(s){throw ne.emit("loadApp",{kind:t,status:"failed",reason:s.message}),s}return Bg(r,n,t)},Bg=(e,t,i)=>{try{const n=wu(e,t);return ne.emit("loadApp",{kind:i,status:"success"}),n}catch(n){if(n.message.includes("Can only have one anonymous define call per script file")){const r=window.define;typeof r=="function"&&r.amd&&delete r.amd;const s=wu(e,t);return ne.emit("loadApp",{kind:i,status:"success"}),s}throw ne.emit("loadApp",{kind:i,status:"failed",reason:n.message}),n}};async function _g(e,t){const{timeout:i=1e4}=t,n=new AbortController,r=setTimeout(()=>n.abort(),i),s=await fetch(e,Ge(q({},t),{signal:n.signal,headers:{"content-type":"text/plain"}}));return clearTimeout(r),s}class Og{constructor(){this.kindEmitters=new Map,this.registered=new Map,this.appClassesCache=new Map,this.appClasses=new Map,this.syncRegisterApp=null,this.onSyncRegisterAppChange=t=>{this.register({kind:t.kind,src:t.src})}}setSyncRegisterApp(t){this.syncRegisterApp=t}async register(t){this.appClassesCache.delete(t.kind),this.registered.set(t.kind,t);const i=t.src;let n;if(typeof i=="string"&&(n=async()=>{const r=await jg(i,t.kind,t.name);return r.__esModule?r.default:r},this.syncRegisterApp&&this.syncRegisterApp({kind:t.kind,src:i,name:t.name})),typeof i=="function"&&(n=async()=>{let r=await i();if(r)return(r.__esModule||r.default)&&(r=r.default),r;throw new Error(`[WindowManager]: load remote script failed, ${i}`)}),typeof i=="object"&&(n=async()=>i),this.appClasses.set(t.kind,async()=>{let r=this.appClassesCache.get(t.kind);return r||(r=n(),this.appClassesCache.set(t.kind,r)),r}),t.addHooks){const r=this.createKindEmitter(t.kind);r&&t.addHooks(r)}}unregister(t){this.appClasses.delete(t),this.appClassesCache.delete(t),this.registered.delete(t);const i=this.kindEmitters.get(t);i&&(i.clearListeners(),this.kindEmitters.delete(t))}async notifyApp(t,i,n){const r=this.kindEmitters.get(t);await(r==null?void 0:r.emit(i,n))}createKindEmitter(t){if(!this.kindEmitters.has(t)){const i=new Xi.default;this.kindEmitters.set(t,i)}return this.kindEmitters.get(t)}}const je=new Og,Vg=async e=>{var i,n;const t=await((i=je.appClasses.get(e))==null?void 0:i());return t&&((n=t.config)==null?void 0:n.singleton)?e:`${e}-${vg.v4().replace("-","").slice(0,8)}`},gi=(e,t)=>{if(e.focusScenePath!==t)return e.focusScenePath=t,e},za=(e,t)=>{if(e&&e.isWritable&&e.state.sceneState.scenePath!==t){const i=t==="/"?"":t;e.setScenePath(i)}},Ug=(e,t,i)=>{var n;if(e&&t){const s=(n=Vi(e)[t])==null?void 0:n[i];if(s)return`${t}/${s.name}`}},La=(e,t,i)=>{e&&e.scenePathType(t)!==A.ScenePathType.None&&e.removeScenes(t,i)},Wg=(e,t)=>{B.once(e).then(t)};E.debounce((e,t)=>{e.emit("mainViewModeChange",t)},200);const Hg=(e,t,i=0)=>{const n=Vi(e)[t];if(!n)return;const r=n[i];if(!r)return;const s=r.name;return t===Le?`/${s}`:`${t}/${s}`},Vi=e=>e.entireScenes(),yn=(e,t,i,n)=>{var r;for(let s=0;s<i.length;++s)if((r=i[s].name)!=null&&r.includes("/"))throw new Error("scenes name can not have '/'");return e==null?void 0:e.putScenes(t,i,n)},$g=e=>e.startsWith("/"),ia=e=>{const t=e.split("/");t.pop();let i=t.join("/");return i===""&&(i="/"),i},Fg=e=>e.endsWith("/")?e.slice(0,-1):e,yu=e=>{const t=e.split(".").map(i=>i.padStart(2,"0")).join("");return parseInt(t)},Jr=e=>new Promise(t=>setTimeout(t,e)),Qg=e=>e.split("").reduce((i,n)=>(n===Le&&(i+=1),i),0)===1;class Zg{constructor(t){this.manager=t,this.displayer=this.manager.displayer,this.mainMagixEventListener=i=>{if(i.authorId!==this.displayer.observerId){const n=i.payload;switch(n.eventName){case J.AppMove:{this.appMoveHandler(n.payload);break}case J.AppResize:{this.appResizeHandler(n.payload);break}case J.AppBoxStateChange:{this.boxStateChangeHandler(n.payload);break}case J.SetMainViewScenePath:{this.setMainViewScenePathHandler(n.payload);break}case J.MoveCamera:{this.moveCameraHandler(n.payload);break}case J.MoveCameraToContain:{this.moveCameraToContainHandler(n.payload);break}case J.CursorMove:{this.cursorMoveHandler(n.payload);break}case J.RootDirRemoved:{this.rootDirRemovedHandler();break}case J.Refresh:{this.refreshHandler();break}case J.InitMainViewCamera:{this.initMainViewCameraHandler();break}case J.SetAppFocusIndex:{this.setAppFocusViewIndexHandler(n.payload);break}}}},this.appMoveHandler=i=>{var n;(n=this.boxManager)==null||n.moveBox(i)},this.appResizeHandler=i=>{var n,r;(n=this.boxManager)==null||n.resizeBox(Object.assign(i,{skipUpdate:!0})),(r=this.manager.room)==null||r.refreshViewSize()},this.boxStateChangeHandler=i=>{ne.emit("boxStateChange",i)},this.setMainViewScenePathHandler=({nextScenePath:i})=>{gi(this.manager.mainView,i),ne.emit("mainViewScenePathChange",i)},this.moveCameraHandler=i=>{E.isEqual(E.omit(i,["animationMode"]),q({},this.manager.mainView.camera))||this.manager.mainView.moveCamera(i)},this.moveCameraToContainHandler=i=>{this.manager.mainView.moveCameraToContain(i)},this.cursorMoveHandler=i=>{B.emit("cursorMove",i)},this.rootDirRemovedHandler=()=>{this.manager.createRootDirScenesCallback(),this.manager.mainViewProxy.rebind(),B.emit("rootDirRemoved")},this.refreshHandler=()=>{this.manager.windowManger._refresh()},this.initMainViewCameraHandler=()=>{this.manager.mainViewProxy.addCameraReaction()},this.setAppFocusViewIndexHandler=i=>{if(i.type==="main")this.manager.setSceneIndexWithoutSync(i.index);else if(i.type==="app"&&i.appID){const n=this.manager.appProxies.get(i.appID);n&&n.setSceneIndexWithoutSync(i.index)}}}get boxManager(){return this.manager.boxManager}addListeners(){this.displayer.addMagixEventListener(Na,this.mainMagixEventListener)}removeListeners(){this.displayer.removeMagixEventListener(Na,this.mainMagixEventListener)}}class Id extends Error{constructor(){super(...arguments);this.message="[WindowManager]: app duplicate exists and cannot be created again"}}class Yg extends Error{constructor(t){super(`[WindowManager]: app ${t} need register or provide src`)}}class Je extends Error{constructor(){super(...arguments);this.message="[WindowManager]: AppManager must be initialized"}}class bd extends Error{constructor(t){super(`[WindowManager]: white-web-sdk version must large than ${t}`)}}class Ad extends Error{constructor(){super(...arguments);this.message="[WindowManager]: kind must be a valid string"}}class Ed extends Error{constructor(){super(...arguments);this.message="[WindowManager]: box need created"}}class Td extends Error{constructor(){super(...arguments);this.message='[WindowManager]: ScenePath should start with "/"'}}class kd extends Error{constructor(){super(...arguments);this.message="[WindowManager]: boxManager not found"}}class Pd extends Error{constructor(){super(...arguments);this.message="[WindowManager]: room phase only Connected can be bindContainer"}}const Nd=e=>(t,i)=>{if(t!==void 0)if(A.listenUpdated){const n=r=>{r.map(a=>a.kind).includes(e)&&i()};return A.listenUpdated(t,n),i(),()=>A.unlistenUpdated(t,n)}else return A.reaction(()=>t,()=>{i()},{fireImmediately:!0})},Dd=(e,t,i)=>{let n=null;const r=A.reaction(e,()=>{n&&(n(),n=null);const s=e();E.isObject(s)?(n=()=>A.unlistenUpdated(s,t),A.listenUpdated(s,t)):i==null||i(s)},{fireImmediately:!0});return()=>{n==null||n(),r()}},Gg=Nd(A.UpdateEventKind.Removed);Nd(A.UpdateEventKind.Inserted);class Xg{constructor(){this.listeners=new Set}get length(){return this.listeners.size}dispatch(t){this.listeners.forEach(i=>i(t))}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}}const na=Object.keys;function xu(e){return Boolean(E.has(e,"__isRef"))}function Jg(e){return{k:Gi.genUID(),v:e,__isRef:!0}}const Xe="_WM-STORAGE_";class Su{constructor(t,i,n){if(this._sideEffect=new Gi.SideEffectManager,this._destroyed=!1,this._refMap=new WeakMap,this._lastValue=new Map,this.onStateChanged=new Xg,n&&!E.isObject(n))throw new Error(`Default state for Storage ${i} is not an object.`);this._context=t,this.id=i||null,this._state={};const r=this._getRawState(this._state);this._context.getIsWritable()&&(this.id===null?t.isAddApp&&n&&this.setState(n):(r===this._state||!E.isObject(r))&&(E.get(this._context.getAttributes(),[Xe])||this._context.updateAttributes([Xe],{}),this._context.updateAttributes([Xe,this.id],this._state),n&&this.setState(n))),na(r).forEach(s=>{if(!(this.id===null&&s===Xe))try{const a=E.isObject(r[s])?JSON.parse(JSON.stringify(r[s])):r[s];xu(a)?(this._state[s]=a.v,E.isObject(a.v)&&this._refMap.set(a.v,a)):this._state[s]=a}catch(a){console.error(a)}}),this._sideEffect.addDisposer(Dd(()=>this.id===null?t.getAttributes():E.get(t.getAttributes(),[Xe,this.id]),this._updateProperties.bind(this),this.destroy.bind(this)))}get state(){return this._destroyed&&console.warn(`Accessing state on destroyed Storage "${this.id}"`),this._state}addStateChangedListener(t){return this.onStateChanged.addListener(t),()=>this.onStateChanged.removeListener(t)}ensureState(t){return this.setState(na(t).reduce((i,n)=>(E.has(this._state,n)||(i[n]=t[n]),i),{}))}setState(t){if(this._destroyed){console.error(new Error(`Cannot call setState on destroyed Storage "${this.id}".`));return}if(!this._context.getIsWritable()){console.error(new Error(`Cannot setState on Storage "${this.id}" without writable access`),t);return}const i=na(t);i.length>0&&i.forEach(n=>{const r=t[n];if(r!==this._state[n])if(r===void 0)this._lastValue.set(n,this._state[n]),delete this._state[n],this._setRawState(n,r);else{this._lastValue.set(n,this._state[n]),this._state[n]=r;let s=r;if(E.isObject(r)){let a=this._refMap.get(r);a||(a=Jg(r),this._refMap.set(r,a)),s=a}this._setRawState(n,s)}})}emptyStorage(){if(!(E.size(this._state)<=0)){if(this._destroyed){console.error(new Error(`Cannot empty destroyed Storage "${this.id}".`));return}if(!this._context.getIsWritable()){console.error(new Error(`Cannot empty Storage "${this.id}" without writable access.`));return}this.setState(E.mapValues(this._state,E.noop))}}deleteStorage(){if(this.id===null)throw new Error("Cannot delete main Storage");if(!this._context.getIsWritable()){console.error(new Error(`Cannot delete Storage "${this.id}" without writable access.`));return}this.destroy(),this._context.updateAttributes([Xe,this.id],void 0)}get destroyed(){return this._destroyed}destroy(){this._destroyed=!0,this._sideEffect.flushAll()}_getRawState(t){var i;return this.id===null?(i=this._context.getAttributes())!=null?i:t:E.get(this._context.getAttributes(),[Xe,this.id],t)}_setRawState(t,i){if(this.id===null){if(t===Xe)throw new Error(`Cannot set attribute internal filed "${Xe}"`);return this._context.updateAttributes([t],i)}else return this._context.updateAttributes([Xe,this.id,t],i)}_updateProperties(t){var i;if(this._destroyed){console.error(new Error(`Cannot call _updateProperties on destroyed Storage "${this.id}".`));return}if(t.length>0){const n={};for(let r=0;r<t.length;r++)try{const s=t[r],a=s.key;if(this.id===null&&a===Xe)continue;const o=E.isObject(s.value)?JSON.parse(JSON.stringify(s.value)):s.value;let l;switch(this._lastValue.has(a)&&(l=this._lastValue.get(a),this._lastValue.delete(a)),s.kind){case 2:{E.has(this._state,a)&&(l=this._state[a],delete this._state[a]),n[a]={oldValue:l};break}default:{let u=o;if(xu(o)){const{k:h,v:c}=o,m=this._state[a];E.isObject(m)&&((i=this._refMap.get(m))==null?void 0:i.k)===h?u=m:(u=c,E.isObject(c)&&this._refMap.set(c,o))}u!==this._state[a]&&(l=this._state[a],this._state[a]=u),n[a]={newValue:u,oldValue:l};break}}}catch(s){console.error(s)}this.onStateChanged.dispatch(n)}}}class Kg{constructor(t,i,n,r,s){this.manager=t,this.boxManager=i,this.appId=n,this.appProxy=r,this.appOptions=s,this.mobxUtils={autorun:A.autorun,reaction:A.reaction,toJS:A.toJS},this.objectUtils={listenUpdated:A.listenUpdated,unlistenUpdated:A.unlistenUpdated,listenDisposed:A.listenDisposed,unlistenDisposed:A.unlistenDisposed},this.store=this.manager.store,this.isReplay=this.manager.isReplay,this.getDisplayer=()=>this.manager.displayer,this.getAttributes=()=>this.appProxy.attributes,this.getScenes=()=>{const a=this.store.getAppAttributes(this.appId);return a!=null&&a.isDynamicPPT?this.appProxy.scenes:a==null?void 0:a.options.scenes},this.getView=()=>this.appProxy.view,this.mountView=a=>{const o=this.getView();o&&(o.divElement=a,setTimeout(()=>{var l;(l=this.getRoom())==null||l.refreshViewSize()},1e3))},this.getInitScenePath=()=>this.manager.getAppInitPath(this.appId),this.getIsWritable=()=>this.manager.canOperate,this.getBox=()=>{const a=this.boxManager.getBox(this.appId);if(a)return a;throw new Ed},this.getRoom=()=>this.manager.room,this.setAttributes=a=>{this.manager.safeSetAttributes({[this.appId]:a})},this.updateAttributes=(a,o)=>{this.manager.attributes[this.appId]&&this.manager.safeUpdateAttributes([this.appId,...a],o)},this.setScenePath=async a=>{var o;!this.appProxy.box||(this.appProxy.setFullPath(a),(o=this.getRoom())==null||o.setScenePath(a))},this.getAppOptions=()=>typeof this.appOptions=="function"?this.appOptions():this.appOptions,this.createStorage=(a,o)=>{const l=new Su(this,a,o);return this.emitter.on("destroy",()=>{l.destroy()}),l},this.dispatchMagixEvent=(...a)=>{var l;const o=`${this.appId}:${a[0]}`;return(l=this.manager.room)==null?void 0:l.dispatchMagixEvent(o,a[1])},this.addMagixEventListener=(a,o,l)=>{const u=`${this.appId}:${a}`;return this.manager.displayer.addMagixEventListener(u,o,l),()=>this.manager.displayer.removeMagixEventListener(u,o)},this.removeMagixEventListener=this.manager.displayer.removeMagixEventListener.bind(this.manager.displayer),this.nextPage=async()=>{const a=this.pageState.index+1;return a>this.pageState.length-1?(console.warn("[WindowManager] nextPage: index out of range"),!1):(this.appProxy.setSceneIndex(a),!0)},this.jumpPage=async a=>0<=a&&a<this.pageState.length?(this.appProxy.setSceneIndex(a),!0):(console.warn("[WindowManager] nextPage: index out of range"),!1),this.prevPage=async()=>{const a=this.pageState.index-1;return a<0?(console.warn("[WindowManager] prevPage: index out of range"),!1):(this.appProxy.setSceneIndex(a),!0)},this.addPage=async a=>{const o=a==null?void 0:a.after,l=a==null?void 0:a.scene,u=this.appProxy.scenePath;if(!!u)if(o){const h=this.pageState.index+1;yn(this.manager.room,u,[l||{}],h)}else yn(this.manager.room,u,[l||{}])},this.removePage=async a=>{const o=a===void 0?this.pageState.index:a;return this.pageState.length===1?(console.warn("[WindowManager]: can not remove the last page"),!1):o<0||o>=this.pageState.length?(console.warn(`[WindowManager]: page index ${a} out of range`),!1):this.appProxy.removeSceneByIndex(o)},this.emitter=r.appEmitter,this.isAddApp=r.isAddApp}get storage(){return this._storage||(this._storage=new Su(this)),this._storage}get pageState(){return this.appProxy.pageState}get kind(){return this.appProxy.kind}dispatchAppEvent(t,i){B.emit(`custom-${this.kind}`,{kind:this.kind,appId:this.appId,type:t,value:i})}}class qg{constructor(t){this.params=t,this.sceneNode=null,this.onSceneChange=r=>{this.sceneNode=r,this.params.notifyPageStateChange()};const{displayer:i,scenePath:n}=this.params;n&&(this.sceneNode=i.createScenesCallback(n,{onAddScene:this.onSceneChange,onRemoveScene:this.onSceneChange}))}getFullPath(t){var n;const i=(n=this.sceneNode)==null?void 0:n.scenes;if(this.params.scenePath&&i){const r=i[t];if(r)return`${this.params.scenePath}/${r}`}}toObject(){var t,i;return{index:((t=this.params.view)==null?void 0:t.focusSceneIndex)||0,length:((i=this.sceneNode)==null?void 0:i.scenes.length)||0}}destroy(){var t;(t=this.sceneNode)==null||t.dispose()}}var we=(e=>(e.Apps="apps",e.Focus="focus",e.State="state",e.BoxState="boxState",e.MainViewCamera="mainViewCamera",e.MainViewSize="mainViewSize",e.Broadcaster="broadcaster",e.Cursors="cursors",e.Position="position",e.CursorState="cursorState",e.FullPath="fullPath",e.Registered="registered",e.IframeBridge="iframeBridge",e))(we||{});class em{constructor(t){this.context=t,this.setAppFocus=(i,n)=>{n?this.context.safeSetAttributes({focus:i}):this.context.safeSetAttributes({focus:void 0})}}setContext(t){this.context=t}get attributes(){return this.context.getAttributes()}apps(){return E.get(this.attributes,["apps"])}get focus(){return E.get(this.attributes,["focus"])}getAppAttributes(t){return E.get(this.apps(),[t])}getAppState(t){return E.get(this.apps(),[t,"state"])}getMaximized(){return E.get(this.attributes,["maximized"])}getMinimized(){return E.get(this.attributes,["minimized"])}setupAppAttributes(t,i,n){this.attributes.apps||this.context.safeSetAttributes({apps:{}});const s=["scenePath","title"];n||s.push("scenes");const a=E.pick(t.options,s),o={kind:t.kind,options:a,isDynamicPPT:n};typeof t.src=="string"&&(o.src=t.src),o.createdAt=Date.now(),this.context.safeUpdateAttributes(["apps",i],o),this.context.safeUpdateAttributes(["apps",i,"state"],{[Ae.Size]:{},[Ae.Position]:{},[Ae.SceneIndex]:0})}updateAppState(t,i,n){E.get(this.attributes,["apps",t,"state"])&&this.context.safeUpdateAttributes(["apps",t,"state",i],n)}cleanAppAttributes(t){this.context.safeUpdateAttributes(["apps",t],void 0),this.context.safeSetAttributes({[t]:void 0}),this.attributes.focus===t&&this.cleanFocus()}cleanFocus(){this.context.safeSetAttributes({focus:void 0})}getAppSceneIndex(t){var i;return(i=this.getAppState(t))==null?void 0:i[Ae.SceneIndex]}getAppScenePath(t){var i,n;return(n=(i=this.getAppAttributes(t))==null?void 0:i.options)==null?void 0:n.scenePath}getMainViewScenePath(){return this.attributes._mainScenePath}getMainViewSceneIndex(){return this.attributes._mainSceneIndex}getBoxState(){return this.attributes.boxState}setMainViewScenePath(t){this.context.safeSetAttributes({_mainScenePath:t})}setMainViewSceneIndex(t){this.context.safeSetAttributes({_mainSceneIndex:t})}getMainViewCamera(){return E.get(this.attributes,["mainViewCamera"])}getMainViewSize(){return E.get(this.attributes,["mainViewSize"])}setMainViewCamera(t){this.context.safeSetAttributes({mainViewCamera:q({},t)})}setMainViewSize(t){this.context.safeSetAttributes({mainViewSize:q({},t)})}setMainViewCameraAndSize(t,i){this.context.safeSetAttributes({mainViewCamera:q({},t),mainViewSize:q({},i)})}updateCursor(t,i){E.get(this.attributes,["cursors"])||this.context.safeUpdateAttributes(["cursors"],{}),E.get(this.attributes,["cursors",t])||this.context.safeUpdateAttributes(["cursors",t],{}),this.context.safeUpdateAttributes(["cursors",t,"position"],i)}updateCursorState(t,i){E.get(this.attributes,["cursors",t])||this.context.safeUpdateAttributes(["cursors",t],{}),this.context.safeUpdateAttributes(["cursors",t,"cursorState"],i)}getCursorState(t){return E.get(this.attributes,["cursors",t,"cursorState"])}cleanCursor(t){this.context.safeUpdateAttributes(["cursors",t],void 0)}setMainViewFocusPath(t){const i=this.getMainViewScenePath();i&&gi(t,i)}getIframeBridge(){return E.get(this.attributes,["iframeBridge"])}setIframeBridge(t){if(E.isObject(t)){const i=this.getIframeBridge();for(const n in t){const r=t[n];i[n]!==r&&this.context.safeUpdateAttributes(["iframeBridge",n],r)}}}}const tm=new em({getAttributes:()=>{throw new Error("getAttributes not implemented")},safeSetAttributes:()=>{throw new Error("safeSetAttributes not implemented")},safeUpdateAttributes:()=>{throw new Error("safeUpdateAttributes not implemented")}}),lt=(...e)=>{re.debug&&console.log("[WindowManager]:",...e)},$o=(e,t)=>{let i=0;const n=t.length-1;return e===t.index?e===n?i=e-1:i=t.index+1:i=t.index,i},yt=new Xi.default;class Fo{constructor(t,i,n,r){var s;this.params=t,this.manager=i,this.boxManager=this.manager.boxManager,this.appProxies=this.manager.appProxies,this.viewManager=this.manager.viewManager,this.store=this.manager.store,this.status="normal",this.getAppInitState=a=>{var d,p;const o=this.store.getAppState(a);if(!o)return;const l=o==null?void 0:o[Ae.Position],u=this.store.focus,h=o==null?void 0:o[Ae.Size],c=o==null?void 0:o[Ae.SceneIndex],m=(d=this.attributes)==null?void 0:d.maximized,v=(p=this.attributes)==null?void 0:p.minimized,y=o==null?void 0:o.zIndex;let S={maximized:m,minimized:v,zIndex:y};return l&&(S=Ge(q({},S),{id:a,x:l.x,y:l.y})),u===a&&(S=Ge(q({},S),{focus:!0})),h&&(S=Ge(q({},S),{width:h.width,height:h.height})),c&&(S=Ge(q({},S),{sceneIndex:c})),S},this.appAttributesUpdateListener=a=>{var o,l,u;(o=this.manager.refresher)==null||o.add(a,()=>A.autorun(()=>{const h=this.manager.attributes[a];h&&this.appEmitter.emit("attributesUpdate",h)})),(l=this.manager.refresher)==null||l.add(this.stateKey,()=>A.autorun(()=>{var c,m,v,y;const h=(c=this.appAttributes)==null?void 0:c.state;(h==null?void 0:h.zIndex)>0&&h.zIndex!==((m=this.box)==null?void 0:m.zIndex)&&((v=this.boxManager)==null||v.setZIndex(a,h.zIndex),(y=this.boxManager)==null||y.focusBox({appId:a}))})),(u=this.manager.refresher)==null||u.add(`${a}-fullPath`,()=>A.autorun(()=>{var c;const h=(c=this.appAttributes)==null?void 0:c.fullPath;this.setFocusScenePathHandler(h),this._prevFullPath!==h&&(this.notifyPageStateChange(),this._prevFullPath=h)}))},this.setFocusScenePathHandler=E.debounce(a=>{var o;this.view&&a&&a!==((o=this.view)==null?void 0:o.focusScenePath)&&gi(this.view,a)},50),this.notifyPageStateChange=E.debounce(()=>{this.appEmitter.emit("pageStateChange",this.pageState)},50),this.kind=t.kind,this.id=n,this.stateKey=`${this.id}_state`,this.appProxies.set(this.id,this),this.appEmitter=new Xi.default,this.appListener=this.makeAppEventListener(this.id),this.isAddApp=r,this.initScenes(),(s=this.params.options)!=null&&s.scenePath&&this.createView(),this._pageState=new qg({displayer:this.manager.displayer,scenePath:this.scenePath,view:this.view,notifyPageStateChange:this.notifyPageStateChange})}initScenes(){var i;const t=this.params.options;t&&(this.scenePath=t.scenePath,((i=this.appAttributes)==null?void 0:i.isDynamicPPT)&&this.scenePath?this.scenes=Vi(this.manager.displayer)[this.scenePath]:this.scenes=t.scenes)}get view(){return this.manager.viewManager.getView(this.id)}get viewIndex(){var t;return(t=this.view)==null?void 0:t.focusSceneIndex}get isWritable(){var t;return this.manager.canOperate&&!((t=this.box)!=null&&t.readonly)}get attributes(){return this.manager.attributes[this.id]}get appAttributes(){return this.store.getAppAttributes(this.id)}getFullScenePath(){if(this.scenePath)return E.get(this.appAttributes,[we.FullPath])||this.getFullScenePathFromScenes()}getFullScenePathFromScenes(){const t=E.get(this.appAttributes,["state","SceneIndex"],0),i=Ug(this.manager.room,this.scenePath,t);return i&&this.setFullPath(i),i}setFullPath(t){this.manager.safeUpdateAttributes(["apps",this.id,we.FullPath],t)}async baseInsertApp(t=!1){var s;const i=this.params;if(!i.kind)throw new Error("[WindowManager]: kind require");const n=await((s=je.appClasses.get(i.kind))==null?void 0:s()),r=je.registered.get(i.kind);if(n)await this.setupApp(this.id,t,n,i.options,r==null?void 0:r.appOptions);else throw new Error(`[WindowManager]: app load failed ${i.kind} ${i.src}`);return B.emit("updateManagerRect"),{appId:this.id,app:n}}get box(){var t;return(t=this.boxManager)==null?void 0:t.getBox(this.id)}async setupApp(t,i,n,r,s){var o;if(lt("setupApp",t,n,r),!this.boxManager)throw new kd;const a=new Kg(this.manager,this.boxManager,t,this,s);this.appContext=a;try{B.once(`${t}${J.WindowCreated}`).then(async()=>{var u;let l;i||(l=this.getAppInitState(t),(u=this.boxManager)==null||u.updateBoxState(l)),this.appEmitter.onAny(this.appListener),this.appAttributesUpdateListener(t),this.setViewFocusScenePath(),setTimeout(async()=>{console.log("setup app",n);const h=await n.setup(a);this.appResult=h,je.notifyApp(this.kind,"created",{appId:t,result:h}),this.afterSetupApp(l),this.fixMobileSize()},Cd)}),(o=this.boxManager)==null||o.createBox({appId:t,app:n,options:r,canOperate:this.manager.canOperate,smartPosition:this.isAddApp}),this.isAddApp&&this.box&&(this.store.updateAppState(t,Ae.ZIndex,this.box.zIndex),this.store.updateAppState(t,Ae.Size,{width:this.box.intrinsicWidth,height:this.box.intrinsicHeight}),this.boxManager.focusBox({appId:t},!1))}catch(l){throw console.error(l),new Error(`[WindowManager]: app setup error: ${l.message}`)}}fixMobileSize(){var i,n;const t=(i=this.boxManager)==null?void 0:i.getBox(this.id);t&&((n=this.boxManager)==null||n.resizeBox({appId:this.id,width:t.intrinsicWidth+.001,height:t.intrinsicHeight+.001,skipUpdate:!0}))}afterSetupApp(t){var i;t&&(!(t!=null&&t.x)||!t.y)&&((i=this.boxManager)==null||i.setBoxInitState(this.id))}async onSeek(t){var n;this.appEmitter.emit("seek",t).catch(r=>{console.log(`[WindowManager]: emit seek error: ${r.message}`)});const i=this.getAppInitState(this.id);(n=this.boxManager)==null||n.updateBoxState(i)}async onReconnected(){var s;if(!Boolean(this.manager.attributes.apps[this.id])){await this.destroy(!0,!1,!0);return}this.appEmitter.emit("reconnected",void 0);const i=this.getAppInitState(this.id);await this.destroy(!0,!1,!0);const n=this.params;await new Fo(n,this.manager,this.id,this.isAddApp).baseInsertApp(!0),(s=this.boxManager)==null||s.updateBoxState(i)}async onRemoveScene(t){if(this.scenePath&&t.startsWith(this.scenePath+"/")){let i=this.pageState.index,n=this._pageState.getFullPath(i);n||(i=0,n=this._pageState.getFullPath(i)),n&&this.setFullPath(n),this.setViewFocusScenePath(),this.view&&(this.view.focusSceneIndex=i)}}emitAppSceneStateChange(t){this.appEmitter.emit("sceneStateChange",t)}emitAppIsWritableChange(){this.appEmitter.emit("writableChange",this.isWritable)}makeAppEventListener(t){return(i,n)=>{var r,s,a,o;if(!!this.manager.canOperate)switch(i){case"setBoxSize":{(r=this.boxManager)==null||r.resizeBox({appId:t,width:n.width,height:n.height,skipUpdate:!1});break}case"setBoxMinSize":{(s=this.boxManager)==null||s.setBoxMinSize({appId:t,minWidth:n.minwidth,minHeight:n.minheight});break}case"setBoxTitle":{(a=this.boxManager)==null||a.setBoxTitle({appId:t,title:n.title});break}case xd.destroy:{if(this.status==="destroyed")return;this.destroy(!0,!1,!0,n==null?void 0:n.error),n!=null&&n.error&&console.error(n==null?void 0:n.error);break}case"focus":{(o=this.boxManager)==null||o.focusBox({appId:this.id}),yt.emit("focus",{appId:this.id});break}}}}setScenePath(){if(!this.manager.canOperate)return;const t=this.getFullScenePath();this.manager.room&&t&&this.view&&za(this.manager.room,t)}setViewFocusScenePath(){const t=this.getFullScenePath();return t&&this.view&&gi(this.view,t),t}async createView(){const t=await this.viewManager.createView(this.id);return this.setViewFocusScenePath(),t}get pageState(){return this._pageState.toObject()}async removeSceneByIndex(t){const i=this._pageState.getFullPath(t);if(i){const n=$o(t,this.pageState);return this.setSceneIndexWithoutSync(n),this.manager.dispatchInternalEvent(J.SetAppFocusIndex,{type:"app",appID:this.id,index:n}),setTimeout(()=>{La(this.manager.room,i,t)},100),!0}else return!1}setSceneIndexWithoutSync(t){this.view&&(this.view.focusSceneIndex=t)}setSceneIndex(t){if(this.view){this.view.focusSceneIndex=t;const i=this._pageState.getFullPath(t);i&&this.setFullPath(i)}}async destroy(t,i,n,r){var s,a,o,l;if(this.status!=="destroyed"){this.status="destroyed";try{await je.notifyApp(this.kind,"destroy",{appId:this.id}),await this.appEmitter.emit("destroy",{error:r})}catch(u){console.error("[WindowManager]: notifyApp error",u.message,u.stack)}this.appEmitter.clearListeners(),B.emit(`destroy-${this.id}`,{error:r}),t&&((s=this.boxManager)==null||s.closeBox(this.id,n)),i&&(this.store.cleanAppAttributes(this.id),this.scenePath&&La(this.manager.room,this.scenePath)),this.appProxies.delete(this.id),this._pageState.destroy(),this.viewManager.destroyView(this.id),this.manager.appStatus.delete(this.id),(a=this.manager.refresher)==null||a.remove(this.id),(o=this.manager.refresher)==null||o.remove(this.stateKey),(l=this.manager.refresher)==null||l.remove(`${this.id}-fullPath`),this._prevFullPath=void 0}}close(){return this.destroy(!0,!0,!1)}}class im{constructor(t){this.displayer=t,this.views=new Map}createView(t){const i=zd(this.displayer);return this.views.set(t,i),i}getView(t){return this.views.get(t)}destroyView(t){const i=this.views.get(t);if(i){try{i.release()}catch{}this.views.delete(t)}}setViewScenePath(t,i){const n=this.views.get(t);n&&(n.focusScenePath=i)}destroy(){this.views.forEach(t=>{try{t.release()}catch{}}),this.views.clear()}}const zd=e=>{const t=e.views.createView();return nm(t),t},nm=e=>{e.setCameraBound({maxContentMode:()=>10,minContentMode:()=>.1})};class rm{constructor(t){this.manager=t,this.started=!1,this.mainViewIsAddListener=!1,this.store=this.manager.store,this.viewMode=this.manager.windowManger.viewMode,this.sideEffectManager=new Gi.SideEffectManager,this.startListenWritableChange=()=>{this.sideEffectManager.add(()=>B.on("writableChange",n=>{n&&this.ensureCameraAndSize(),this.manager.room&&this.syncMainView(this.manager.room)}))},this.addCameraReaction=()=>{var n;(n=this.manager.refresher)==null||n.add(we.MainViewCamera,this.cameraReaction)},this.cameraReaction=()=>A.reaction(()=>this.mainViewCamera,n=>{n&&n.id!==this.manager.uid&&(this.moveCameraToContian(this.mainViewSize),this.moveCamera(n))},{fireImmediately:!0}),this.sizeChangeHandler=E.debounce(n=>{n&&(this.moveCameraToContian(n),this.moveCamera(this.mainViewCamera))},30),this.onUpdateContainerSizeRatio=()=>{const n=this.store.getMainViewSize();this.sizeChangeHandler(n)},this.onCameraUpdatedByDevice=n=>{this.viewMode!==A.ViewMode.Follower&&(this.store.setMainViewCamera(Ge(q({},n),{id:this.manager.uid})),E.isEqual(this.mainViewSize,Ge(q({},this.mainView.size),{id:this.manager.uid}))||this.setMainViewSize(this.view.size))},this.mainViewClickListener=()=>{this.mainViewClickHandler()},this.setMainViewSize=E.debounce(n=>{this.store.setMainViewSize(Ge(q({},n),{id:this.manager.uid}))},50),this._syncMainViewTimer=0,this.onCameraOrSizeUpdated=()=>{ne.emit("cameraStateChange",this.cameraState),this.manager.room&&this.manager.room.syncMainView&&(clearTimeout(this._syncMainViewTimer),this._syncMainViewTimer=setTimeout(this.syncMainView,100,this.manager.room))},this.syncMainView=n=>{n.isWritable&&n.syncMainView(this.mainView)},this.setViewMode=n=>{this.viewMode=n},this.mainView=this.createMainView(),this.moveCameraSizeByAttributes(),B.once("mainViewMounted").then(()=>{this.addMainViewListener(),this.start(),this.ensureCameraAndSize(),this.startListenWritableChange()});const i=()=>{this.sizeChangeHandler(this.mainViewSize)};this.sideEffectManager.add(()=>B.on("playgroundSizeChange",i)),this.sideEffectManager.add(()=>B.on("containerSizeRatioUpdate",this.onUpdateContainerSizeRatio)),this.sideEffectManager.add(()=>B.on("startReconnect",()=>{this.didRelease||this.mainView.release()}))}ensureCameraAndSize(){this.viewMode===A.ViewMode.Broadcaster&&(!this.mainViewCamera||!this.mainViewSize)&&(this.manager.dispatchInternalEvent(J.InitMainViewCamera),this.setCameraAndSize())}get mainViewCamera(){return this.store.getMainViewCamera()}get mainViewSize(){return this.store.getMainViewSize()}get didRelease(){return E.get(this.view,["didRelease"])}moveCameraSizeByAttributes(){this.moveCameraToContian(this.mainViewSize),this.moveCamera(this.mainViewCamera)}start(){this.sizeChangeHandler(this.mainViewSize),!this.started&&(this.addCameraListener(),this.addCameraReaction(),this.manager.room&&this.syncMainView(this.manager.room),this.started=!0)}setCameraAndSize(){const t=Ge(q({},this.mainView.camera),{id:this.manager.uid}),i=Ge(q({},this.mainView.size),{id:this.manager.uid});this.store.setMainViewCameraAndSize(t,i)}get view(){return this.mainView}get cameraState(){return q(q({},this.view.camera),this.view.size)}createMainView(){const t=zd(this.manager.displayer),i=this.store.getMainViewScenePath();return i&&gi(t,i),t}onReconnect(){if(this.didRelease)this.rebind();else{const t=this.store.getMainViewScenePath();this.setFocusScenePath(t)}}setFocusScenePath(t){if(t)return gi(this.view,t)}rebind(){const t=this.mainView.divElement,i=this.mainView.disableCameraTransform;this.stop(),this.didRelease||this.mainView.release(),this.removeMainViewListener(),this.mainView=this.createMainView(),this.mainView.disableCameraTransform=i,this.mainView.divElement=t,this.addMainViewListener(),this.start()}addMainViewListener(){this.mainViewIsAddListener||this.view.divElement&&(this.view.divElement.addEventListener("click",this.mainViewClickListener),this.view.divElement.addEventListener("touchend",this.mainViewClickListener),this.mainViewIsAddListener=!0)}removeMainViewListener(){this.view.divElement&&(this.view.divElement.removeEventListener("click",this.mainViewClickListener),this.view.divElement.removeEventListener("touchend",this.mainViewClickListener)),this.mainViewIsAddListener=!1}async mainViewClickHandler(){var t;!this.manager.canOperate||(this.store.cleanFocus(),(t=this.manager.boxManager)==null||t.blurAllBox())}addCameraListener(){this.view.callbacks.on("onCameraUpdatedByDevice",this.onCameraUpdatedByDevice),this.view.callbacks.on("onCameraUpdated",this.onCameraOrSizeUpdated),this.view.callbacks.on("onSizeUpdated",this.onCameraOrSizeUpdated)}removeCameraListener(){this.view.callbacks.off("onCameraUpdatedByDevice",this.onCameraUpdatedByDevice),this.view.callbacks.off("onCameraUpdated",this.onCameraOrSizeUpdated),this.view.callbacks.off("onSizeUpdated",this.onCameraOrSizeUpdated)}moveCameraToContian(t){E.isEmpty(t)||(this.view.moveCameraToContain({width:t.width,height:t.height,originX:-t.width/2,originY:-t.height/2,animationMode:A.AnimationMode.Immediately}),this.scale=this.view.camera.scale)}moveCamera(t){if(!E.isEmpty(t)){if(E.isEqual(t,this.view.camera))return;const{centerX:i,centerY:n,scale:r}=t,s=r*(this.scale||1);this.view.moveCamera({centerX:i,centerY:n,scale:s,animationMode:A.AnimationMode.Immediately})}}stop(){var t,i;this.removeCameraListener(),(t=this.manager.refresher)==null||t.remove(we.MainViewCamera),(i=this.manager.refresher)==null||i.remove(we.MainViewSize),this.started=!1}destroy(){this.removeMainViewListener(),this.stop(),this.sideEffectManager.flushAll()}}class sm{constructor(t){this.context=t,this.addRedoUndoListeners=i=>{if(i===void 0)this.addViewCallbacks(this.context.mainView(),this.onCanRedoStepsUpdate,this.onCanUndoStepsUpdate);else{const n=this.context.getAppProxy(i);n&&n.view&&this.addViewCallbacks(n.view,this.onCanRedoStepsUpdate,this.onCanUndoStepsUpdate)}},this.addViewCallbacks=(i,n,r)=>{n(i.canRedoSteps),r(i.canUndoSteps),i.callbacks.on("onCanRedoStepsUpdate",n),i.callbacks.on("onCanUndoStepsUpdate",r)},this.disposeViewCallbacks=i=>{i.callbacks.off("onCanRedoStepsUpdate",this.onCanRedoStepsUpdate),i.callbacks.off("onCanUndoStepsUpdate",this.onCanUndoStepsUpdate)},this.onCanRedoStepsUpdate=i=>{ne.emit("canRedoStepsChange",i)},this.onCanUndoStepsUpdate=i=>{ne.emit("canUndoStepsChange",i)},this.disposePrevFocusViewRedoUndoListeners=i=>{let n;if(i===void 0)n=this.context.mainView();else{const r=this.context.getAppProxy(i);r&&r.view&&(n=r.view)}n&&this.disposeViewCallbacks(n)},B.on("focusedChange",i=>{this.disposePrevFocusViewRedoUndoListeners(i.prev),setTimeout(()=>{this.addRedoUndoListeners(i.focused)},0)}),B.on("rootDirRemoved",()=>{this.disposePrevFocusViewRedoUndoListeners(t.focus()),this.addRedoUndoListeners(t.focus())}),this.addRedoUndoListeners(t.focus())}destroy(){this.disposePrevFocusViewRedoUndoListeners(this.context.focus())}}class am{constructor(t){this.windowManger=t,this.appProxies=new Map,this.appStatus=new Map,this.store=tm,this.isReplay=this.windowManger.isReplay,this.mainViewScenesLength=0,this.callbacksNode=null,this.appCreateQueue=new bg,this.sideEffectManager=new Gi.SideEffectManager,this.sceneState=null,this.rootDirRemoving=!1,this.onRemoveScenes=async i=>{var r,s;const{scenePath:n}=i;if(n===Le){await this.onRootDirRemoved(),this.dispatchInternalEvent(J.RootDirRemoved);return}if(Qg(n)){let a=this.mainView.focusSceneIndex||0,o=(r=this.callbacksNode)==null?void 0:r.scenes[a];o||(a=0,o=(s=this.callbacksNode)==null?void 0:s.scenes[a]),o&&this.setMainViewScenePath(`${Le}${o}`),await this.setMainViewSceneIndex(a)}else this.appProxies.forEach(a=>{a.onRemoveScene(n)})},this.onReadonlyChanged=()=>{this.appProxies.forEach(i=>{i.emitAppIsWritableChange()})},this.onPlayerSeekStart=async()=>{await this.closeAll()},this.onPlayerSeekDone=async i=>{await this.attributesUpdateCallback(this.attributes.apps),this.appProxies.forEach(n=>{n.onSeek(i)})},this.createRootDirScenesCallback=()=>{let i=!1;this.callbacksNode&&(this.callbacksNode.dispose(),i=!0),this.callbacksNode=this.displayer.createScenesCallback(Le,{onAddScene:this.onSceneChange,onRemoveScene:async(n,r)=>{await this.onSceneChange(n),B.emit("rootDirSceneRemoved",r)}}),this.callbacksNode&&(this.updateSceneState(this.callbacksNode),this.mainViewScenesLength=this.callbacksNode.scenes.length,i&&this.emitMainViewScenesChange(this.callbacksNode.scenes.length))},this.removeSceneByIndex=async i=>{var s;const n=$o(i,this.windowManger.pageState);this.setSceneIndexWithoutSync(n),this.dispatchInternalEvent(J.SetAppFocusIndex,{type:"main",index:n});const r=(s=this.callbacksNode)==null?void 0:s.scenes[i];return setTimeout(()=>{r&&La(this.room,`${Le}${r}`,i)},100),new Promise((a,o)=>{B.once("rootDirSceneRemoved").then(l=>{l===r&&a(!0)}).catch(l=>{console.log(`[WindowManager]: removePage error: ${l}`),o(!1)})})},this.setSceneIndexWithoutSync=i=>{var r;const n=(r=this.callbacksNode)==null?void 0:r.scenes[i];n&&this.mainViewProxy.setFocusScenePath(`${Le}${n}`)},this.onSceneChange=i=>(this.mainViewScenesLength=i.scenes.length,this.updateSceneState(i),this.emitMainViewScenesChange(this.mainViewScenesLength)),this.emitMainViewScenesChange=i=>Promise.all([ne.emit("mainViewScenesLengthChange",i),B.emit("changePageState")]),this.updateSceneState=i=>{const n=this.store.getMainViewSceneIndex()||0;let r=i.scenes[n];r||(r=i.scenes[this.mainView.focusSceneIndex||0]),this.sceneState={scenePath:`${Le}${r}`,contextPath:i.path,index:n,scenes:i.scenes.map(s=>({name:s})),sceneName:r},ne.emit("sceneStateChange",this.sceneState)},this.onBoxMove=i=>{this.dispatchInternalEvent(J.AppMove,i),this.store.updateAppState(i.appId,Ae.Position,{x:i.x,y:i.y})},this.onBoxResize=i=>{i.width&&i.height&&(this.dispatchInternalEvent(J.AppResize,i),this.store.updateAppState(i.appId,Ae.Size,{width:i.width,height:i.height}))},this.onBoxFocus=i=>{this.windowManger.safeSetAttributes({focus:i.appId})},this.onBoxClose=i=>{const n=this.appProxies.get(i.appId);n&&n.destroy(!1,!0,!0,i.error)},this.onBoxStateChange=i=>{this.dispatchInternalEvent(J.AppBoxStateChange,i)},this.addAppsChangeListener=()=>{var i;(i=this.refresher)==null||i.add("apps",()=>Dd(()=>this.attributes.apps,()=>{this.attributesUpdateCallback(this.attributes.apps)}))},this.addAppCloseListener=()=>{var i;(i=this.refresher)==null||i.add("appsClose",()=>Gg(this.attributes.apps,()=>{this.onAppDelete(this.attributes.apps)}))},this.onMainViewIndexChange=i=>{i!==void 0&&this._prevSceneIndex!==i&&(ne.emit("mainViewSceneIndexChange",i),B.emit("changePageState"),this.callbacksNode&&this.updateSceneState(this.callbacksNode),this._prevSceneIndex=i)},this.onFocusChange=i=>{var n;this._prevFocused!==i&&(ne.emit("focusedChange",i),B.emit("focusedChange",{focused:i,prev:this._prevFocused}),this._prevFocused=i,i!==void 0&&((n=this.boxManager)==null||n.focusBox({appId:i}),setTimeout(()=>{const r=this.appProxies.get(i);r&&je.notifyApp(r.kind,"focus",{appId:i})},0)))},this.attributesUpdateCallback=E.debounce(i=>this._attributesUpdateCallback(i),100),this._appIds=[],this.onRegisteredChange=i=>{!i||Object.entries(i).forEach(([n,r])=>{je.appClasses.has(n)||je.register({kind:n,src:r.src,name:r.name})})},this.onMinimized=i=>{var n,r;((n=this.boxManager)==null?void 0:n.minimized)!==i&&(i===!0&&((r=this.boxManager)==null||r.blurAllBox()),setTimeout(()=>{var s;(s=this.boxManager)==null||s.setMinimized(Boolean(i))},0))},this.onAppDelete=async i=>{const n=Object.keys(i);for(const[r,s]of this.appProxies.entries())n.includes(r)||await s.destroy(!0,!1,!0)},this.closeAll=async()=>{for(const[i,n]of this.appProxies.entries())await n.destroy(!0,!1,!0)},this.displayerStateListener=i=>{const n=i.sceneState;if(n){const r=n.scenePath;this.appProxies.forEach(s=>{s.scenePath&&r.startsWith(s.scenePath)&&(s.emitAppSceneStateChange(n),s.setFullPath(r))})}this.appProxies.forEach(r=>{r.appEmitter.emit("roomStateChange",i)}),B.emit("observerIdChange",this.displayer.observerId)},this.displayerWritableListener=i=>{var s,a;const n=!i,r=this.windowManger.readonly===void 0||this.windowManger.readonly===!1;this.windowManger.readonly===void 0?(s=this.boxManager)==null||s.setReadonly(i):(a=this.boxManager)==null||a.setReadonly(!(n&&r)),this.appProxies.forEach(o=>{o.emitAppIsWritableChange()}),B.emit("writableChange",n)},this.updateSceneIndex=()=>{const i=this.store.getMainViewScenePath(),n=ia(i),r=Vi(this.displayer)[n];if(r.length){const s=i.replace(n,"").replace("/",""),a=r.findIndex(o=>o.name===s);E.isInteger(a)&&a>=0&&this.safeSetAttributes({_mainSceneIndex:a})}},this.updateRootDirRemoving=i=>{this.rootDirRemoving=i},this.displayer=t.displayer,this.store.setContext({getAttributes:()=>this.attributes,safeSetAttributes:i=>this.safeSetAttributes(i),safeUpdateAttributes:(i,n)=>this.safeUpdateAttributes(i,n)}),this.mainViewProxy=new rm(this),this.viewManager=new im(this.displayer),this.appListeners=new Zg(this),this.displayer.callbacks.on(this.eventName,this.displayerStateListener),this.appListeners.addListeners(),this.refresher=ag,this.refresher.setRoom(this.room),this.refresher.setContext({emitter:B}),this.sideEffectManager.add(()=>()=>{var i,n,r;this.appCreateQueue.destroy(),this.mainViewProxy.destroy(),(i=this.refresher)==null||i.destroy(),this.viewManager.destroy(),(n=this.boxManager)==null||n.destroy(),(r=this.callbacksNode)==null||r.dispose()}),B.once("onCreated").then(()=>this.onCreated()),B.on("onReconnected",()=>this.onReconnected()),A.isPlayer(this.displayer)&&(B.on("seekStart",this.onPlayerSeekStart),B.on("seek",this.onPlayerSeekDone)),B.on("removeScenes",this.onRemoveScenes),B.on("setReadonly",this.onReadonlyChanged),this.createRootDirScenesCallback(),je.setSyncRegisterApp(i=>{this.safeUpdateAttributes([we.Registered,i.kind],i)})}async onRootDirRemoved(t=!0){this.setMainViewScenePath(Md),this.createRootDirScenesCallback();for(const[i,n]of this.appProxies.entries())n.view&&await this.closeApp(i,t);this.mainViewProxy.rebind(),B.emit("rootDirRemoved"),this.updateRootDirRemoving(!1)}get eventName(){return A.isRoom(this.displayer)?"onRoomStateChanged":"onPlayerStateChanged"}get attributes(){return this.windowManger.attributes}get canOperate(){return this.windowManger.canOperate}get room(){return A.isRoom(this.displayer)?this.displayer:void 0}get mainView(){return this.mainViewProxy.view}get focusApp(){if(this.store.focus)return this.appProxies.get(this.store.focus)}get uid(){var t;return((t=this.room)==null?void 0:t.uid)||""}getMainViewSceneDir(){const t=this.store.getMainViewScenePath();if(t)return ia(t);throw new Error("[WindowManager]: mainViewSceneDir not found")}async onCreated(){var t,i,n,r,s,a;if(await this.attributesUpdateCallback(this.attributes.apps),B.emit("updateManagerRect"),yt.on("move",this.onBoxMove),yt.on("resize",this.onBoxResize),yt.on("focus",this.onBoxFocus),yt.on("close",this.onBoxClose),yt.on("boxStateChange",this.onBoxStateChange),this.addAppsChangeListener(),this.addAppCloseListener(),(t=this.refresher)==null||t.add("maximized",()=>A.autorun(()=>{var l;const o=this.attributes.maximized;(l=this.boxManager)==null||l.setMaximized(Boolean(o))})),(i=this.refresher)==null||i.add("minimized",()=>A.autorun(()=>{const o=this.attributes.minimized;this.onMinimized(o)})),(n=this.refresher)==null||n.add("mainViewIndex",()=>A.autorun(()=>{const o=E.get(this.attributes,"_mainSceneIndex");this.onMainViewIndexChange(o)})),(r=this.refresher)==null||r.add("focusedChange",()=>A.autorun(()=>{const o=E.get(this.attributes,"focus");this.onFocusChange(o)})),(s=this.refresher)==null||s.add("registeredChange",()=>A.autorun(()=>{const o=E.get(this.attributes,we.Registered);this.onRegisteredChange(o)})),!this.attributes.apps||Object.keys(this.attributes.apps).length===0){const o=this.store.getMainViewScenePath();if(!o)return;this.resetScenePath(o)}this.displayerWritableListener(!((a=this.room)!=null&&a.isWritable)),this.displayer.callbacks.on("onEnableWriteNowChanged",this.displayerWritableListener),this._prevFocused=this.attributes.focus,this.sideEffectManager.add(()=>{const o=new sm({mainView:()=>this.mainViewProxy.view,focus:()=>this.attributes.focus,getAppProxy:l=>this.appProxies.get(l)});return()=>o.destroy()})}notifyAppsChange(t){(this._appIds.length!==t.length||!this._appIds.every(i=>t.includes(i)))&&(this._appIds=t,ne.emit("appsChange",t))}async _attributesUpdateCallback(t){if(t&&re.container){const i=Object.keys(t);i.length===0&&this.appCreateQueue.emitReady();const r=E.orderBy(i.map(s=>({id:s,createdAt:t[s].createdAt})),"createdAt","asc").map(({id:s})=>s);this.notifyAppsChange(r);for(const s of r)if(!this.appProxies.has(s)&&!this.appStatus.has(s)){const a=t[s];try{if(!this.attributes[s])throw new Error("appAttributes is undefined");this.appCreateQueue.push(()=>(this.appStatus.set(s,Da.StartCreate),this.baseInsertApp({kind:a.kind,options:a.options,isDynamicPPT:a.isDynamicPPT},s,!1))),this.focusByAttributes(t)}catch(o){console.warn("[WindowManager]: Insert App Error",o)}}}}refresh(){this.attributesUpdateCallback(this.attributes.apps)}setBoxManager(t){this.boxManager=t}resetMaximized(){var t;(t=this.boxManager)==null||t.setMaximized(Boolean(this.store.getMaximized()))}resetMinimized(){var t;(t=this.boxManager)==null||t.setMinimized(Boolean(this.store.getMinimized()))}bindMainView(t,i){const n=this.mainViewProxy.view;n.disableCameraTransform=i,n.divElement=t,n.focusScenePath||this.setMainViewFocusPath(),B.emit("mainViewMounted")}setMainViewFocusPath(t){var n;const i=t||this.store.getMainViewScenePath();if(i)return gi(this.mainView,i),((n=this.mainView)==null?void 0:n.focusScenePath)===i}resetScenePath(t){this.displayer.state.sceneState.scenePath!==t&&za(this.room,t)}async addApp(t,i){lt("addApp",t);const{appId:n,needFocus:r}=await this.beforeAddApp(t,i),s=await this.baseInsertApp(t,n,!0,r);return this.afterAddApp(s),s==null?void 0:s.id}async beforeAddApp(t,i){var a,o;const n=await Vg(t.kind);this.appStatus.set(n,Da.StartCreate);const r=(a=t.attributes)!=null?a:{};this.safeUpdateAttributes([n],r),this.store.setupAppAttributes(t,n,i);const s=!((o=this.boxManager)!=null&&o.minimized);return s&&this.store.setAppFocus(n,!0),{appId:n,needFocus:s}}afterAddApp(t){var i,n;if(t&&t.box){const r=t.box;yt.emit("move",{appId:t.id,x:r==null?void 0:r.intrinsicX,y:r==null?void 0:r.intrinsicY}),this.store.updateAppState(t.id,Ae.ZIndex,r.zIndex)}(i=this.boxManager)!=null&&i.minimized&&((n=this.boxManager)==null||n.setMinimized(!1,!1))}async closeApp(t,i=!0){const n=this.appProxies.get(t);n&&n.destroy(!0,i,!1)}async baseInsertApp(t,i,n,r){if(this.appProxies.has(i)){console.warn("[WindowManager]: app duplicate exists and cannot be created again");return}const s=new Fo(t,this,i,n);if(s)return await s.baseInsertApp(r),this.appStatus.delete(i),s;throw this.appStatus.delete(i),new Error("[WindowManger]: initialize AppProxy failed")}safeSetAttributes(t){this.windowManger.safeSetAttributes(t)}safeUpdateAttributes(t,i){this.windowManger.safeUpdateAttributes(t,i)}async setMainViewScenePath(t){if(this.room){const i=this.displayer.scenePathType(t);if(ia(t)!==Le)throw new Error('[WindowManager]: main view scenePath must in root dir "/"');if(i===A.ScenePathType.None)throw new Error(`[WindowManager]: ${t} not valid scene`);if(i===A.ScenePathType.Page)await this._setMainViewScenePath(t);else if(i===A.ScenePathType.Dir){const r=Hg(this.displayer,t);r&&await this._setMainViewScenePath(r)}}}async _setMainViewScenePath(t){this.setMainViewFocusPath(t)&&(this.safeSetAttributes({_mainScenePath:t}),this.store.setMainViewFocusPath(this.mainView),this.updateSceneIndex(),this.dispatchSetMainViewScenePath(t))}async setMainViewSceneIndex(t){var i;if(this.room){if(this.store.getMainViewSceneIndex()===t)return;const n=(i=this.callbacksNode)==null?void 0:i.scenes[t],r=`${Le}${n}`;if(n)this.setMainViewFocusPath(r)&&(this.store.setMainViewScenePath(r),this.store.setMainViewSceneIndex(t),this.dispatchSetMainViewScenePath(r));else throw new Error(`[WindowManager]: ${t} not valid index`)}}dispatchSetMainViewScenePath(t){this.dispatchInternalEvent(J.SetMainViewScenePath,{nextScenePath:t}),ne.emit("mainViewScenePathChange",t),za(this.room,t)}getAppInitPath(t){var n;const i=this.store.getAppAttributes(t);if(i)return(n=i==null?void 0:i.options)==null?void 0:n.scenePath}safeDispatchMagixEvent(t,i){this.canOperate&&this.displayer.dispatchMagixEvent(t,i)}focusByAttributes(t){var i;if(t&&Object.keys(t).length===((i=this.boxManager)==null?void 0:i.boxSize)){const n=this.store.focus;n&&this.boxManager.focusBox({appId:n})}}async onReconnected(){this.attributesUpdateCallback(this.attributes.apps);const i=Array.from(this.appProxies.values()).map(n=>n.onReconnected());this.mainViewProxy.onReconnect(),await Promise.all(i),this.callbacksNode&&this.onSceneChange(this.callbacksNode)}notifyContainerRectUpdate(t){this.appProxies.forEach(i=>{i.appEmitter.emit("containerRectUpdate",t)})}dispatchInternalEvent(t,i){this.safeDispatchMagixEvent(Na,{eventName:t,payload:i})}destroy(){this.displayer.callbacks.off(this.eventName,this.displayerStateListener),this.displayer.callbacks.off("onEnableWriteNowChanged",this.displayerWritableListener),this.appListeners.removeListeners(),yt.clearListeners(),B.clearListeners(),this.appProxies.size&&this.appProxies.forEach(t=>{t.destroy(!0,!1,!0)}),ne.clearListeners(),this.sideEffectManager.flushAll(),this._prevFocused=void 0,this._prevSceneIndex=void 0}}const om=e=>{const t=document.createElement("div");t.className="netless-window-manager-playground";const i=document.createElement("div");i.className="netless-window-manager-sizer";const n=document.createElement("div");n.className="netless-window-manager-wrapper";const r=document.createElement("div");return r.className="netless-window-manager-main-view",t.appendChild(i),i.appendChild(n),n.appendChild(r),e.appendChild(t),re.wrapper=n,{playground:t,wrapper:n,sizer:i,mainViewElement:r}},lm=()=>{if(yu(A.WhiteVersion)<yu(mu))throw new bd(mu)},Ra=(e,t)=>{var s;const i=(e==null?void 0:e.state.roomMembers)||[];let n=-1,r;for(const a of i)((s=a.payload)==null?void 0:s.uid)===t&&n<a.memberId&&(n=a.memberId,r=a);return r},Mu=async e=>{try{return await e.createInvisiblePlugin(re,{})}catch(t){if(t.message==='invisible plugin "WindowManager" exits')return await Jr(200),e.getInvisiblePlugin(re.kind);lt("createInvisiblePlugin failed",t)}},um=window.ResizeObserver||wg.ResizeObserver;class Qo{constructor(t){this.emitter=t}static create(t,i,n,r){const s=new Qo(r);return s.observePlaygroundSize(t,i,n),s}observePlaygroundSize(t,i,n){this.updateSizer(t.getBoundingClientRect(),i,n),this.containerResizeObserver=new um(r=>{var a;const s=(a=r[0])==null?void 0:a.contentRect;s&&(this.updateSizer(s,i,n),this.emitter.emit("playgroundSizeChange",s))}),this.disposer=this.emitter.on("containerSizeRatioUpdate",()=>{const r=t.getBoundingClientRect();this.updateSizer(r,i,n),this.emitter.emit("playgroundSizeChange",r)}),this.containerResizeObserver.observe(t)}updateSizer({width:t,height:i},n,r){t&&i&&(i/t>re.containerSizeRatio?(i=t*re.containerSizeRatio,n.classList.toggle("netless-window-manager-sizer-horizontal",!0)):(t=i/re.containerSizeRatio,n.classList.toggle("netless-window-manager-sizer-horizontal",!1)),r.style.width=`${t}px`,r.style.height=`${i}px`)}disconnect(){var t;(t=this.containerResizeObserver)==null||t.disconnect(),E.isFunction(this.disposer)&&(this.disposer(),this.disposer=void 0)}}var Si={exports:{}},Y={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Cu=Object.getOwnPropertySymbols,cm=Object.prototype.hasOwnProperty,dm=Object.prototype.propertyIsEnumerable;function hm(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function pm(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(n.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(s){r[s]=s}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Ld=pm()?Object.assign:function(e,t){for(var i,n=hm(e),r,s=1;s<arguments.length;s++){i=Object(arguments[s]);for(var a in i)cm.call(i,a)&&(n[a]=i[a]);if(Cu){r=Cu(i);for(var o=0;o<r.length;o++)dm.call(i,r[o])&&(n[r[o]]=i[r[o]])}}return n};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zo=Ld,it=typeof Symbol=="function"&&Symbol.for,Gn=it?Symbol.for("react.element"):60103,fm=it?Symbol.for("react.portal"):60106,gm=it?Symbol.for("react.fragment"):60107,mm=it?Symbol.for("react.strict_mode"):60108,vm=it?Symbol.for("react.profiler"):60114,wm=it?Symbol.for("react.provider"):60109,ym=it?Symbol.for("react.context"):60110,xm=it?Symbol.for("react.forward_ref"):60112,Sm=it?Symbol.for("react.suspense"):60113,Mm=it?Symbol.for("react.memo"):60115,Cm=it?Symbol.for("react.lazy"):60116,Iu=typeof Symbol=="function"&&Symbol.iterator;function Xn(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jd={};function Ji(e,t,i){this.props=e,this.context=t,this.refs=jd,this.updater=i||Rd}Ji.prototype.isReactComponent={};Ji.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(Xn(85));this.updater.enqueueSetState(this,e,t,"setState")};Ji.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bd(){}Bd.prototype=Ji.prototype;function Yo(e,t,i){this.props=e,this.context=t,this.refs=jd,this.updater=i||Rd}var Go=Yo.prototype=new Bd;Go.constructor=Yo;Zo(Go,Ji.prototype);Go.isPureReactComponent=!0;var Xo={current:null},_d=Object.prototype.hasOwnProperty,Od={key:!0,ref:!0,__self:!0,__source:!0};function Vd(e,t,i){var n,r={},s=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)_d.call(t,n)&&!Od.hasOwnProperty(n)&&(r[n]=t[n]);var o=arguments.length-2;if(o===1)r.children=i;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)r[n]===void 0&&(r[n]=o[n]);return{$$typeof:Gn,type:e,key:s,ref:a,props:r,_owner:Xo.current}}function Im(e,t){return{$$typeof:Gn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Jo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gn}function bm(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(i){return t[i]})}var Ud=/\/+/g,Kr=[];function Wd(e,t,i,n){if(Kr.length){var r=Kr.pop();return r.result=e,r.keyPrefix=t,r.func=i,r.context=n,r.count=0,r}return{result:e,keyPrefix:t,func:i,context:n,count:0}}function Hd(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>Kr.length&&Kr.push(e)}function ja(e,t,i,n){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Gn:case fm:s=!0}}if(s)return i(n,e,t===""?"."+ra(e,0):t),1;if(s=0,t=t===""?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){r=e[a];var o=t+ra(r,a);s+=ja(r,o,i,n)}else if(e===null||typeof e!="object"?o=null:(o=Iu&&e[Iu]||e["@@iterator"],o=typeof o=="function"?o:null),typeof o=="function")for(e=o.call(e),a=0;!(r=e.next()).done;)r=r.value,o=t+ra(r,a++),s+=ja(r,o,i,n);else if(r==="object")throw i=""+e,Error(Xn(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return s}function Ba(e,t,i){return e==null?0:ja(e,"",t,i)}function ra(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bm(e.key):t.toString(36)}function Am(e,t){e.func.call(e.context,t,e.count++)}function Em(e,t,i){var n=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?_a(e,n,i,function(s){return s}):e!=null&&(Jo(e)&&(e=Im(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(Ud,"$&/")+"/")+i)),n.push(e))}function _a(e,t,i,n,r){var s="";i!=null&&(s=(""+i).replace(Ud,"$&/")+"/"),t=Wd(t,s,n,r),Ba(e,Em,t),Hd(t)}var $d={current:null};function Et(){var e=$d.current;if(e===null)throw Error(Xn(321));return e}var Tm={ReactCurrentDispatcher:$d,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:Xo,IsSomeRendererActing:{current:!1},assign:Zo};Y.Children={map:function(e,t,i){if(e==null)return e;var n=[];return _a(e,n,null,t,i),n},forEach:function(e,t,i){if(e==null)return e;t=Wd(null,null,t,i),Ba(e,Am,t),Hd(t)},count:function(e){return Ba(e,function(){return null},null)},toArray:function(e){var t=[];return _a(e,t,null,function(i){return i}),t},only:function(e){if(!Jo(e))throw Error(Xn(143));return e}};Y.Component=Ji;Y.Fragment=gm;Y.Profiler=vm;Y.PureComponent=Yo;Y.StrictMode=mm;Y.Suspense=Sm;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tm;Y.cloneElement=function(e,t,i){if(e==null)throw Error(Xn(267,e));var n=Zo({},e.props),r=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Xo.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)_d.call(t,l)&&!Od.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=i;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Gn,type:e.type,key:r,ref:s,props:n,_owner:a}};Y.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:ym,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:wm,_context:e},e.Consumer=e};Y.createElement=Vd;Y.createFactory=function(e){var t=Vd.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:xm,render:e}};Y.isValidElement=Jo;Y.lazy=function(e){return{$$typeof:Cm,_ctor:e,_status:-1,_result:null}};Y.memo=function(e,t){return{$$typeof:Mm,type:e,compare:t===void 0?null:t}};Y.useCallback=function(e,t){return Et().useCallback(e,t)};Y.useContext=function(e,t){return Et().useContext(e,t)};Y.useDebugValue=function(){};Y.useEffect=function(e,t){return Et().useEffect(e,t)};Y.useImperativeHandle=function(e,t,i){return Et().useImperativeHandle(e,t,i)};Y.useLayoutEffect=function(e,t){return Et().useLayoutEffect(e,t)};Y.useMemo=function(e,t){return Et().useMemo(e,t)};Y.useReducer=function(e,t,i){return Et().useReducer(e,t,i)};Y.useRef=function(e){return Et().useRef(e)};Y.useState=function(e){return Et().useState(e)};Y.version="16.14.0";Si.exports=Y;var F=Si.exports,km=Object.defineProperty,Pm=Object.defineProperties,Nm=Object.getOwnPropertyDescriptors,bu=Object.getOwnPropertySymbols,Dm=Object.prototype.hasOwnProperty,zm=Object.prototype.propertyIsEnumerable,Au=(e,t,i)=>t in e?km(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Eu=(e,t)=>{for(var i in t||(t={}))Dm.call(t,i)&&Au(e,i,t[i]);if(bu)for(var i of bu(t))zm.call(t,i)&&Au(e,i,t[i]);return e},Tu=(e,t)=>Pm(e,Nm(t)),Fd={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function r(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,m){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new r(h,c||l,m),y=i?i+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],v]:l._events[y].push(v):(l._events[y]=v,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)t.call(h,c)&&u.push(i?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},o.prototype.listeners=function(u){var h=i?i+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var m=0,v=c.length,y=new Array(v);m<v;m++)y[m]=c[m].fn;return y},o.prototype.listenerCount=function(u){var h=i?i+u:u,c=this._events[h];return c?c.fn?1:c.length:0},o.prototype.emit=function(u,h,c,m,v,y){var S=i?i+u:u;if(!this._events[S])return!1;var d=this._events[S],p=arguments.length,f,g;if(d.fn){switch(d.once&&this.removeListener(u,d.fn,void 0,!0),p){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,h),!0;case 3:return d.fn.call(d.context,h,c),!0;case 4:return d.fn.call(d.context,h,c,m),!0;case 5:return d.fn.call(d.context,h,c,m,v),!0;case 6:return d.fn.call(d.context,h,c,m,v,y),!0}for(g=1,f=new Array(p-1);g<p;g++)f[g-1]=arguments[g];d.fn.apply(d.context,f)}else{var w=d.length,x;for(g=0;g<w;g++)switch(d[g].once&&this.removeListener(u,d[g].fn,void 0,!0),p){case 1:d[g].fn.call(d[g].context);break;case 2:d[g].fn.call(d[g].context,h);break;case 3:d[g].fn.call(d[g].context,h,c);break;case 4:d[g].fn.call(d[g].context,h,c,m);break;default:if(!f)for(x=1,f=new Array(p-1);x<p;x++)f[x-1]=arguments[x];d[g].fn.apply(d[g].context,f)}}return!0},o.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},o.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},o.prototype.removeListener=function(u,h,c,m){var v=i?i+u:u;if(!this._events[v])return this;if(!h)return a(this,v),this;var y=this._events[v];if(y.fn)y.fn===h&&(!m||y.once)&&(!c||y.context===c)&&a(this,v);else{for(var S=0,d=[],p=y.length;S<p;S++)(y[S].fn!==h||m&&!y[S].once||c&&y[S].context!==c)&&d.push(y[S]);d.length?this._events[v]=d.length===1?d[0]:d:a(this,v)}return this},o.prototype.removeAllListeners=function(u){var h;return u?(h=i?i+u:u,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o})(Fd);var Oa=Fd.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Rn=function(){return Rn=Object.assign||function(t){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},Rn.apply(this,arguments)};function Ko(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i}var sa=0,Qd=typeof window!="undefined"&&window.requestAnimationFrame!==void 0?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),i=Math.max(0,16.7-(t-sa));sa=t+i,setTimeout(function(){return e(sa)},i)},Lm=function(e){var t=[],i=[],n=0,r=!1,s=0,a=new WeakSet,o=new WeakSet,l={cancel:function(u){var h=i.indexOf(u);a.add(u),h!==-1&&i.splice(h,1)},process:function(u){var h;if(r=!0,h=[i,t],t=h[0],i=h[1],i.length=0,n=t.length,n){var c;for(s=0;s<n;s++)c=t[s],c(u),o.has(c)===!0&&!a.has(c)&&(l.schedule(c),e(!0))}r=!1},schedule:function(u,h,c){h===void 0&&(h=!1),c===void 0&&(c=!1);var m=c&&r,v=m?t:i;a.delete(u),h&&o.add(u),v.indexOf(u)===-1&&(v.push(u),m&&(n=t.length))}};return l},Rm=40,ku=1/60*1e3,Dr=!0,jn=!1,Va=!1,fn={delta:0,timestamp:0},qo=["read","update","preRender","render","postRender"],jm=function(e){return jn=e},Zd=qo.reduce(function(e,t){return e[t]=Lm(jm),e},{}),Bm=qo.reduce(function(e,t){var i=Zd[t];return e[t]=function(n,r,s){return r===void 0&&(r=!1),s===void 0&&(s=!1),jn||Om(),i.schedule(n,r,s),n},e},{}),_m=function(e){return Zd[e].process(fn)},Yd=function(e){jn=!1,fn.delta=Dr?ku:Math.max(Math.min(e-fn.timestamp,Rm),1),Dr||(ku=fn.delta),fn.timestamp=e,Va=!0,qo.forEach(_m),Va=!1,jn&&(Dr=!1,Qd(Yd))},Om=function(){jn=!0,Dr=!0,Va||Qd(Yd)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $e=function(){return $e=Object.assign||function(t){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},$e.apply(this,arguments)},Gd=function(e,t){return function(i){return Math.max(Math.min(i,t),e)}},zr=function(e){return e%1?Number(e.toFixed(5)):e},Xd=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,Ns={test:function(e){return typeof e=="number"},parse:parseFloat,transform:function(e){return e}},xn=$e($e({},Ns),{transform:Gd(0,1)}),pr=$e($e({},Ns),{default:1}),el=function(e){return{test:function(t){return typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1},parse:parseFloat,transform:function(t){return""+t+e}}},ei=el("deg"),Sn=el("%"),W=el("px"),Pu=$e($e({},Sn),{parse:function(e){return Sn.parse(e)/100},transform:function(e){return Sn.transform(e*100)}}),Vm=function(e){return e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))},Um=Gd(0,255),Ua=function(e){return e.red!==void 0},Wa=function(e){return e.hue!==void 0};function Wm(e){return Vm(e).replace(/(,|\/)/g," ").split(/ \s*/)}var Jd=function(e){return function(t){if(typeof t!="string")return t;for(var i={},n=Wm(t),r=0;r<4;r++)i[e[r]]=n[r]!==void 0?parseFloat(n[r]):1;return i}},Hm=function(e){var t=e.red,i=e.green,n=e.blue,r=e.alpha,s=r===void 0?1:r;return"rgba("+t+", "+i+", "+n+", "+s+")"},$m=function(e){var t=e.hue,i=e.saturation,n=e.lightness,r=e.alpha,s=r===void 0?1:r;return"hsla("+t+", "+i+", "+n+", "+s+")"},aa=$e($e({},Ns),{transform:function(e){return Math.round(Um(e))}});function tl(e,t){return e.startsWith(t)&&Xd.test(e)}var Lr={test:function(e){return typeof e=="string"?tl(e,"rgb"):Ua(e)},parse:Jd(["red","green","blue","alpha"]),transform:function(e){var t=e.red,i=e.green,n=e.blue,r=e.alpha,s=r===void 0?1:r;return Hm({red:aa.transform(t),green:aa.transform(i),blue:aa.transform(n),alpha:zr(xn.transform(s))})}},oa={test:function(e){return typeof e=="string"?tl(e,"hsl"):Wa(e)},parse:Jd(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,i=e.saturation,n=e.lightness,r=e.alpha,s=r===void 0?1:r;return $m({hue:Math.round(t),saturation:Sn.transform(zr(i)),lightness:Sn.transform(zr(n)),alpha:zr(xn.transform(s))})}},Nu=$e($e({},Lr),{test:function(e){return typeof e=="string"&&tl(e,"#")},parse:function(e){var t="",i="",n="";return e.length>4?(t=e.substr(1,2),i=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),i=e.substr(2,1),n=e.substr(3,1),t+=t,i+=i,n+=n),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(n,16),alpha:1}}}),rt={test:function(e){return typeof e=="string"&&Xd.test(e)||Ua(e)||Wa(e)},parse:function(e){return Lr.test(e)?Lr.parse(e):oa.test(e)?oa.parse(e):Nu.test(e)?Nu.parse(e):e},transform:function(e){return Ua(e)?Lr.transform(e):Wa(e)?oa.transform(e):e}},il=function(e){var t=e.onRead,i=e.onRender,n=e.uncachedValues,r=n===void 0?new Set:n,s=e.useCache,a=s===void 0?!0:s;return function(o){o===void 0&&(o={});var l=Ko(o,[]),u={},h=[],c=!1;function m(y,S){y.startsWith("--")&&(l.hasCSSVariable=!0);var d=u[y];u[y]=S,u[y]!==d&&(h.indexOf(y)===-1&&h.push(y),c||(c=!0,Bm.render(v.render)))}var v={get:function(y,S){S===void 0&&(S=!1);var d=!S&&a&&!r.has(y)&&u[y]!==void 0;return d?u[y]:t(y,l)},set:function(y,S){if(typeof y=="string")m(y,S);else for(var d in y)m(d,y[d]);return this},render:function(y){return y===void 0&&(y=!1),(c||y===!0)&&(i(u,l,h),c=!1,h.length=0),this}};return v}},Fm=/([a-z])([A-Z])/g,Qm="$1-$2",Ds=function(e){return e.replace(Fm,Qm).toLowerCase()},Kd=new Map,nl=new Map,qd=["Webkit","Moz","O","ms",""],Zm=qd.length,Ym=typeof document!="undefined",la,eh=function(e,t){return nl.set(e,Ds(t))},Gm=function(e){la=la||document.createElement("div");for(var t=0;t<Zm;t++){var i=qd[t],n=i==="",r=n?e:i+e.charAt(0).toUpperCase()+e.slice(1);if(r in la.style||n){if(n&&e==="clipPath"&&nl.has(e))return;Kd.set(e,r),eh(e,(n?"":"-")+Ds(r))}}},Xm=function(e){return eh(e,e)},th=function(e,t){t===void 0&&(t=!1);var i=t?nl:Kd;return i.has(e)||(Ym?Gm(e):Xm(e)),i.get(e)||e},Jm=["","X","Y","Z"],Km=["translate","scale","rotate","skew","transformPerspective"],Ha=Km.reduce(function(e,t){return Jm.reduce(function(i,n){return i.push(t+n),i},e)},["x","y","z"]),qm=Ha.reduce(function(e,t){return e[t]=!0,e},{});function rl(e){return qm[e]===!0}function ev(e,t){return Ha.indexOf(e)-Ha.indexOf(t)}var tv=new Set(["originX","originY","originZ"]);function iv(e){return tv.has(e)}var Du=Rn(Rn({},Ns),{transform:Math.round}),nv={color:rt,backgroundColor:rt,outlineColor:rt,fill:rt,stroke:rt,borderColor:rt,borderTopColor:rt,borderRightColor:rt,borderBottomColor:rt,borderLeftColor:rt,borderWidth:W,borderTopWidth:W,borderRightWidth:W,borderBottomWidth:W,borderLeftWidth:W,borderRadius:W,radius:W,borderTopLeftRadius:W,borderTopRightRadius:W,borderBottomRightRadius:W,borderBottomLeftRadius:W,width:W,maxWidth:W,height:W,maxHeight:W,size:W,top:W,right:W,bottom:W,left:W,padding:W,paddingTop:W,paddingRight:W,paddingBottom:W,paddingLeft:W,margin:W,marginTop:W,marginRight:W,marginBottom:W,marginLeft:W,rotate:ei,rotateX:ei,rotateY:ei,rotateZ:ei,scale:pr,scaleX:pr,scaleY:pr,scaleZ:pr,skew:ei,skewX:ei,skewY:ei,distance:W,translateX:W,translateY:W,translateZ:W,x:W,y:W,z:W,perspective:W,opacity:xn,originX:Pu,originY:Pu,originZ:W,zIndex:Du,fillOpacity:xn,strokeOpacity:xn,numOctaves:Du},sl=function(e){return nv[e]},rv=function(e,t){return t&&typeof e=="number"?t.transform(e):e},Mn="scrollLeft",Cn="scrollTop",ih=new Set([Mn,Cn]),sv=new Set([Mn,Cn,"transform"]),av={x:"translateX",y:"translateY",z:"translateZ"};function nh(e){return typeof e=="function"}function ov(e,t,i,n,r,s){s===void 0&&(s=!0);var a="",o=!1;i.sort(ev);for(var l=i.length,u=0;u<l;u++){var h=i[u];a+=(av[h]||h)+"("+t[h]+") ",o=h==="z"?!0:o}return!o&&r?a+="translateZ(0)":a=a.trim(),nh(e.transform)?a=e.transform(t,n?"":a):s&&n&&(a="none"),a}function lv(e,t,i,n,r,s,a,o){t===void 0&&(t=!0),i===void 0&&(i={}),n===void 0&&(n={}),r===void 0&&(r={}),s===void 0&&(s=[]),a===void 0&&(a=!1),o===void 0&&(o=!0);var l=!0,u=!1,h=!1;for(var c in e){var m=e[c],v=sl(c),y=rv(m,v);rl(c)?(u=!0,n[c]=y,s.push(c),l&&(v.default&&m!==v.default||!v.default&&m!==0)&&(l=!1)):iv(c)?(r[c]=y,h=!0):(!sv.has(c)||!nh(y))&&(i[th(c,a)]=y)}return(u||typeof e.transform=="function")&&(i.transform=ov(e,n,s,l,t,o)),h&&(i.transformOrigin=(r.originX||"50%")+" "+(r.originY||"50%")+" "+(r.originZ||0)),i}function al(e){var t=e===void 0?{}:e,i=t.enableHardwareAcceleration,n=i===void 0?!0:i,r=t.isDashCase,s=r===void 0?!0:r,a=t.allowTransformNone,o=a===void 0?!0:a,l={},u={},h={},c=[];return function(m){return c.length=0,lv(m,n,l,u,h,c,s,o),l}}function uv(e,t){var i=t.element,n=t.preparseOutput,r=sl(e);if(rl(e))return r&&r.default||0;if(ih.has(e))return i[e];var s=window.getComputedStyle(i,null).getPropertyValue(th(e,!0))||0;return n&&r&&r.test(s)&&r.parse?r.parse(s):s}function cv(e,t,i){var n=t.element,r=t.buildStyles,s=t.hasCSSVariable;if(Object.assign(n.style,r(e)),s)for(var a=i.length,o=0;o<a;o++){var l=i[o];l.startsWith("--")&&n.style.setProperty(l,e[l])}i.indexOf(Mn)!==-1&&(n[Mn]=e[Mn]),i.indexOf(Cn)!==-1&&(n[Cn]=e[Cn])}var dv=il({onRead:uv,onRender:cv,uncachedValues:ih});function hv(e,t){t===void 0&&(t={});var i=t.enableHardwareAcceleration,n=t.allowTransformNone,r=Ko(t,["enableHardwareAcceleration","allowTransformNone"]);return dv(Rn({element:e,buildStyles:al({enableHardwareAcceleration:i,allowTransformNone:n}),preparseOutput:!0},r))}var rh=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),zu=.5,sh=function(){return{style:{}}},ua=function(e,t){return W.transform(e*t)},pv={x:0,y:0,width:0,height:0};function Lu(e,t,i){return typeof e=="string"?e:W.transform(t+i*e)}function fv(e,t,i){return Lu(t,e.x,e.width)+" "+Lu(i,e.y,e.height)}var ah={enableHardwareAcceleration:!1,isDashCase:!1};function gv(e,t,i,n,r,s){t===void 0&&(t=pv),n===void 0&&(n=al(ah)),r===void 0&&(r=sh()),s===void 0&&(s=!0);var a=e.attrX,o=e.attrY,l=e.originX,u=e.originY,h=e.pathLength,c=e.pathSpacing,m=c===void 0?1:c,v=e.pathOffset,y=v===void 0?0:v,S=Ko(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),d=n(S);for(var p in d)if(p==="transform")r.style.transform=d[p];else{var f=s&&!rh.has(p)?Ds(p):p;r[f]=d[p]}return(l!==void 0||u!==void 0||d.transform)&&(r.style.transformOrigin=fv(t,l!==void 0?l:zu,u!==void 0?u:zu)),a!==void 0&&(r.x=a),o!==void 0&&(r.y=o),i!==void 0&&h!==void 0&&(r[s?"stroke-dashoffset":"strokeDashoffset"]=ua(-y,i),r[s?"stroke-dasharray":"strokeDasharray"]=ua(h,i)+" "+ua(m,i)),r}function mv(e,t,i){i===void 0&&(i=!0);var n=sh(),r=al(ah);return function(s){return gv(s,e,t,r,n,i)}}var vv=function(e){return typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()},wv=function(e){try{return vv(e)}catch{return{x:0,y:0,width:0,height:0}}},yv=function(e){return e.tagName==="path"},xv=il({onRead:function(e,t){var i=t.element;if(e=rh.has(e)?e:Ds(e),rl(e)){var n=sl(e);return n&&n.default||0}else return i.getAttribute(e)},onRender:function(e,t){var i=t.element,n=t.buildAttrs,r=n(e);for(var s in r)s==="style"?Object.assign(i.style,r.style):i.setAttribute(s,r[s])}}),Sv=function(e){var t=wv(e),i=yv(e)&&e.getTotalLength?e.getTotalLength():void 0;return xv({element:e,buildAttrs:mv(t,i)})},Mv=il({useCache:!1,onRead:function(e){return e==="scrollTop"?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,i=t===void 0?0:t,n=e.scrollLeft,r=n===void 0?0:n;return window.scrollTo(r,i)}}),$a=new WeakMap,Cv=function(e){return e instanceof HTMLElement||typeof e.click=="function"},Iv=function(e){return e instanceof SVGElement||"ownerSVGElement"in e},bv=function(e,t){var i;return e===window?i=Mv(e):Cv(e)?i=hv(e,t):Iv(e)&&(i=Sv(e)),$a.set(e,i),i},Av=function(e,t){return $a.has(e)?$a.get(e):bv(e,t)};function Ev(e,t){var i=typeof e=="string"?document.querySelector(e):e;return Av(i,t)}var at=function(t,i,n,r){var s=n?n.call(r,t,i):void 0;if(s!==void 0)return!!s;if(t===i)return!0;if(typeof t!="object"||!t||typeof i!="object"||!i)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(i),u=0;u<a.length;u++){var h=a[u];if(!l(h))return!1;var c=t[h],m=i[h];if(s=n?n.call(r,c,m,h):void 0,s===!1||s===void 0&&c!==m)return!1}return!0};const oh="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Tv=oh.length,Ru=Array(20),nn=()=>{for(let e=0;e<20;e++)Ru[e]=oh.charAt(Math.random()*Tv);return Ru.join("")};class qr{constructor(){this.disposers=new Map}add(t,i=nn()){return this.flush(i),this.disposers.set(i,t()),i}addDisposer(t,i=nn()){return this.flush(i),this.disposers.set(i,t),i}addEventListener(t,i,n,r,s=nn()){return this.add(()=>(t.addEventListener(i,n,r),()=>t.removeEventListener(i,n,r)),s),s}setTimeout(t,i,n=nn()){return this.add(()=>{const r=window.setTimeout(()=>{this.remove(n),t()},i);return()=>window.clearTimeout(r)},n)}setInterval(t,i,n=nn()){return this.add(()=>{const r=window.setInterval(t,i);return()=>window.clearInterval(r)},n)}remove(t){const i=this.disposers.get(t);return this.disposers.delete(t),i}flush(t){const i=this.remove(t);if(i)try{i()}catch(n){console.error(n)}}flushAll(){this.disposers.forEach(t=>{try{t()}catch(i){console.error(i)}}),this.disposers.clear()}}var kv=Object.defineProperty,ca=(typeof require!="undefined"&&require,(e,t,i)=>(((n,r,s)=>{r in n?kv(n,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[r]=s})(e,typeof t!="symbol"?t+"":t,i),i));class Jn{constructor(t,i){ca(this,"_value"),ca(this,"_beforeDestroys"),ca(this,"_subscribers"),this._value=t,i&&(this.compare=i)}get value(){return this._value}setValue(t,i){if(!this.compare(t,this._value)){const n=this._value;this._value=t,this._subscribers&&this._subscribers.forEach(r=>r(t,n,i))}}reaction(t){return this._subscribers||(this._subscribers=new Set),this._subscribers.add(t),()=>{this._subscribers&&this._subscribers.delete(t)}}subscribe(t,i){const n=this.reaction(t);return t(this._value,void 0,i),n}derive(t,i,n){const r=new Jn(t(this.value,void 0,n),i),s=this.reaction((a,o,l)=>{r.setValue(t(a,o,l))});return r.addBeforeDestroy(s),r}destroy(){this._beforeDestroys&&(this._beforeDestroys.forEach(t=>t()),this._beforeDestroys.clear()),this._subscribers&&this._subscribers.clear()}addBeforeDestroy(t){return this._beforeDestroys||(this._beforeDestroys=new Set),this._beforeDestroys.add(t),()=>{this._beforeDestroys&&this._beforeDestroys.delete(t)}}compare(t,i){return t===i}}function Pv(e,t,i,n){let r=e.map(a=>a.value);const s=new Jn(t(r,void 0,n),i);return e.forEach((a,o)=>{const l=a.reaction((u,h,c)=>{const m=r.slice();m[o]=u;const v=r;r=m,s.setValue(t(m,v,c),c)});s.addBeforeDestroy(l)}),s}function lh(e,t){Object.keys(t).forEach(i=>{Nv(e,i,t[i])})}function Nv(e,t,i){var n;return Object.defineProperties(e,{[t]:{get:()=>i.value},[`_${t}$`]:{value:i},[`set${n=t,n[0].toUpperCase()+n.slice(1)}`]:{value:(r,s)=>i.setValue(r,s)}}),e}function uh(e){const t=i=>{const n=e.addDisposer(()=>{i.destroy()});return i.addBeforeDestroy(()=>{e.remove(n)}),i};return{bindSideEffect:t,combine:(i,n,r,s)=>t(Pv(i,n,r,s)),createVal:(i,n)=>t(new Jn(i,n))}}var es;(function(e){e.Light="light",e.Dark="dark",e.Auto="auto"})(es||(es={}));var ie;(function(e){e.Normal="normal",e.Minimized="minimized",e.Maximized="maximized"})(ie||(ie={}));var le;(function(e){e.DarkMode="dark_mode",e.PrefersColorScheme="prefers_color_scheme",e.Close="close",e.Focus="focus",e.Blur="blur",e.Move="move",e.Resize="resize",e.IntrinsicMove="intrinsic_move",e.IntrinsicResize="intrinsic_resize",e.VisualResize="visual_resize",e.ZIndex="z_index",e.State="state",e.Minimized="minimized",e.Maximized="maximized",e.Readonly="readonly",e.Destroyed="destroyed"})(le||(le={}));var Me;(function(e){e.Close="close",e.Maximize="maximize",e.Minimize="minimize"})(Me||(Me={}));var Ke;(function(e){e.North="n",e.South="s",e.West="w",e.East="e",e.NorthWest="nw",e.NorthEast="ne",e.SouthEast="se",e.SouthWest="sw"})(Ke||(Ke={}));const da="dh";function be(e,t,i){return Math.min(Math.max(e,t),i)}function Di(e){e.stopPropagation(),e.cancelable&&e.preventDefault()}function ju(e){return e.touches?e.touches[0]:e}function Dv(){return Date.now().toString().slice(6)+Math.random().toString().slice(2,8)}let zv=1;function Lv(){return`New Box ${zv++}`}function Rv(e){return Boolean(e)}function fr(e){return!e}class ch{constructor({readonly:t=!1,title:i,buttons:n,onEvent:r,onDragStart:s,namespace:a="telebox",state:o=ie.Normal}={}){this.$btns=[],this.sideEffect=new qr,this.lastTitleBarClick={timestamp:0,clientX:-100,clientY:-100},this.handleTitleBarClick=l=>{var u;if(this.readonly||l.button!==0||(u=l.target.dataset)!=null&&u.teleTitleBarNoDblClick)return;Di(l);const h=Date.now();h-this.lastTitleBarClick.timestamp<=500?Math.abs(l.clientX-this.lastTitleBarClick.clientX)<=5&&Math.abs(l.clientY-this.lastTitleBarClick.clientY)<=5&&this.onEvent&&this.onEvent({type:Me.Maximize}):this.onDragStart&&this.onDragStart(l),this.lastTitleBarClick.timestamp=h,this.lastTitleBarClick.clientX=l.clientX,this.lastTitleBarClick.clientY=l.clientY},this.lastTitleBarTouch={timestamp:0,clientX:-100,clientY:-100},this.handleTitleBarTouch=l=>{var u;if(this.readonly||(u=l.target.dataset)!=null&&u.teleTitleBarNoDblClick)return;Di(l);const h=Date.now(),{clientX:c=this.lastTitleBarTouch.clientX+100,clientY:m=this.lastTitleBarTouch.clientY+100}=l.touches[0]||{};h-this.lastTitleBarTouch.timestamp<=500?Math.abs(c-this.lastTitleBarTouch.clientX)<=10&&Math.abs(m-this.lastTitleBarTouch.clientY)<=10&&this.onEvent&&this.onEvent({type:Me.Maximize}):this.onDragStart&&this.onDragStart(l),this.lastTitleBarTouch.timestamp=h,this.lastTitleBarTouch.clientX=c,this.lastTitleBarTouch.clientY=m},this.readonly=t,this.onEvent=r,this.onDragStart=s,this.namespace=a,this.title=i,this.state=o,this.buttons=n||[{type:Me.Minimize,iconClassName:this.wrapClassName("titlebar-icon-minimize")},{type:Me.Maximize,iconClassName:this.wrapClassName("titlebar-icon-maximize"),isActive:l=>l===ie.Maximized},{type:Me.Close,iconClassName:this.wrapClassName("titlebar-icon-close")}],this.$dragArea=this.renderDragArea()}setTitle(t){this.title=t,this.$title&&(this.$title.textContent=t,this.$title.title=t)}setState(t){this.state!==t&&(this.state=t,this.buttons.forEach((i,n)=>{i.isActive&&this.$btns[n].classList.toggle("is-active",i.isActive(t))}))}setReadonly(t){this.readonly!==t&&(this.readonly=t)}render(){if(!this.$titleBar){this.$titleBar=document.createElement("div"),this.$titleBar.className=this.wrapClassName("titlebar");const t=document.createElement("div");t.className=this.wrapClassName("title-area"),t.dataset.teleBoxHandle=da,this.$title=document.createElement("h1"),this.$title.className=this.wrapClassName("title"),this.$title.dataset.teleBoxHandle=da,this.title&&(this.$title.textContent=this.title,this.$title.title=this.title),t.appendChild(this.$title),t.appendChild(this.$dragArea);const i=document.createElement("div");i.className=this.wrapClassName("titlebar-btns"),this.buttons.forEach(({iconClassName:n,isActive:r},s)=>{const a=String(s),o=document.createElement("button");o.className=`${this.wrapClassName("titlebar-btn")} ${n}`,o.dataset.teleTitleBarBtnIndex=a,o.dataset.teleTitleBarNoDblClick="true",r&&o.classList.toggle("is-active",r(this.state)),this.$btns.push(o),i.appendChild(o)}),this.sideEffect.addEventListener(i,"click",n=>{var r;if(this.readonly)return;const s=n.target,a=Number((r=s.dataset)==null?void 0:r.teleTitleBarBtnIndex);if(!Number.isNaN(a)&&a<this.buttons.length){Di(n);const o=this.buttons[a];this.onEvent&&this.onEvent({type:o.type,value:o.value})}}),this.$titleBar.appendChild(t),this.$titleBar.appendChild(i)}return this.$titleBar}renderDragArea(){const t=document.createElement("div");return t.className=this.wrapClassName("drag-area"),t.dataset.teleBoxHandle=da,this.sideEffect.addEventListener(t,"mousedown",this.handleTitleBarClick),this.sideEffect.addEventListener(t,"touchstart",this.handleTitleBarTouch,{passive:!0}),t}dragHandle(){return this.$titleBar}wrapClassName(t){return`${this.namespace}-${t}`}destroy(){this.sideEffect.flushAll(),this.$titleBar&&(this.$titleBar=void 0,this.$title=void 0,this.$btns.length=0,this.onDragStart=void 0,this.onEvent=void 0)}}class jv{constructor({id:t=Dv(),title:i=Lv(),prefersColorScheme:n=es.Light,darkMode:r,visible:s=!0,width:a=.5,height:o=.5,minWidth:l=0,minHeight:u=0,x:h=.1,y:c=.1,minimized:m=!1,maximized:v=!1,readonly:y=!1,resizable:S=!0,draggable:d=!0,fence:p=!0,fixRatio:f=!1,focus:g=!1,zIndex:w=100,namespace:x="telebox",titleBar:b,content:T,footer:L,styles:k,containerRect:R={x:0,y:0,width:window.innerWidth,height:window.innerHeight},collectorRect:C}={}){this._renderSideEffect=new qr,this.handleTrackStart=z=>{var Z;return(Z=this._handleTrackStart)==null?void 0:Z.call(this,z)},this._sideEffect=new qr,this._valSideEffectBinder=uh(this._sideEffect);const{combine:_,createVal:N}=this._valSideEffectBinder;this.id=t,this.namespace=x,this.events=new Oa,this._delegateEvents=new Oa;const j=N(n);j.reaction((z,Z,V)=>{V||this.events.emit(le.PrefersColorScheme,z)});const Q=N(Boolean(r));r==null&&j.subscribe((z,Z,V)=>{this._sideEffect.add(()=>{if(z==="auto"){const ce=window.matchMedia("(prefers-color-scheme: dark)");if(ce){Q.setValue(ce.matches,V);const dr=hr=>{Q.setValue(hr.matches,V)};return ce.addListener(dr),()=>ce.removeListener(dr)}else return Bu}else return Q.setValue(z==="dark",V),Bu},"prefers-color-scheme")}),Q.reaction((z,Z,V)=>{V||this.events.emit(le.DarkMode,z)});const fe=N(R,at),Ze=N(C,at),Tt=N(i),kt=N(s);kt.reaction((z,Z,V)=>{!V&&!z&&this.events.emit(le.Close)});const Pt=N(y);Pt.reaction((z,Z,V)=>{V||this.events.emit(le.Readonly,z)});const tn=N(S),ur=N(d),qs=N(p),I=N(f),D=N(w);D.reaction((z,Z,V)=>{V||this.events.emit(le.ZIndex,z)});const $=N(g);$.reaction((z,Z,V)=>{V||this.events.emit(z?le.Focus:le.Blur)});const G=N(m);G.reaction((z,Z,V)=>{V||this.events.emit(le.Minimized,z)});const X=N(v);X.reaction((z,Z,V)=>{V||this.events.emit(le.Maximized,z)});const nt=_([G,X],([z,Z])=>z?ie.Minimized:Z?ie.Maximized:ie.Normal);nt.reaction((z,Z,V)=>{V||this.events.emit(le.State,z)});const Ve=N({width:be(l,0,1),height:be(u,0,1)},at),Ye=N({width:be(a,Ve.value.width,1),height:be(o,Ve.value.height,1)},at);Ve.reaction((z,Z,V)=>{Ye.setValue({width:be(a,z.width,1),height:be(o,z.height,1)},V)}),Ye.reaction((z,Z,V)=>{V||this.events.emit(le.IntrinsicResize,z)});const Ue=_([Ye,X],([z,Z])=>Z?{width:1,height:1}:z,at);Ue.reaction((z,Z,V)=>{V||this.events.emit(le.Resize,z)});const hu=_([Ue,G,fe,Ze],([z,Z,V,ce])=>Z&&ce?{width:ce.width/z.width/V.width,height:ce.height/z.height/V.height}:z,at);hu.reaction((z,Z,V)=>{V||this.events.emit(le.VisualResize,z)});const ea=N({x:be(h,0,1),y:be(c,0,1)},at);ea.reaction((z,Z,V)=>{V||this.events.emit(le.IntrinsicMove,z)});const cr=_([ea,Ye,fe,Ze,G,X],([z,Z,V,ce,dr,hr])=>dr&&ce?hr?{x:(ce.x+ce.width/2)/V.width-1/2,y:(ce.y+ce.height/2)/V.height-1/2}:{x:(ce.x+ce.width/2)/V.width-Z.width/2,y:(ce.y+ce.height/2)/V.height-Z.height/2}:hr?{x:0,y:0}:z,at);cr.reaction((z,Z,V)=>{V||this.events.emit(le.Move,z)}),this.titleBar=b||new ch({readonly:Pt.value,title:Tt.value,namespace:this.namespace,onDragStart:z=>{var Z;return(Z=this._handleTrackStart)==null?void 0:Z.call(this,z)},onEvent:z=>{if(this._delegateEvents.listeners.length>0)this._delegateEvents.emit(z.type);else switch(z.type){case Me.Maximize:{X.setValue(!X.value);break}case Me.Minimize:{G.setValue(!0);break}case Me.Close:{kt.setValue(!1);break}default:{console.error("Unsupported titleBar event:",z);break}}}}),Pt.reaction(z=>{this.titleBar.setReadonly(z)});const og=N(T),lg=N(L),ug=N(k);lh(this,{prefersColorScheme:j,darkMode:Q,containerRect:fe,collectorRect:Ze,title:Tt,visible:kt,readonly:Pt,resizable:tn,draggable:ur,fence:qs,fixRatio:I,focus:$,zIndex:D,minimized:G,maximized:X,$userContent:og,$userFooter:lg,$userStyles:ug}),this._state$=nt,this._minSize$=Ve,this._size$=Ue,this._intrinsicSize$=Ye,this._visualSize$=hu,this._coord$=cr,this._intrinsicCoord$=ea,this.fixRatio&&this.transform(cr.value.x,cr.value.y,Ue.value.width,Ue.value.height,!0),this.$box=this.render()}get darkMode(){return this._darkMode$.value}get state(){return this._state$.value}setState(t,i=!1){switch(t){case ie.Maximized:{this.setMinimized(!1,i),this.setMaximized(!0,i);break}case ie.Minimized:{this.setMinimized(!0,i),this.setMaximized(!1,i);break}default:{this.setMinimized(!1,i),this.setMaximized(!1,i);break}}return this}get minWidth(){return this._minSize$.value.width}get minHeight(){return this._minSize$.value.height}setMinWidth(t,i=!1){return this._minSize$.setValue({width:t,height:this.minHeight},i),this}setMinHeight(t,i=!1){return this._minSize$.setValue({width:this.minWidth,height:t},i),this}get intrinsicWidth(){return this._intrinsicSize$.value.width}get intrinsicHeight(){return this._intrinsicSize$.value.height}resize(t,i,n=!1){return this._intrinsicSize$.setValue({width:t,height:i},n),this}get width(){return this._size$.value.width}get height(){return this._size$.value.height}get absoluteWidth(){return this.width*this.containerRect.width}get absoluteHeight(){return this.height*this.containerRect.height}get visualWidth(){return this._visualSize$.value.width}get visualHeight(){return this._visualSize$.value.height}get intrinsicX(){return this._intrinsicCoord$.value.x}get intrinsicY(){return this._intrinsicCoord$.value.y}move(t,i,n=!1){return this._intrinsicCoord$.setValue({x:t,y:i},n),this}get x(){return this._coord$.value.x}get y(){return this._coord$.value.y}transform(t,i,n,r,s=!1){if(this.fixRatio){const a=this.intrinsicHeight/this.intrinsicWidth*n;i!==this.intrinsicY&&(i-=a-r),r=a}return i<0&&(i=0,r>this.intrinsicHeight&&(r=this.intrinsicHeight)),this._intrinsicCoord$.setValue({x:n>=this.minWidth?t:this.intrinsicX,y:r>=this.minHeight?i:this.intrinsicY},s),this._intrinsicSize$.setValue({width:be(n,this.minWidth,1),height:be(r,this.minHeight,1)},s),this}mount(t){return t.appendChild(this.render()),this}unmount(){return this.$box&&this.$box.remove(),this}mountContent(t){return this.set$userContent(t),this}unmountContent(){return this.set$userContent(void 0),this}mountFooter(t){return this.set$userFooter(t),this}unmountFooter(){return this.set$userFooter(void 0),this}getUserStyles(){return this.$userStyles}mountStyles(t){let i;return typeof t=="string"?(i=document.createElement("style"),i.textContent=t):i=t,this.set$userStyles(i),this}unmountStyles(){return this.set$userStyles(void 0),this}render(t){if(t){if(t===this.$box)return this.$box;this.$box=t}else{if(this.$box)return this.$box;this.$box=document.createElement("div")}this._renderSideEffect.flushAll(),this.$box.classList.add(this.wrapClassName("box"));const i=(c,m,v,y=Rv)=>this._renderSideEffect.add(()=>{const S=this.wrapClassName(v);return m.subscribe(d=>{c.classList.toggle(S,y(d))})});i(this.$box,this._readonly$,"readonly"),i(this.$box,this._draggable$,"no-drag",fr),i(this.$box,this._resizable$,"no-resize",fr),i(this.$box,this._focus$,"blur",fr),i(this.$box,this._darkMode$,"color-scheme-dark"),i(this.$box,this._darkMode$,"color-scheme-light",fr),this._renderSideEffect.add(()=>{const c=this.wrapClassName("minimized"),m=this.wrapClassName("maximized"),v="box-maximized-timer";return this._state$.subscribe(y=>{this.$box.classList.toggle(c,y===ie.Minimized),y===ie.Maximized?(this._renderSideEffect.flush(v),this.$box.classList.toggle(m,!0)):this._renderSideEffect.setTimeout(()=>{this.$box.classList.toggle(m,!1)},0,v)})}),this._renderSideEffect.add(()=>this._visible$.subscribe(c=>{this.$box.style.display=c?"block":"none"})),this._renderSideEffect.add(()=>this._zIndex$.subscribe(c=>{this.$box.style.zIndex=String(c)}));const n=Ev(this.$box);this.$box.dataset.teleBoxID=this.id,this.$box.style.width=this.absoluteWidth+"px",this.$box.style.height=this.absoluteHeight+"px";const r=this.x*this.containerRect.width+this.containerRect.x,s=this.y*this.containerRect.height+this.containerRect.y;this.$box.style.transform=`translate(${r-10}px,${s-10}px)`,this._valSideEffectBinder.combine([this._coord$,this._size$,this._minimized$,this._containerRect$,this._collectorRect$],([c,m,v,y,S])=>{const d=m.width*y.width,p=m.height*y.height;return{width:d+(v&&S?1:0),height:p+(v&&S?1:0),x:c.x*y.width,y:c.y*y.height,scaleX:v&&S?S.width/d:1,scaleY:v&&S?S.height/p:1}},at).subscribe(c=>{n.set(c)}),n.set({x:r,y:s});const a=document.createElement("div");a.className=this.wrapClassName("box-main"),this.$box.appendChild(a);const o=document.createElement("div");o.className=this.wrapClassName("titlebar-wrap"),o.appendChild(this.titleBar.render()),this.$titleBar=o;const l=document.createElement("div");l.className=this.wrapClassName("content-wrap");const u=document.createElement("div");u.className=this.wrapClassName("content")+" tele-fancy-scrollbar",this.$content=u,this._renderSideEffect.add(()=>{let c;return this._$userStyles$.subscribe(m=>{c&&c.remove(),c=m,m&&l.appendChild(m)})}),this._renderSideEffect.add(()=>{let c;return this._$userContent$.subscribe(m=>{c&&c.remove(),c=m,m&&u.appendChild(m)})}),l.appendChild(u);const h=document.createElement("div");return h.className=this.wrapClassName("footer-wrap"),this.$footer=h,this._renderSideEffect.add(()=>{let c;return this._$userFooter$.subscribe(m=>{c&&c.remove(),c=m,m&&h.appendChild(m)})}),a.appendChild(o),a.appendChild(l),a.appendChild(h),this._renderResizeHandlers(),this.$box}_renderResizeHandlers(){const t=document.createElement("div");t.className=this.wrapClassName("resize-handles"),Object.values(Ke).forEach(S=>{const d=document.createElement("div");d.className=this.wrapClassName(S)+" "+this.wrapClassName("resize-handle"),d.dataset.teleBoxHandle=S,t.appendChild(d)}),this.$box.appendChild(t);const i="handle-tracking-listener",n=this.wrapClassName("transforming");let r,s=0,a=0,o=0,l=0,u=0,h=0,c;const m=S=>{if(this.state!==ie.Normal)return;Di(S);let{pageX:d,pageY:p}=ju(S);p<0&&(p=0);const f=(d-u)/this.containerRect.width,g=(p-h)/this.containerRect.height;switch(c){case Ke.North:{this.transform(this.x,a+g,this.width,l-g);break}case Ke.South:{this.transform(this.x,this.y,this.width,l+g);break}case Ke.West:{this.transform(s+f,this.y,o-f,this.height);break}case Ke.East:{this.transform(this.x,this.y,o+f,this.height);break}case Ke.NorthWest:{this.transform(s+f,a+g,o-f,l-g);break}case Ke.NorthEast:{this.transform(this.x,a+g,o+f,l-g);break}case Ke.SouthEast:{this.transform(this.x,this.y,o+f,l+g);break}case Ke.SouthWest:{this.transform(s+f,this.y,o-f,l+g);break}default:{if(this.fence)this.move(be(s+f,0,1-this.width),be(a+g,0,1-this.height));else{const w=20/this.containerRect.width,x=20/this.containerRect.height;this.move(be(s+f,w-this.width,1-w),be(a+g,0,1-x))}break}}},v=S=>{c=void 0,r&&(Di(S),this.$box.classList.toggle(n,!1),this._sideEffect.flush(i),r.remove())},y=S=>{var d;if(this.readonly||S.button!=null&&S.button!==0||!this.draggable||c||this.state!==ie.Normal)return;const p=S.target;if((d=p.dataset)!=null&&d.teleBoxHandle){Di(S),s=this.x,a=this.y,o=this.width,l=this.height,{pageX:u,pageY:h}=ju(S),c=p.dataset.teleBoxHandle,r||(r=document.createElement("div"));const f=c?this.wrapClassName(`cursor-${c}`):"";r.className=this.wrapClassName(`track-mask${f?` ${f}`:""}`),this.$box.appendChild(r),this.$box.classList.add(n),this._sideEffect.add(()=>(window.addEventListener("mousemove",m),window.addEventListener("touchmove",m,{passive:!1}),window.addEventListener("mouseup",v),window.addEventListener("touchend",v,{passive:!1}),window.addEventListener("touchcancel",v,{passive:!1}),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",v),window.removeEventListener("touchend",v),window.removeEventListener("touchcancel",v)}),i)}};this._handleTrackStart=y,this._sideEffect.addEventListener(t,"mousedown",y,{},"box-resizeHandles-mousedown"),this._sideEffect.addEventListener(t,"touchstart",y,{passive:!1},"box-resizeHandles-touchstart")}destroy(){this.$box.remove(),this.events.emit(le.Destroyed),this._sideEffect.flushAll(),this._renderSideEffect.flushAll(),this.events.removeAllListeners(),this._delegateEvents.removeAllListeners()}wrapClassName(t){return`${this.namespace}-${t}`}}function Bu(){}var Bv="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxOCAxNiI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxwYXRoIHN0cm9rZT0iIzdCODhBMCIgc3Ryb2tlLXdpZHRoPSIxLjQiIGQ9Ik0uNyAxLjJoMTYuNnYxMy42SC43eiIgLz4KICAgICAgICA8cGF0aCBmaWxsPSIjN0I4OEEwIiBkPSJNNCA1LjVoNnYxLjRINHpNNCA5LjVoMTB2MS40SDR6IiAvPgogICAgPC9nPgo8L3N2Zz4K";class dh{constructor({visible:t=!0,readonly:i=!1,darkMode:n=!1,namespace:r="telebox",styles:s={},onClick:a}={}){this.handleCollectorClick=()=>{!this._readonly&&this.onClick&&this.onClick()},this._visible=t,this._readonly=i,this._darkMode=n,this.namespace=r,this.styles=s,this.onClick=a}get visible(){return this._visible}get readonly(){return this._readonly}get darkMode(){return this._darkMode}mount(t){return t.appendChild(this.render()),this}unmount(){return this.$collector&&this.$collector.remove(),this}setVisible(t){return this._visible!==t&&(this._visible=t,this.$collector&&this.$collector.classList.toggle(this.wrapClassName("collector-visible"),t)),this}setReadonly(t){return this._readonly!==t&&(this._readonly=t,this.$collector&&this.$collector.classList.toggle(this.wrapClassName("collector-readonly"),t)),this}setDarkMode(t){return this._darkMode!==t&&(this._darkMode=t,this.$collector&&(this.$collector.classList.toggle(this.wrapClassName("color-scheme-dark"),t),this.$collector.classList.toggle(this.wrapClassName("color-scheme-light"),!t))),this}setStyles(t){if(Object.assign(this.styles,t),this.$collector){const i=this.$collector;Object.keys(t).forEach(n=>{const r=t[n];r!=null&&(i.style[n]=r)})}return this}render(){return this.$collector||(this.$collector=document.createElement("button"),this.$collector.className=this.wrapClassName("collector"),this.$collector.style.backgroundImage=`url('${Bv}')`,this.$collector.addEventListener("click",this.handleCollectorClick),this._visible&&this.$collector.classList.add(this.wrapClassName("collector-visible")),this._readonly&&this.$collector.classList.add(this.wrapClassName("collector-readonly")),this.$collector.classList.add(this.wrapClassName(this._darkMode?"color-scheme-dark":"color-scheme-light")),this.setStyles(this.styles)),this.$collector}destroy(){this.$collector&&(this.$collector.removeEventListener("click",this.handleCollectorClick),this.$collector.remove(),this.$collector=void 0),this.onClick=void 0}wrapClassName(t){return`${this.namespace}-${t}`}}var oe;(function(e){e.Focused="focused",e.Blurred="blurred",e.Created="created",e.Removed="removed",e.State="state",e.Maximized="maximized",e.Minimized="minimized",e.Move="move",e.Resize="resize",e.IntrinsicMove="intrinsic_move",e.IntrinsicResize="intrinsic_resize",e.VisualResize="visual_resize",e.ZIndex="z_index",e.PrefersColorScheme="prefers_color_scheme",e.DarkMode="dark_mode"})(oe||(oe={}));class _v extends ch{constructor(t){super(t);this.boxes=t.boxes,this.focusedBox=t.focusedBox,this.containerRect=t.containerRect,this.darkMode=t.darkMode}focusBox(t){var i;if(!(this.focusedBox&&this.focusedBox===t)){if(this.$titles&&this.state===ie.Maximized){const{children:n}=this.$titles.firstElementChild;for(let r=n.length-1;r>=0;r-=1){const s=n[r],a=(i=s.dataset)==null?void 0:i.teleBoxID;a&&(t&&a===t.id?s.classList.toggle(this.wrapClassName("titles-tab-focus"),!0):this.focusedBox&&a===this.focusedBox.id&&s.classList.toggle(this.wrapClassName("titles-tab-focus"),!1))}}this.focusedBox=t}}setContainerRect(t){if(this.containerRect=t,this.$titleBar){const{x:i,y:n,width:r}=t;this.$titleBar.style.transform=`translate(${i}px, ${n}px)`,this.$titleBar.style.width=r+"px"}}setBoxes(t){this.boxes=t,this.updateTitles()}setState(t){super.setState(t),this.$titleBar&&this.$titleBar.classList.toggle(this.wrapClassName("max-titlebar-maximized"),t===ie.Maximized),this.updateTitles()}setReadonly(t){super.setReadonly(t),this.$titleBar&&this.$titleBar.classList.toggle(this.wrapClassName("readonly"),this.readonly)}setDarkMode(t){t!==this.darkMode&&(this.darkMode=t,this.$titleBar&&(this.$titleBar.classList.toggle(this.wrapClassName("color-scheme-dark"),t),this.$titleBar.classList.toggle(this.wrapClassName("color-scheme-light"),!t)))}render(){const t=super.render(),{x:i,y:n,width:r}=this.containerRect;t.style.transform=`translate(${i}px, ${n}px)`,t.style.width=r+"px",t.classList.add(this.wrapClassName("max-titlebar")),t.classList.toggle(this.wrapClassName("max-titlebar-maximized"),this.state===ie.Maximized),t.classList.toggle(this.wrapClassName("readonly"),this.readonly),t.classList.add(this.wrapClassName(this.darkMode?"color-scheme-dark":"color-scheme-light"));const s=document.createElement("div");return s.classList.add(this.wrapClassName("titles-area")),t.insertBefore(s,t.firstElementChild),this.updateTitles(),t}destroy(){super.destroy(),this.$titles=void 0,this.boxes.length=0,this.focusedBox=void 0}updateTitles(){this.$titleBar&&this.state===ie.Maximized&&(this.$titleBar.classList.toggle(this.wrapClassName("max-titlebar-single-title"),this.boxes.length===1),this.boxes.length===1?this.setTitle(this.boxes[0].title):this.$titleBar.replaceChild(this.renderTitles(),this.$titleBar.firstElementChild))}renderTitles(){this.$titles=document.createElement("div"),this.$titles.className=this.wrapClassName("titles"),this.$titles.addEventListener("wheel",i=>{i.currentTarget.scrollBy({left:i.deltaY>0?250:-250,behavior:"smooth"})},{passive:!1});const t=document.createElement("div");return t.className=this.wrapClassName("titles-content"),this.$titles.appendChild(t),this.boxes.forEach(i=>{const n=document.createElement("button");n.className=this.wrapClassName("titles-tab"),n.textContent=i.title,n.dataset.teleBoxID=i.id,n.dataset.teleTitleBarNoDblClick="true",this.focusedBox&&i.id===this.focusedBox.id&&n.classList.add(this.wrapClassName("titles-tab-focus")),t.appendChild(n)}),this.$titles}}class Ov{constructor({root:t=document.body,prefersColorScheme:i=es.Light,minimized:n=!1,maximized:r=!1,fence:s=!0,containerRect:a={x:0,y:0,width:window.innerWidth,height:window.innerHeight},collector:o,namespace:l="telebox",readonly:u=!1}={}){this.events=new Oa,this._sideEffect=new qr;const{combine:h,createVal:c}=uh(this._sideEffect);this.root=t,this.namespace=l,this.boxes$=c([]),this.topBox$=this.boxes$.derive(C=>{if(C.length>0)return C.reduce((N,j)=>N.zIndex>j.zIndex?N:j)});const m=window.matchMedia("(prefers-color-scheme: dark)"),v=c(!1);m&&(v.setValue(m.matches),this._sideEffect.add(()=>{const C=_=>{v.setValue(_.matches)};return m.addListener(C),()=>m.removeListener(C)}));const y=c(i);y.reaction((C,_,N)=>{this.boxes.forEach(j=>j.setPrefersColorScheme(C,N)),N||this.events.emit(oe.PrefersColorScheme,C)}),this._darkMode$=h([v,y],([C,_])=>_==="auto"?C:_==="dark"),this._darkMode$.reaction((C,_,N)=>{this.boxes.forEach(j=>j.setDarkMode(C,N)),N||this.events.emit(oe.DarkMode,C)});const S=c(u);S.reaction((C,_,N)=>{this.boxes.forEach(j=>j.setReadonly(C,N))});const d=c(n),p=c(r);p.reaction((C,_,N)=>{this.boxes.forEach(j=>j.setMaximized(C,N)),N||this.events.emit(oe.Maximized,C)});const f=h([d,p],([C,_])=>C?ie.Minimized:_?ie.Maximized:ie.Normal);f.reaction((C,_,N)=>{this.maxTitleBar.setState(C),N||this.events.emit(oe.State,C)});const g=c(s);g.subscribe((C,_,N)=>{this.boxes.forEach(j=>j.setFence(C,N))});const w=c(a,at);w.reaction((C,_,N)=>{this.boxes.forEach(j=>j.setContainerRect(C,N)),this.maxTitleBar.setContainerRect(C)});const x=c(o===null?null:o||new dh({visible:n,readonly:u,namespace:l}).mount(t));x.subscribe(C=>{C&&(C.setVisible(d.value),C.setReadonly(S.value),C.setDarkMode(this._darkMode$.value),this._sideEffect.add(()=>(C.onClick=()=>{S.value||d.setValue(!1)},()=>C.destroy()),"collect-onClick"))}),S.subscribe(C=>{var _;return(_=x.value)==null?void 0:_.setReadonly(C)}),this._darkMode$.subscribe(C=>{var _;(_=x.value)==null||_.setDarkMode(C)});const b=()=>{var C;if((C=x.value)!=null&&C.$collector){const{x:_,y:N,width:j,height:Q}=x.value.$collector.getBoundingClientRect(),fe=this.root.getBoundingClientRect();return{x:_-fe.x,y:N-fe.y,width:j,height:Q}}},T=c(d.value?b():void 0);T.subscribe((C,_,N)=>{this.boxes.forEach(j=>{j.setCollectorRect(C,N)})}),d.subscribe((C,_,N)=>{var j,Q;(j=x.value)==null||j.setVisible(C),C&&(Q=x.value)!=null&&Q.$collector&&T.setValue(b()),this.boxes.forEach(fe=>fe.setMinimized(C,N)),N||this.events.emit(oe.Minimized,C)});const L=this.wrapClassName("titlebar-icon-close"),k=C=>{var _;if(S.value)return;const N=C.target;if(!!N.tagName)for(let j=N;j;j=j.parentElement){if(j.classList&&j.classList.contains(L))return;const Q=(_=j.dataset)==null?void 0:_.teleBoxID;if(Q){const fe=this.getBox(Q);if(fe){this.focusBox(fe),this.makeBoxTop(fe);return}}}};this._sideEffect.addEventListener(window,"mousedown",k,!0),this._sideEffect.addEventListener(window,"touchstart",k,!0),this.maxTitleBar=new _v({darkMode:this.darkMode,readonly:S.value,namespace:this.namespace,state:f.value,boxes:this.boxes$.value,containerRect:w.value,onEvent:C=>{switch(C.type){case Me.Maximize:{p.setValue(!p.value);break}case Me.Minimize:{d.setValue(!0);break}case le.Close:{this.removeTopBox(),this.focusTopBox();break}}}}),S.subscribe(C=>this.maxTitleBar.setReadonly(C)),this._darkMode$.subscribe(C=>{this.maxTitleBar.setDarkMode(C)}),this.boxes$.reaction(C=>{this.maxTitleBar.setBoxes(C)}),lh(this,{prefersColorScheme:y,containerRect:w,collector:x,collectorRect:T,readonly:S,fence:g,minimized:d,maximized:p}),this._state$=f,this.root.appendChild(this.maxTitleBar.render())}get boxes(){return this.boxes$.value}get topBox(){return this.topBox$.value}get darkMode(){return this._darkMode$.value}get state(){return this._state$.value}setState(t,i=!1){switch(t){case ie.Maximized:{this.setMinimized(!1,i),this.setMaximized(!0,i);break}case ie.Minimized:{this.setMinimized(!0,i),this.setMaximized(!1,i);break}default:{this.setMinimized(!1,i),this.setMaximized(!1,i);break}}return this}create(t={},i=!0){const n=new jv(Tu(Eu({zIndex:this.topBox?this.topBox.zIndex+1:100},i?this.smartPosition(t):t),{darkMode:this.darkMode,prefersColorScheme:this.prefersColorScheme,maximized:this.maximized,minimized:this.minimized,fence:this.fence,namespace:this.namespace,containerRect:this.containerRect,readonly:this.readonly,collectorRect:this.collectorRect}));return n.mount(this.root),n.focus&&(this.focusBox(n),i&&this.makeBoxTop(n)),this.boxes$.setValue([...this.boxes,n]),n._delegateEvents.on(Me.Maximize,()=>{this.setMaximized(!this.maximized)}),n._delegateEvents.on(Me.Minimize,()=>{this.setMinimized(!0)}),n._delegateEvents.on(Me.Close,()=>{this.remove(n),this.focusTopBox()}),n._coord$.reaction((r,s,a)=>{a||this.events.emit(oe.Move,n)}),n._size$.reaction((r,s,a)=>{a||this.events.emit(oe.Resize,n)}),n._intrinsicCoord$.reaction((r,s,a)=>{a||this.events.emit(oe.IntrinsicMove,n)}),n._intrinsicSize$.reaction((r,s,a)=>{a||this.events.emit(oe.IntrinsicResize,n)}),n._visualSize$.reaction((r,s,a)=>{a||this.events.emit(oe.VisualResize,n)}),n._zIndex$.reaction((r,s,a)=>{if(this.boxes.length>0){const o=this.boxes.reduce((l,u)=>l.zIndex>u.zIndex?l:u);this.topBox$.setValue(o)}a||this.events.emit(oe.ZIndex,n)}),this.events.emit(oe.Created,n),n}query(t){return t?this.boxes.filter(this.teleBoxMatcher(t)):[...this.boxes]}queryOne(t){return t?this.boxes.find(this.teleBoxMatcher(t)):this.boxes[0]}update(t,i,n=!1){const r=this.boxes.find(s=>s.id===t);if(r)return this.updateBox(r,i,n)}updateAll(t,i=!1){this.boxes.forEach(n=>{this.updateBox(n,t,i)})}remove(t,i=!1){const n=this.getBoxIndex(t);if(n>=0){const r=this.boxes.slice(),s=r.splice(n,1);return this.boxes$.setValue(r),s.forEach(a=>a.destroy()),i||(this.boxes.length<=0&&(this.setMaximized(!1),this.setMinimized(!1)),this.events.emit(oe.Removed,s)),s[0]}}removeTopBox(){if(this.topBox)return this.remove(this.topBox)}removeAll(t=!1){const i=this.boxes$.value;return this.boxes$.setValue([]),i.forEach(n=>n.destroy()),t||(this.boxes.length<=0&&(this.setMaximized(!1),this.setMinimized(!1)),this.events.emit(oe.Removed,i)),i}destroy(t=!1){this.events.removeAllListeners(),this._sideEffect.flushAll(),this.removeAll(t),Object.keys(this).forEach(i=>{const n=this[i];n instanceof Jn&&n.destroy()})}wrapClassName(t){return`${this.namespace}-${t}`}focusBox(t,i=!1){const n=this.getBox(t);n&&(this.boxes.forEach(r=>{if(n===r){let s=!1;n.focus||(s=!0,n.setFocus(!0,i)),s&&!i&&this.events.emit(oe.Focused,n)}else r.focus&&this.blurBox(r,i)}),this.maxTitleBar.focusBox(n))}focusTopBox(){if(this.topBox&&!this.topBox.focus)return this.focusBox(this.topBox)}blurBox(t,i=!1){const n=this.getBox(t);n&&(n.focus&&(n.setFocus(!1,i),i||this.events.emit(oe.Blurred,n)),this.maxTitleBar.focusedBox===n&&this.maxTitleBar.focusBox())}blurAll(t=!1){this.boxes.forEach(i=>{i.focus&&(i.setFocus(!1,t),t||this.events.emit(oe.Blurred,i))}),this.maxTitleBar.focusedBox&&this.maxTitleBar.focusBox()}teleBoxMatcher(t){const i=Object.keys(t);return n=>i.every(r=>t[r]===n[r])}updateBox(t,i,n=!1){(i.x!=null||i.y!=null)&&t.move(i.x==null?t.intrinsicX:i.x,i.y==null?t.intrinsicY:i.y,n),(i.width!=null||i.height!=null)&&t.resize(i.width==null?t.intrinsicWidth:i.width,i.height==null?t.intrinsicHeight:i.height,n),i.title!=null&&(t.setTitle(i.title),this.maxTitleBar.updateTitles()),i.visible!=null&&t.setVisible(i.visible,n),i.minHeight!=null&&t.setMinHeight(i.minHeight,n),i.minWidth!=null&&t.setMinWidth(i.minWidth,n),i.resizable!=null&&t.setResizable(i.resizable,n),i.draggable!=null&&t.setDraggable(i.draggable,n),i.fixRatio!=null&&t.setFixRatio(i.fixRatio,n),i.zIndex!=null&&t.setZIndex(i.zIndex,n),i.content!=null&&t.mountContent(i.content),i.footer!=null&&t.mountFooter(i.footer)}smartPosition(t={}){let{x:i,y:n}=t;const{width:r=.5,height:s=.5}=t;if(i==null){let a=20;this.topBox&&(a=this.topBox.intrinsicX*this.containerRect.width+20,a>this.containerRect.width-r*this.containerRect.width&&(a=20)),i=a/this.containerRect.width}if(n==null){let a=20;this.topBox&&(a=this.topBox.intrinsicY*this.containerRect.height+20,a>this.containerRect.height-s*this.containerRect.height&&(a=20)),n=a/this.containerRect.height}return Tu(Eu({},t),{x:i,y:n,width:r,height:s})}makeBoxTop(t,i=!1){this.topBox&&t!==this.topBox&&t.setZIndex(this.topBox.zIndex+1,i)}getBoxIndex(t){return typeof t=="string"?this.boxes.findIndex(i=>i.id===t):this.boxes.findIndex(i=>i===t)}getBox(t){return typeof t=="string"?this.boxes.find(i=>i.id===t):t}}const Vv=(e,t,i,n,r)=>new Uv({safeSetAttributes:s=>e.safeSetAttributes(s),getMainView:()=>e.mainView,updateAppState:(...s)=>{var a;return(a=e.appManager)==null?void 0:a.store.updateAppState(...s)},canOperate:()=>e.canOperate,notifyContainerRectUpdate:s=>{var a;return(a=e.appManager)==null?void 0:a.notifyContainerRectUpdate(s)},cleanFocus:()=>{var s;return(s=e.appManager)==null?void 0:s.store.cleanFocus()},setAppFocus:s=>{var a;return(a=e.appManager)==null?void 0:a.store.setAppFocus(s,!0)},callbacks:t,emitter:i,boxEmitter:n},r);class Uv{constructor(t,i){this.context=t,this.createTeleBoxManagerConfig=i;const{emitter:n,callbacks:r,boxEmitter:s}=t;this.teleBoxManager=this.setupBoxManager(i),this.teleBoxManager._state$.reaction(a=>{r.emit("boxStateChange",a),n.emit("boxStateChange",a)}),this.teleBoxManager._darkMode$.reaction(a=>{r.emit("darkModeChange",a)}),this.teleBoxManager._prefersColorScheme$.reaction(a=>{r.emit("prefersColorSchemeChange",a)}),this.teleBoxManager._minimized$.reaction(a=>{a||setTimeout(()=>{const o=.001*(Math.random()>.5?1:-1);this.teleBoxManager.boxes.forEach(l=>{l.resize(l.intrinsicWidth+o,l.intrinsicHeight+o,!0)})},400)}),this.teleBoxManager.events.on("minimized",a=>{if(this.context.safeSetAttributes({minimized:a}),a)this.context.cleanFocus(),this.blurAllBox();else{const o=this.getTopBox();o&&(this.context.setAppFocus(o.id),this.focusBox({appId:o.id},!1))}}),this.teleBoxManager.events.on("maximized",a=>{this.context.safeSetAttributes({maximized:a})}),this.teleBoxManager.events.on("removed",a=>{a.forEach(o=>{s.emit("close",{appId:o.id})})}),this.teleBoxManager.events.on("intrinsic_move",E.debounce(a=>{s.emit("move",{appId:a.id,x:a.intrinsicX,y:a.intrinsicY})},50)),this.teleBoxManager.events.on("intrinsic_resize",E.debounce(a=>{s.emit("resize",{appId:a.id,width:a.intrinsicWidth,height:a.intrinsicHeight})},200)),this.teleBoxManager.events.on("focused",a=>{a&&(this.canOperate?s.emit("focus",{appId:a.id}):this.teleBoxManager.blurBox(a.id))}),this.teleBoxManager.events.on("z_index",a=>{this.context.updateAppState(a.id,Ae.ZIndex,a.zIndex)}),n.on("playgroundSizeChange",()=>this.updateManagerRect()),n.on("updateManagerRect",()=>this.updateManagerRect())}get mainView(){return this.context.getMainView()}get canOperate(){return this.context.canOperate()}get boxState(){return this.teleBoxManager.state}get maximized(){return this.teleBoxManager.maximized}get minimized(){return this.teleBoxManager.minimized}get darkMode(){return this.teleBoxManager.darkMode}get prefersColorScheme(){return this.teleBoxManager.prefersColorScheme}get boxSize(){return this.teleBoxManager.boxes.length}createBox(t){var u,h,c;if(!this.teleBoxManager)return;let{minwidth:i=Mg,minheight:n=Cg}=(u=t.app.config)!=null?u:{};const{width:r,height:s}=(h=t.app.config)!=null?h:{},a=((c=t.options)==null?void 0:c.title)||t.appId,o=this.teleBoxManager.containerRect;i>1&&(i=i/o.width),n>1&&(n=n/o.height);const l={title:a,minWidth:i,minHeight:n,width:r,height:s,id:t.appId};this.teleBoxManager.create(l,t.smartPosition),this.context.emitter.emit(`${t.appId}${J.WindowCreated}`)}setBoxInitState(t){const i=this.teleBoxManager.queryOne({id:t});i&&i.state===ie.Maximized&&this.context.boxEmitter.emit("resize",{appId:t,x:i.x,y:i.y,width:i.intrinsicWidth,height:i.intrinsicHeight})}setupBoxManager(t){const i=re.wrapper?re.wrapper:document.body,n=i.getBoundingClientRect(),r={root:i,containerRect:{x:0,y:0,width:n.width,height:n.height},fence:!1,prefersColorScheme:t==null?void 0:t.prefersColorScheme},s=new Ov(r);this.teleBoxManager&&this.teleBoxManager.destroy(),this.teleBoxManager=s;const a=(t==null?void 0:t.collectorContainer)||re.wrapper;return a&&this.setCollectorContainer(a),s}setCollectorContainer(t){var n;const i=new dh({styles:(n=this.createTeleBoxManagerConfig)==null?void 0:n.collectorStyles}).mount(t);this.teleBoxManager.setCollector(i)}getBox(t){return this.teleBoxManager.queryOne({id:t})}closeBox(t,i=!1){return this.teleBoxManager.remove(t,i)}boxIsFocus(t){const i=this.getBox(t);return i==null?void 0:i.focus}getFocusBox(){return this.teleBoxManager.query({focus:!0})[0]}getTopBox(){return this.teleBoxManager.topBox}updateBoxState(t){if(!t)return;const i=this.getBox(t.id);i&&(this.teleBoxManager.update(i.id,{x:t.x,y:t.y,width:t.width||.5,height:t.height||.5,zIndex:t.zIndex},!0),setTimeout(()=>{t.focus&&this.teleBoxManager.focusBox(i.id,!0),t.maximized!=null&&this.teleBoxManager.setMaximized(Boolean(t.maximized),!0),t.minimized!=null&&this.teleBoxManager.setMinimized(Boolean(t.minimized),!0)},50),this.context.callbacks.emit("boxStateChange",this.teleBoxManager.state))}updateManagerRect(){var i;const t=(i=this.mainView.divElement)==null?void 0:i.getBoundingClientRect();if(t&&t.width>0&&t.height>0){const n={x:0,y:0,width:t.width,height:t.height};this.teleBoxManager.setContainerRect(n),this.context.notifyContainerRectUpdate(this.teleBoxManager.containerRect)}}moveBox({appId:t,x:i,y:n}){this.teleBoxManager.update(t,{x:i,y:n},!0)}focusBox({appId:t},i=!0){this.teleBoxManager.focusBox(t,i)}resizeBox({appId:t,width:i,height:n,skipUpdate:r}){this.teleBoxManager.update(t,{width:i,height:n},r)}setBoxMinSize(t){this.teleBoxManager.update(t.appId,{minWidth:t.minWidth,minHeight:t.minHeight},!0)}setBoxTitle(t){this.teleBoxManager.update(t.appId,{title:t.title},!0)}blurAllBox(){this.teleBoxManager.blurAll()}updateAll(t){this.teleBoxManager.updateAll(t)}setMaximized(t,i=!0){t!==this.maximized&&this.teleBoxManager.setMaximized(t,i)}setMinimized(t,i=!0){this.teleBoxManager.setMinimized(t,i)}focusTopBox(){if(this.teleBoxManager.query().length>=1){const i=this.getTopBox();i&&this.focusBox({appId:i.id},!1)}}updateBox(t,i,n=!0){this.teleBoxManager.update(t,i,n)}setReadonly(t){this.teleBoxManager.setReadonly(t)}setPrefersColorScheme(t){this.teleBoxManager.setPrefersColorScheme(t)}setZIndex(t,i,n=!0){this.teleBoxManager.update(t,{zIndex:i},n)}destroy(){this.teleBoxManager.destroy()}}function ts(){}function hh(e){return e()}function _u(){return Object.create(null)}function zs(e){e.forEach(hh)}function Wv(e){return typeof e=="function"}function Hv(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let gr;function is(e,t){return gr||(gr=document.createElement("a")),gr.href=t,e===gr.href}function $v(e){return Object.keys(e).length===0}function St(e,t){e.appendChild(t)}function Ls(e,t,i){e.insertBefore(t,i||null)}function Kn(e){e.parentNode.removeChild(e)}function Ot(e){return document.createElement(e)}function ol(e){return document.createTextNode(e)}function Fa(){return ol(" ")}function de(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function Fv(e){return Array.from(e.childNodes)}function ph(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ve(e,t,i,n){i===null?e.style.removeProperty(t):e.style.setProperty(t,i,n?"important":"")}let ll;function In(e){ll=e}const gn=[],Ou=[],Rr=[],Vu=[],Qv=Promise.resolve();let Qa=!1;function Zv(){Qa||(Qa=!0,Qv.then(fh))}function Za(e){Rr.push(e)}const ha=new Set;let mr=0;function fh(){const e=ll;do{for(;mr<gn.length;){const t=gn[mr];mr++,In(t),Yv(t.$$)}for(In(null),gn.length=0,mr=0;Ou.length;)Ou.pop()();for(let t=0;t<Rr.length;t+=1){const i=Rr[t];ha.has(i)||(ha.add(i),i())}Rr.length=0}while(gn.length);for(;Vu.length;)Vu.pop()();Qa=!1,ha.clear(),In(e)}function Yv(e){if(e.fragment!==null){e.update(),zs(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Za)}}const Gv=new Set;function Xv(e,t){e&&e.i&&(Gv.delete(e),e.i(t))}function Jv(e,t,i,n){const{fragment:r,on_mount:s,on_destroy:a,after_update:o}=e.$$;r&&r.m(t,i),n||Za(()=>{const l=s.map(hh).filter(Wv);a?a.push(...l):zs(l),e.$$.on_mount=[]}),o.forEach(Za)}function Kv(e,t){const i=e.$$;i.fragment!==null&&(zs(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function qv(e,t){e.$$.dirty[0]===-1&&(gn.push(e),Zv(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ew(e,t,i,n,r,s,a,o=[-1]){const l=ll;In(e);const u=e.$$={fragment:null,ctx:null,props:s,update:ts,not_equal:r,bound:_u(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:_u(),dirty:o,skip_bound:!1,root:t.target||l.$$.root};a&&a(u.root);let h=!1;if(u.ctx=i?i(e,t.props||{},(c,m,...v)=>{const y=v.length?v[0]:m;return u.ctx&&r(u.ctx[c],u.ctx[c]=y)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](y),h&&qv(e,c)),m}):[],u.update(),h=!0,zs(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const c=Fv(t.target);u.fragment&&u.fragment.l(c),c.forEach(Kn)}else u.fragment&&u.fragment.c();t.intro&&Xv(e.$$.fragment),Jv(e,t.target,t.anchor,t.customElement),fh()}In(l)}class tw{$destroy(){Kv(this,1),this.$destroy=ts}$on(t,i){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(i),()=>{const r=n.indexOf(i);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!$v(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Uu(e){let t,i,n,r,s,a,o,l=e[16]&&Wu(e),u=e[17]&&Hu(e);return{c(){t=Ot("div"),i=Ot("div"),l&&l.c(),n=Fa(),r=Ot("span"),s=ol(e[0]),a=Fa(),u&&u.c(),ve(r,"overflow","hidden"),ve(r,"white-space","nowrap"),ve(r,"text-overflow","ellipsis"),ve(r,"max-width","80px"),de(i,"class",e[8]),ve(i,"background-color",e[2]),ve(i,"color",e[9]),ve(i,"opacity",e[11]),de(t,"class",o="netless-window-manager-cursor-name "+e[14]+" "+e[13])},m(h,c){Ls(h,t,c),St(t,i),l&&l.m(i,null),St(i,n),St(i,r),St(r,s),St(i,a),u&&u.m(i,null)},p(h,c){h[16]?l?l.p(h,c):(l=Wu(h),l.c(),l.m(i,n)):l&&(l.d(1),l=null),c&1&&ph(s,h[0]),h[17]?u?u.p(h,c):(u=Hu(h),u.c(),u.m(i,null)):u&&(u.d(1),u=null),c&256&&de(i,"class",h[8]),c&4&&ve(i,"background-color",h[2]),c&512&&ve(i,"color",h[9]),c&2048&&ve(i,"opacity",h[11]),c&24576&&o!==(o="netless-window-manager-cursor-name "+h[14]+" "+h[13])&&de(t,"class",o)},d(h){h&&Kn(t),l&&l.d(),u&&u.d()}}}function Wu(e){let t,i;return{c(){t=Ot("img"),de(t,"class","netless-window-manager-cursor-selector-avatar"),de(t,"style",e[18]()),is(t.src,i=e[7])||de(t,"src",i),de(t,"alt","avatar")},m(n,r){Ls(n,t,r)},p(n,r){r&128&&!is(t.src,i=n[7])&&de(t,"src",i)},d(n){n&&Kn(t)}}}function Hu(e){let t,i;return{c(){t=Ot("span"),i=ol(e[1]),de(t,"class","netless-window-manager-cursor-tag-name"),ve(t,"background-color",e[10])},m(n,r){Ls(n,t,r),St(t,i)},p(n,r){r&2&&ph(i,n[1]),r&1024&&ve(t,"background-color",n[10])},d(n){n&&Kn(t)}}}function iw(e){let t,i,n,r,s,a,o=!e[12]&&Uu(e);return{c(){t=Ot("div"),o&&o.c(),i=Fa(),n=Ot("div"),r=Ot("img"),de(r,"class",s="netless-window-manager-cursor-"+e[3]+"-image "+e[13]),is(r.src,a=e[6])||de(r,"src",a),de(r,"alt",e[3]),de(n,"class","cursor-image-wrapper"),de(t,"class","netless-window-manager-cursor-mid"),ve(t,"transform","translateX("+e[4]+"px) translateY("+e[5]+"px)"),ve(t,"display",e[15])},m(l,u){Ls(l,t,u),o&&o.m(t,null),St(t,i),St(t,n),St(n,r)},p(l,[u]){l[12]?o&&(o.d(1),o=null):o?o.p(l,u):(o=Uu(l),o.c(),o.m(t,i)),u&8200&&s!==(s="netless-window-manager-cursor-"+l[3]+"-image "+l[13])&&de(r,"class",s),u&64&&!is(r.src,a=l[6])&&de(r,"src",a),u&8&&de(r,"alt",l[3]),u&48&&ve(t,"transform","translateX("+l[4]+"px) translateY("+l[5]+"px)"),u&32768&&ve(t,"display",l[15])},i:ts,o:ts,d(l){l&&Kn(t),o&&o.d()}}}function nw(e,t,i){let n,r,s,a,o,l,u,h,{cursorName:c}=t,{tagName:m}=t,{backgroundColor:v}=t,{appliance:y}=t,{x:S}=t,{y:d}=t,{src:p}=t,{visible:f}=t,{avatar:g}=t,{theme:w}=t,{color:x}=t,{cursorTagBackgroundColor:b}=t,{opacity:T}=t,{pencilEraserSize:L}=t;const k=()=>Object.entries({width:(n?19:28)+"px",height:(n?19:28)+"px",position:n?"initial":"absolute","border-color":n?"white":v,"margin-right":(n?4:0)+"px"}).map(([R,C])=>`${R}: ${C}`).join(";");return e.$$set=R=>{"cursorName"in R&&i(0,c=R.cursorName),"tagName"in R&&i(1,m=R.tagName),"backgroundColor"in R&&i(2,v=R.backgroundColor),"appliance"in R&&i(3,y=R.appliance),"x"in R&&i(4,S=R.x),"y"in R&&i(5,d=R.y),"src"in R&&i(6,p=R.src),"visible"in R&&i(19,f=R.visible),"avatar"in R&&i(7,g=R.avatar),"theme"in R&&i(8,w=R.theme),"color"in R&&i(9,x=R.color),"cursorTagBackgroundColor"in R&&i(10,b=R.cursorTagBackgroundColor),"opacity"in R&&i(11,T=R.opacity),"pencilEraserSize"in R&&i(20,L=R.pencilEraserSize)},e.$$.update=()=>{e.$$.dirty&1&&(n=!E.isEmpty(c)),e.$$.dirty&2&&i(17,r=!E.isEmpty(m)),e.$$.dirty&128&&i(16,s=!E.isEmpty(g)),e.$$.dirty&524288&&i(15,a=f?"initial":"none"),e.$$.dirty&8&&i(12,o=y===A.ApplianceNames.laserPointer),e.$$.dirty&4104&&i(21,l=o||y===A.ApplianceNames.pencilEraser),e.$$.dirty&2097152&&i(14,u=l?"netless-window-manager-laserPointer-pencilEraser-offset":""),e.$$.dirty&1048576&&i(13,h=L===3?"netless-window-manager-pencilEraser-3-offset":"")},[c,m,v,y,S,d,p,g,w,x,b,T,o,h,u,a,s,r,k,f,L,l]}class rw extends tw{constructor(t){super();ew(this,t,nw,iw,Hv,{cursorName:0,tagName:1,backgroundColor:2,appliance:3,x:4,y:5,src:6,visible:19,avatar:7,theme:8,color:9,cursorTagBackgroundColor:10,opacity:11,pencilEraserSize:20})}}class sw{constructor(t,i,n,r){this.manager=t,this.memberId=i,this.cursorManager=n,this.wrapper=r,this.move=s=>{var a;if(s.type==="main"){const o=this.cursorManager.wrapperRect;this.component&&o&&(this.autoHidden(),this.moveCursor(s,o,this.manager.mainView))}else{const o=this.cursorManager.focusView,l=(a=o==null?void 0:o.divElement)==null?void 0:a.getBoundingClientRect(),u=o==null?void 0:o.camera;o&&l&&u&&this.component&&(this.autoHidden(),this.moveCursor(s,l,o))}},this.leave=()=>{this.hide()},this.updateMember(),this.createCursor(),this.autoHidden()}moveCursor(t,i,n){var l,u;const{x:r,y:s,type:a}=t,o=n==null?void 0:n.screen.convertPointToScreen(r,s);if(o){let h=o.x-2,c=o.y-18;if(a==="app"){const m=this.cursorManager.wrapperRect;m&&(h=h+i.x-m.x,c=c+i.y-m.y)}o.x<0||o.x>i.width||o.y<0||o.y>i.height?(l=this.component)==null||l.$set({visible:!1,x:h,y:c}):(u=this.component)==null||u.$set({visible:!0,x:h,y:c})}}get memberApplianceName(){var t,i;return(i=(t=this.member)==null?void 0:t.memberState)==null?void 0:i.currentApplianceName}get memberColor(){var i,n;return`rgb(${(n=(i=this.member)==null?void 0:i.memberState)==null?void 0:n.strokeColor.join(",")})`}get payload(){var t;return(t=this.member)==null?void 0:t.payload}get memberCursorName(){var t,i;return((t=this.payload)==null?void 0:t.nickName)||((i=this.payload)==null?void 0:i.cursorName)||this.memberId}get memberTheme(){var t;return(t=this.payload)!=null&&t.theme?"netless-window-manager-cursor-inner-mellow":"netless-window-manager-cursor-inner"}get memberCursorTextColor(){var t;return((t=this.payload)==null?void 0:t.cursorTextColor)||"#FFFFFF"}get memberCursorTagBackgroundColor(){var t;return((t=this.payload)==null?void 0:t.cursorTagBackgroundColor)||this.memberColor}get memberAvatar(){var t;return(t=this.payload)==null?void 0:t.avatar}get memberOpacity(){return!this.memberCursorName&&!this.memberAvatar?0:1}get memberTagName(){var t;return(t=this.payload)==null?void 0:t.cursorTagName}autoHidden(){this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.hide()},1e3*10)}async createCursor(){this.member&&this.wrapper&&(this.component=new rw({target:this.wrapper,props:this.initProps()}))}initProps(){var t;return{x:0,y:0,appliance:this.memberApplianceName,avatar:this.memberAvatar,src:this.getIcon(),visible:!1,backgroundColor:this.memberColor,cursorName:this.memberCursorName,theme:this.memberTheme,color:this.memberCursorTextColor,cursorTagBackgroundColor:this.memberCursorTagBackgroundColor,opacity:this.memberOpacity,tagName:this.memberTagName,pencilEraserSize:(t=this.member)==null?void 0:t.memberState.pencilEraserSize}}getIcon(){var t;if(this.member){const i=this.cursorManager.applianceIcons;let n=i[A.ApplianceNames.shape];if(this.memberApplianceName===A.ApplianceNames.pencilEraser){const r=((t=this.member)==null?void 0:t.memberState.pencilEraserSize)||1;n=i[`${this.memberApplianceName}${r}`]}else n=i[this.memberApplianceName||A.ApplianceNames.shape];return n||i[A.ApplianceNames.shape]}}updateMember(){return this.member=Ra(this.manager.room,this.memberId),this.updateComponent(),this.member}updateComponent(){var t;(t=this.component)==null||t.$set(E.omit(this.initProps(),["x","y"]))}destroy(){this.component&&this.component.$destroy(),this.cursorManager.cursorInstances.delete(this.memberId),this.timer&&clearTimeout(this.timer)}hide(){this.component&&(this.component.$set({visible:!1}),this.destroy())}}var aw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYISURBVHgB7ZpNSCtXFIBPEuvz+dMGpYUKD/sWFX+Qti6kK7Hqpm6e9q0rIoIUFUShPLV10VZx4+JZqa9v20LBhdq9fyBUCtKNPH8qYl2IOw3G38Rkek4y15y5uTOZJDOWggcOSSYzN/ebc+45554JwIM8iBCPyTEP+86T4vyMfsRN4b+nQTKIJp0vzuGvlpID7os8EQNEIBD4oKio6Bm9DwaDv/v9/n/076JgbtWUYPchwrW8qD7UnOvr6wFNkpubm+/wu7f0c7y6mrnlvQufxB0Iau7V1dX3BDA/P6/V1dVpzc3N2uLiIofK1c8VYHys/wRKBUN3/hGHqaysNOjc3FwMis6hc0FtLTHuvYLxCCZgci8uLn4wg5Gh6Fy8Jk+/NkcCAlAAuUkoW4g0B+d5tLS05O/r67O8eGxsDNra2uDy8nKsoKCAwCIQDxQa0yTxgrvCYXyTk5Ml+Orf2dlJeeHIyAigFSE/P38ELfUNqNdSkjgF5FF89jL1TU1NlQwODl5gZPujp6cHWltbUw7Koc7Pz8mkZpHPFeFrJuZeqLnoMoPoZqe0JjDP/IZgnyLUG/o8NDRkuo5Ua2pjY6MC4oFCFf1cA0oKzRSOp6enRfTaGh0d/QxBt+1CUVgnOTs7+xrHfQzGyOcKkK3QTJMnQffZ6e/v/xwttmsHqqmpKXbdycnJCxy7ABLh3FEgVZ6hZJhnFZoFFMF0d3c/w7v+dyookXBnZ2c/xvHfhriVcvXfdBRItsxjnOhYqjwjoAimq6vrCysoGofk+Ph4Esd/F/UdiFtJAGUd2DygTpp5dmBUUJ2dnc9VUALm8PDwJY7/BPU9VD8k3M4RC6kskxZMKigKIMLN9vf3p3H8DyWgfEhEOwOQD9IXOTz7EObbwsLC4YWFBRgeHrY9ECXYo6MjaGlpKWlsbPxkYGDgRW1tbSEWquVlZWXBzc3Nl1VVVa8hXiXc6ioqBqGaPDk7AACJTRZ3NS9lcUp86cJwoSQ7Pj4Op6enfxUXF3/V0NCQv7q6GsCvwrqGUG/01xAD4+VQTOxaSF43d5bBOisrGBJRCtXX17+/trb268rKSgASFgmz97KFkmo6OztWuVyPweiWGc4WRkhFRQVEIpHg8vJyQAIQVlLBROVxvBYQHsXnO8tk62ZcyN0wecLBwcEvYHSzEPscBqOLCRhLC4n9uqaA8UAWAcAKhtbQ3t7eTHl5+Y9gtAp3twhT056CDMQ7MRzIFTeTYKb1yYYVQFH9VdzsqNmYKpfTJBDX3Ixgdnd3XyHMT2AMALJlBBSPaMpNngrIsTyTCgaj288YDGakictrxizvKFNOjgSSBLS+vv6UYHDb7DgMVgsChjTEgCIKGG4ZU+EWkgNBzN1qamq+pAMTExPgFMzW1tZrhHkFyWE5KxgSszx0527RaDRmOSpRshEOU11dPQPG8CwHARHJlMnTSrwSRFIlfXt7m3V5ngJGuJtqzaQtZkFBVNJezN5ZAdmwjKo2k9tVtrcI3OXk4tPgcg7ChCDZ1URgMOu72Xa5VFHOkymQhWVU60YVmjN6wiC7k6p+S1syCACOwJBYFaexV+yhBekNPsMBO6KAEeE4BMaCU67RsoYhSbXgaT//ht709vZCaWmp6YkEbLFmVJWzas04+iBL7EKpm0J7duqu0B7+CTUpNJuyvb1NCfMj1CqI9wLKUOlOUMeG+gGFkHii4HizUF4z/KFUrPsJ8WbEIyx7nnZ0dDynME6BAuce09iFHo+GrnmGltltb2//E4wVAN82y7vOjKOZXSBhJdHNiT3TYWD8OY2PTUJkdd7MkJMnT5wZVQF2RFX6yBMUdzPMvvfqxz3sXHF+GNT9ANXit/10O1sgHkZvdQAOKvs9B5L7ARELGAAXLSTvM8QExTE+YbHe+HURhZp1aRyF4CJXClbbWwGketgkW9VsY+YaiBCVhfgE+XvxRwgZSM4jUVCDZFQ9pytmXR8hUTB2gnidx4XffVWydN0yQjwmx/jkAZJBrIBI5J7ZvQGZWUgVSuU/EqmOAzicKNMVu816DdRWUV1/7xAP8n+SfwF3Du3NF2sYhwAAAABJRU5ErkJggg==",ow="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZoSURBVHgB7VlLSCRXFL3ljNEhEXTGhMQJmOjCz8ZNVLKICz9xIYhCNi7UgINkGEk2En8hW5cBUQNxo05GAoKikuCAmvGzGMdPcCUGjDPxD/4Vv/3JvWW97luvq7ur+hMZ8MKlqrteNfe8e965970GuLVbC5kpJr53+hjHx9yY3TUxJgLMAQG4ITARfp5T4Mri4uL9q6urnxwOxz/oY5eXl1/Pzs7e195X2FX4jZsIhAK7gx5ps9m6nGj9/f3OtbU1pzAE0318fPwVjYHrrN7R3AjU/wpOBwA9Cmf/9ejoqDMtLU31iooKGdA+ATo4OMiXAEWAHhBAGEApXj4rPAik0vPt7e0vCgoKPH4gMzMTSktLIS8vD2JiYgABvcHMTZyennbHxsaOg3udOJmLzwqEYB0ZgRCZENm4u7e39yQuLq65srISZmZmvP5Ybm4u5OfnQ0lJyXWUCAgzNLS+vt6SnJz8WgvYwV5xSlcRgyVg3ha2Dkxzc3MvfZmVlQW+bGxsDBobGyE7O1u94uJPjIqKqklKSvrbbrfPnp+ff7e8vJwMnlSTKWfJjDKhywJo6wLp0YcZ+dyIUr7s4cOHLsrRlQwBTSBFuzc2NiZYhjjVAIyzZBqEwgCQv0OOM/gNzuiP/ijlDxBRjgClpqa6AF1cXDydmpoaLCws3JcAGYHyC4JMzoKaibKysvienp6FtrY2IA/WCFB5ebkqCHSvARo8Ozt7igIxwIJ2gJ+seFMnDoIyEUV+dHT0G3qWVUr5M043DdAB0m2IKZwAYpgZX+qkywR6NFbuR0iDxmAoZRUQKRxSLTMnJ8eIaqqSeVMnIYUOdu+sq6vrp4f+VCoYo8khZaNs01VRlERUu2/BrWAA7sl2Anink1Ao18JGjyY/PDx8hq1GZqgp5c2mp6chMjLy2b179x7hRzvoqeUUwXIzqq4O5nZsNUaEbIbLqPLTou/s7FTvT05OpsA9sXJG1AVsZDwjutqBIN6gUlWjxod8XRBNKXgsrqpqYZfwEqX9h8TExD7wbFm8LmzxHQ0QHSlXKZVSqFC/hkqlaKapTaGgCQTK7PHW1lb/wsLC86KiokkccoV+qV1tcE0pO7AWxmhTxBszDzqRr66ujqanp2cRpQLNBgUsCh8BwQ54bn5+/s+mpqa+4eHhfS1gb52vwuP0trPjhSZCBtLQ0NA3MDDQQIFYAUHBYhuvzjpVbJr1lZWVP3p7e19UVVXNgHumXYrI4uBx6Yqevz02b0FcRQ8CoBQF3dXVpQLZ3d39C7n+ora29vfJyclDYFnWgFyxK3cxhss/+KoT/N6DVkQpKypFGUCp3Ozo6HgSHx//GLW/BwHsg57zl5pzADajwLn52mPL1ZHPloMoRYPMFL6EhAR18e7s7MxVV1fPsAAp4Avteq7dC/c1+wKI4g+EfGzDM+EYHBw8RDrNiA2QL6upqVGvKJ2/gHu2L1nA5wwEB2YDfSYMO1x/px0cgEc2zBY+eo67u6H29vZ/wU2VC8l58JxKNjDOgojNEp08aFVfX++3l6JMEdDx8fEB0FNIBsDXBc8ArwuW1EkeI1RKdLWmCx+1DhkZGRvR0dFfSsHKxYtnW0iqvJAN9xNm6MR/QO5sfapUSkqKmqW5ubmfwVgyZdpw/vPZl2kUEAinBMSUStG+gwra0NDQSynQKyloIxnlewafjDFLJzLRBJqiFMnqyMgIbG5uDuD996Dnv8iAPOMAPmbcm5lVJwA/vZRMKZGZlpaWVtAvUL4GZMqE1fjRJrUd76LHoX+InlhcXPwZnWW2tra6jjrpiBM3UK/weQr6J+gfodMh9HtwncG7YLA3CMSsLmxx5WuDCt8B7vZeicInTjCWlpb6wc15mfey7oc9E8LElpVmMgb9AXoC+qcTExOPKRu4NlTHs6Q10GfhgfYOvRsJQZ76BWMKuDtaolQs+gfoH6Mn436gDg+e+5BKXUQx/C5Je/a+NpbeiQJPKgUdlNXx/BCBKxVdxW5Q0I3XBqFKRhU4KLtjYawi3csuTKdc4FnIXNvKUJkVEGRG20QZAAUpA5DbaYAQLmQzfzxyk/ffdnCD4NWVnGdE7kQBQvQHC5lVEDxgMaM29lkxGCNLKrDnIbFAMkFmBIaDkHstU41coGZ1TZD5UjReCGUAYbNgdNqoXZB/T67yYbFAMiGML3BhYeH8rb0t9h/zgcTBcTNGiQAAAABJRU5ErkJggg==",lw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgrSURBVHgB7ZprTBRXFIDP7gIt8lQppTwE5V0KaAn6o1pqNGkDDTEmTUhsgKRp+gNJw68CFkLbVC2QkDS+gD8KJdWmARvbFBNNWpuIRGPFWBXQRMPDqIki+KLATs+ZnTvcvXtnX8w2beJJToaduTP3fHPOPffcOwC8kP+2WCDwIvahGFxTuN8KmNSZmULPNjLeqF9F8rdPkIEGEn+r+vjx46LQ0NA8/Dsader58+e/h4WFDWntFO7ot6fMFAt3JLWi2lCDpqamCux2+2+KROj82NhYGrXT2lu5Z/DP/deFByElA4Pv3LlTiHY/nJ6eVnbv3q1s2bJFyc7OVrZu3arU1dUp4+PjxPUQoT+g9tp9PkMFgpo9kxljHRoaWp2Xl3duYmIiurKyEvDoclNCQgIcPnxYPc7MzHwcGRnZhaft4Ag7O9fUbRhaITCie4lgcnNzT7qDIaHz27dvh+vXr0NEREQneqoCHKFnAR+8ZCaQGGq2CxcurCGYycnJZHcwTNAzUFFRoUJFRUV1IFQ5OKBsXB9uxSwgl0TQ3d29Yt26dccwoyVXV1d7hGEiQmGi2AzOUHx/hob4K2yuYS9G987s7OwPISEh7xPM6dOnwVfBsIMjR45AZmbmo5s3b76Xnp7+J55egMVxBSAZT0v1ED+76yn66dOnLQSzd+9ev2BIyFP0MjBco1JTU/sxfFeDazp3cYgZHmKqdoaGNISHh9fv378fSJcqlPV6e3sBJ+I/goOD34VFL0k95Y+HxPHCYGxmw5DQ2NuzZw8EBQVtunXr1jvgwUP+hhz/QDXMMCNVE8zx48dNg2FCz6QQjI2N/RA8VBFmANnu3btXihnpG8pM9fX1EAi5du0aeWkVOAMBCF7yN+R0z4yOjq6NiYlpp9CgdBtIwXpPH6vgDKWLt0CygtM6MDCwBuUYZSKaOCksAiVY9wFOBePgDOOytPAGSKzNVCCC2bBhw69YdK7ypgpYimzbtk2dl7CM+hFcveOUHDylbTFO1YdhFbByx44dA1QFUP0VSJj4+Hjo6+sDq9U6iEmHKvFZTedQ50GYbN15SITVlwNlZWUnLRZL8s6dOwMOQ9UCTtKTra2ttdppt9V2kMF5cbmsjxuM43bMNrmUzc6fP6+GQiDGDoOJi4ubwb4qm5ubafyIE6nLxGqTPEsGo1cBOGNX0TyDYafC0CyOaxcVziyh53Z2dkJycvLMvn37PmpoaBgFR4jxYSbWdVIgI89Iq4CjR48CZjlYv369+tssqI6ODsjPz4f+/v668vLycxrEHHfkYdwC8SB6mGEV8Cl64cuuri5oa2tTG+EyGjZu3AiXLl1qefDgwV8lJSUFZkDV1tZCcXExXLx4sbWoqKgPFj0zx8GI9ZwO5W4M6ekZYeqpaqbqmaSqqkpNpcPDw4dwzfM9nrLduHEjEs+X0XV/Sx96LnqE1kLtBQUF3eDwCO8dGQyzV5rl+JyuegfXI29jRotiRlKnpFghHMzKyjqotVXS0tLacKPjF3bdHxjSq1evduAkepAD+ZsDYlC8V5w8ZBVg+PPq2MGMlkInqE4joTf45MmT4YyMjAPcA+ltLSQlJX2BafxnX6HI29QeK44TOTk57mCYZ0QoJ8OBM4yB6dkNkwGlSygsLFQvYtYB3BTMxFL+M+0eFgZqp4mJiU2+QKGX1fGIk/QIrn0aYXGsyDxjmAyMhO2jhaCGoUbX1NSkLSwsPMJqV8Fspu6lIZS6OYhjiOLwdU7fQM1HfRPD7wS1obZ0j0xpb4726Z49ezaJf2/S7s9ATUGNR41BjdJseRnke3WGwhrRTS9pD1mOGoeG15BxOOfoxuCkp0Ih6NeaEaSZGlieJyiCoc1FgsGldokGk8nBvAKOrWIGQ5uPsm0tt0BWDiicAaGuGhkZ+YqMw9StGzU4OKhCnT179hNsswY1FTXdE5QEJhc1S3tGogazXLOBwQSBl3tzIhQPtAL1VQJCTcNx8y1vHIUghSKFZE9PT7H2dlM1b+Wgrr1y5Uq77J75+fnplpaWMg2ch4nlYEI5z7hdensDpI4hrYNErcMMXJ32koG4ztf3pultz83NjWG99Ra2WQ0OL2VjZjwgeufUqVOqV8+cOdPIwdBLSNJeHg8TAh5WqJ6EfSmgt7IMNRJ1JThiOlnrOAMHshprmMKdoGSCpb9s3B3SYLIFGIqICJB7xisYi+RvfiypXw40DWGdlJaWRmMd141hk8V2OWm7ieYTXhBc3+BgaZyqAISjOYxSMVvXsBTNlzdiNQDgRao2AtK3pjggpmrqbGpqSsLPIN/dv38/gaBwUjTshMHcvn27JyUlpRmc5xpPMD599LIYnLNyUKKndKjGxsakXbt2deMCLIE8IVvs0YRM1fjdu3d/wrXN5+BcnzEgvor2uN3rjzAYMp5lPEoQlE5fA0fWo8GfhlCbKVFQ1pKNIfzcOHH58mWqaimVUwJI0+6n59D4pIlzmdZPMPiZzXjDjX47Le5g0Uu8x2zgPqWyKpjVe7x3+AUbq9NYjQbgp2dsBud5o8TP7d5kHAWcQchQfoEmLgn8HjOiBIF7o5hI1x6CEbLNP3bdqYAF44JzyWLzcN1i8DcT/o3awbm8Fz3DAy2A62INwPV/E3wWdx5inmBHuwChCBD6R2JwHge80TIQRQLjt7e8DTkGZgfX8cUMZTDAteFDkveaIlzjX9ySQs8X18r2t2VHUURPKoICmDR+eCO9aSdmOIub3/w9RgpgUpiJhvraXpa6jZKHGEqyusw0GLFzX+5RhN/8kYnMSNMMfyH/V/kHST6OYVElTPAAAAAASUVORK5CYII=",uw="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5zaGFwZS1jdXJzb3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItNjQuNiUiIHk9Ii01OS41JSIgd2lkdGg9IjIyOS4zJSIgaGVpZ2h0PSIyNDYuMSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjEiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd0JsdXJPdXRlcjEiIGluMj0iU291cmNlQWxwaGEiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbXBvc2l0ZT4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMTYgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi00IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iV2hpdGVib2FyZC1HdWlkZWxpbmVzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ0LjAwMDAwMCwgLTc1MS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9InNoYXBlLWN1cnNvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgNzUxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9ouWkh+S7vS00NCIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMC4wMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9IuW9oueKtue7k+WQiCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNMjAsMjEgQzIwLjQ4NTQxMDMsMjEgMjAuODk4MDg1LDIxLjM0Nzk5OTMgMjAuOTg5OTQ3OSwyMS44NjU0ODc3IEwyMSwyMiBMMjEsMjcgQzIxLDI3LjU1MjI4NDcgMjAuNTUyMjg0NywyOCAyMCwyOCBDMTkuNTE0NTg5NywyOCAxOS4xMDE5MTUsMjcuNjUyMDAwNyAxOS4wMTAwNTIxLDI3LjEzNDUxMjMgTDE5LDI3IEwxOSwyMiBDMTksMjEuNDQ3NzE1MyAxOS40NDc3MTUzLDIxIDIwLDIxIFogTTI3LDE5IEMyNy41NTIyODQ3LDE5IDI4LDE5LjQ0NzcxNTMgMjgsMjAgQzI4LDIwLjQ4NTQxMDMgMjcuNjUyMDAwNywyMC44OTgwODUgMjcuMTM0NTEyMywyMC45ODk5NDc5IEwyNywyMSBMMjIsMjEgQzIxLjQ0NzcxNTMsMjEgMjEsMjAuNTUyMjg0NyAyMSwyMCBDMjEsMTkuNTE0NTg5NyAyMS4zNDc5OTkzLDE5LjEwMTkxNSAyMS44NjU0ODc3LDE5LjAxMDA1MjEgTDIyLDE5IEwyNywxOSBaIE0xOCwxOSBDMTguNTUyMjg0NywxOSAxOSwxOS40NDc3MTUzIDE5LDIwIEMxOSwyMC40ODU0MTAzIDE4LjY1MjAwMDcsMjAuODk4MDg1IDE4LjEzNDUxMjMsMjAuOTg5OTQ3OSBMMTgsMjEgTDEzLDIxIEMxMi40NDc3MTUzLDIxIDEyLDIwLjU1MjI4NDcgMTIsMjAgQzEyLDE5LjUxNDU4OTcgMTIuMzQ3OTk5MywxOS4xMDE5MTUgMTIuODY1NDg3NywxOS4wMTAwNTIxIEwxMywxOSBMMTgsMTkgWiBNMjAsMTIgQzIwLjQ4NTQxMDMsMTIgMjAuODk4MDg1LDEyLjM0Nzk5OTMgMjAuOTg5OTQ3OSwxMi44NjU0ODc3IEwyMSwxMyBMMjEsMTggQzIxLDE4LjU1MjI4NDcgMjAuNTUyMjg0NywxOSAyMCwxOSBDMTkuNTE0NTg5NywxOSAxOS4xMDE5MTUsMTguNjUyMDAwNyAxOS4wMTAwNTIxLDE4LjEzNDUxMjMgTDE5LDE4IEwxOSwxMyBDMTksMTIuNDQ3NzE1MyAxOS40NDc3MTUzLDEyIDIwLDEyIFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iI0ZGRkZGRiIgeD0iMTguNSIgeT0iMTciIHdpZHRoPSIzIiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiNGRkZGRkYiIHg9IjE3IiB5PSIxOC41IiB3aWR0aD0iNiIgaGVpZ2h0PSIzIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjMjEyMzI0IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",cw="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDdweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDcgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT50ZXh0LWN1cnNvcjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xNiwyNi41IEMxNS43MjM4NTc2LDI2LjUgMTUuNSwyNi4yNzYxNDI0IDE1LjUsMjYgQzE1LjUsMjUuNzU0NTQwMSAxNS42NzY4NzUyLDI1LjU1MDM5MTYgMTUuOTEwMTI0NCwyNS41MDgwNTU3IEwxNiwyNS41IEwxOS41LDI1LjUgTDE5LjUsMTQuNSBMMTYsMTQuNSBDMTUuNzIzODU3NiwxNC41IDE1LjUsMTQuMjc2MTQyNCAxNS41LDE0IEMxNS41LDEzLjc1NDU0MDEgMTUuNjc2ODc1MiwxMy41NTAzOTE2IDE1LjkxMDEyNDQsMTMuNTA4MDU1NyBMMTYsMTMuNSBMMjQsMTMuNSBDMjQuMjc2MTQyNCwxMy41IDI0LjUsMTMuNzIzODU3NiAyNC41LDE0IEMyNC41LDE0LjI0NTQ1OTkgMjQuMzIzMTI0OCwxNC40NDk2MDg0IDI0LjA4OTg3NTYsMTQuNDkxOTQ0MyBMMjQsMTQuNSBMMjAuNSwxNC41IEwyMC41LDI1LjUgTDI0LDI1LjUgQzI0LjI3NjE0MjQsMjUuNSAyNC41LDI1LjcyMzg1NzYgMjQuNSwyNiBDMjQuNSwyNi4yNDU0NTk5IDI0LjMyMzEyNDgsMjYuNDQ5NjA4NCAyNC4wODk4NzU2LDI2LjQ5MTk0NDMgTDI0LDI2LjUgTDE2LDI2LjUgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTI4NC4wJSIgeT0iLTgxLjUlIiB3aWR0aD0iNjY4LjElIiBoZWlnaHQ9IjI5My45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVNb3JwaG9sb2d5IHJhZGl1cz0iMSIgb3BlcmF0b3I9ImRpbGF0ZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJzaGFkb3dTcHJlYWRPdXRlcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4xNiAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iLTQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJXaGl0ZWJvYXJkLUd1aWRlbGluZXMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODguMDAwMDAwLCAtNjcyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0idGV4dC1jdXJzb3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Mi4wMDAwMDAsIDY3Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaLlpIfku70tNDAiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuMDEiIHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxnIGlkPSLlvaLnirbnu5PlkIgiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMSIgZD0iTTE5LDI1IEwxOSwxNSBMMTYsMTUgQzE1LjQ0NzcxNTMsMTUgMTUsMTQuNTUyMjg0NyAxNSwxNCBDMTUsMTMuNTE0NTg5NyAxNS4zNDc5OTkzLDEzLjEwMTkxNSAxNS44NjU0ODc3LDEzLjAxMDA1MjEgTDE2LDEzIEwyNCwxMyBDMjQuNTUyMjg0NywxMyAyNSwxMy40NDc3MTUzIDI1LDE0IEMyNSwxNC40ODU0MTAzIDI0LjY1MjAwMDcsMTQuODk4MDg1IDI0LjEzNDUxMjMsMTQuOTg5OTQ3OSBMMjQsMTUgTDIxLDE1IEwyMSwyNSBMMjQsMjUgQzI0LjU1MjI4NDcsMjUgMjUsMjUuNDQ3NzE1MyAyNSwyNiBDMjUsMjYuNDg1NDEwMyAyNC42NTIwMDA3LDI2Ljg5ODA4NSAyNC4xMzQ1MTIzLDI2Ljk4OTk0NzkgTDI0LDI3IEwxNiwyNyBDMTUuNDQ3NzE1MywyNyAxNSwyNi41NTIyODQ3IDE1LDI2IEMxNSwyNS41MTQ1ODk3IDE1LjM0Nzk5OTMsMjUuMTAxOTE1IDE1Ljg2NTQ4NzcsMjUuMDEwMDUyMSBMMTYsMjUgTDE5LDI1IFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",dw="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjhweCIgaGVpZ2h0PSIyOHB4IiB2aWV3Qm94PSIwIDAgMjggMjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxmaWx0ZXIgeD0iLTEyMC4wJSIgeT0iLTEyMC4wJSIgd2lkdGg9IjM0MC4wJSIgaGVpZ2h0PSIzNDAuMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNCIgaW49IlNvdXJjZUdyYXBoaWMiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Iue8lue7hC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjAwMDAwMCwgOS4wMDAwMDApIiBmaWxsPSIjRkYwMTAwIj4KICAgICAgICAgICAgPGNpcmNsZSBpZD0i5qSt5ZyG5b2iIiBmaWx0ZXI9InVybCgjZmlsdGVyLTEpIiBjeD0iNSIgY3k9IjUiIHI9IjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8cGF0aCBkPSJNNSw4IEM2LjY1Njg1NDI1LDggOCw2LjY1Njg1NDI1IDgsNSBDOCwzLjM0MzE0NTc1IDYuNjU2ODU0MjUsMiA1LDIgQzMuMzQzMTQ1NzUsMiAyLDMuMzQzMTQ1NzUgMiw1IEMyLDYuNjU2ODU0MjUgMy4zNDMxNDU3NSw4IDUsOCBaIE01LDYuMjg1NzE0MjkgQzQuMjg5OTE5NjEsNi4yODU3MTQyOSAzLjcxNDI4NTcxLDUuNzEwMDgwMzkgMy43MTQyODU3MSw1IEMzLjcxNDI4NTcxLDQuMjg5OTE5NjEgNC4yODk5MTk2MSwzLjcxNDI4NTcxIDUsMy43MTQyODU3MSBDNS43MTAwODAzOSwzLjcxNDI4NTcxIDYuMjg1NzE0MjksNC4yODk5MTk2MSA2LjI4NTcxNDI5LDUgQzYuMjg1NzE0MjksNS43MTAwODAzOSA1LjcxMDA4MDM5LDYuMjg1NzE0MjkgNSw2LjI4NTcxNDI5IFoiIGlkPSLmpK3lnIblvaIiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",hw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAxOCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIxNyIgaGVpZ2h0PSIyNSIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K",pw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMzQiIHZpZXdCb3g9IjAgMCAyNiAzNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIyNSIgaGVpZ2h0PSIzMyIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K",fw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCAzNCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIzMyIgaGVpZ2h0PSI0OSIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K";const $u={[A.ApplianceNames.pencil]:aw,[A.ApplianceNames.selector]:ow,[A.ApplianceNames.eraser]:lw,[A.ApplianceNames.shape]:uw,[A.ApplianceNames.text]:cw,[A.ApplianceNames.laserPointer]:dw,pencilEraser1:hw,pencilEraser2:pw,pencilEraser3:fw};class gw{constructor(t,i,n){var s;this.manager=t,this.enableCursor=i,this.cursorInstances=new Map,this.sideEffectManager=new Gi.SideEffectManager,this.store=this.manager.store,this.applianceIcons=$u,this.onCursorMove=a=>{const o=this.initCursorInstance(a.uid);if(a.state===Sd.Leave)o.leave();else{const l=o.updateMember();this.canMoveCursor(l)&&o.move(a.position)}},this.initCursorInstance=a=>{let o=this.cursorInstances.get(a);return o||(o=new sw(this.manager,a,this,re.wrapper),this.cursorInstances.set(a,o)),o},this.mouseMoveListener_=(a,o)=>{const l=this.getType(a);this.updateCursor(l,a.clientX,a.clientY),o&&this.showPencilEraserIfNeeded(l,a.clientX,a.clientY)},this.mouseMoveTimer=0,this.mouseMoveListener=a=>{const o=a.pointerType==="touch";if(o&&!a.isPrimary)return;const l=Date.now();l-this.mouseMoveTimer>48&&(this.mouseMoveTimer=l,this.mouseMoveListener_(a,o))},this.mouseLeaveListener=()=>{this.hideCursor(this.manager.uid)},this.getPoint=(a,o,l)=>{var h;const u=(h=a==null?void 0:a.divElement)==null?void 0:h.getBoundingClientRect();if(u)return a==null?void 0:a.convertToPointInWorld({x:o-u.x,y:l-u.y})},this.getType=a=>{var u;const o=a.target,l=this.manager.focusApp;switch(o.parentElement){case this.mainViewElement:return{type:"main"};case((u=l==null?void 0:l.view)==null?void 0:u.divElement):return{type:"app"};default:return{type:"main"}}},this.roomMembers=(s=this.manager.room)==null?void 0:s.state.roomMembers;const r=re.wrapper;r&&this.setupWrapper(r),this.sideEffectManager.add(()=>B.on("cursorMove",this.onCursorMove)),this.sideEffectManager.add(()=>B.on("playgroundSizeChange",()=>this.updateContainerRect())),n&&(this.applianceIcons=q(q({},$u),n))}canMoveCursor(t){const i=(t==null?void 0:t.memberState.currentApplianceName)===A.ApplianceNames.laserPointer;return this.enableCursor||i}setupWrapper(t){this.sideEffectManager.add(()=>(t.addEventListener("pointerenter",this.mouseMoveListener),t.addEventListener("pointermove",this.mouseMoveListener),t.addEventListener("pointerleave",this.mouseLeaveListener),()=>{t.removeEventListener("pointerenter",this.mouseMoveListener),t.removeEventListener("pointermove",this.mouseMoveListener),t.removeEventListener("pointerleave",this.mouseLeaveListener)})),this.wrapperRect=t.getBoundingClientRect()}setMainViewDivElement(t){this.mainViewElement=t}get boxState(){return this.store.getBoxState()}get focusView(){var t;return(t=this.manager.focusApp)==null?void 0:t.view}showPencilEraserIfNeeded(t,i,n){const r=Ra(this.manager.room,this.manager.uid),s=(r==null?void 0:r.memberState.currentApplianceName)===A.ApplianceNames.pencilEraser;if(this.wrapperRect&&this.manager.canOperate&&this.canMoveCursor(r)&&s){const a=t.type==="main"?this.manager.mainView:this.focusView,o=this.getPoint(a,i,n);o&&this.onCursorMove({uid:this.manager.uid,position:{x:o.x,y:o.y,type:t.type}})}}updateCursor(t,i,n){const r=Ra(this.manager.room,this.manager.uid);if(this.wrapperRect&&this.manager.canOperate&&this.canMoveCursor(r)){const s=t.type==="main"?this.manager.mainView:this.focusView,a=this.getPoint(s,i,n);a&&this.manager.dispatchInternalEvent(J.CursorMove,{uid:this.manager.uid,position:{x:a.x,y:a.y,type:t.type}})}}updateContainerRect(){var t,i;this.containerRect=(t=re.container)==null?void 0:t.getBoundingClientRect(),this.wrapperRect=(i=re.wrapper)==null?void 0:i.getBoundingClientRect()}deleteCursor(t){this.store.cleanCursor(t);const i=this.cursorInstances.get(t);i&&i.destroy()}hideCursor(t){const i=this.cursorInstances.get(t);i&&i.hide()}destroy(){this.sideEffectManager.flushAll(),this.cursorInstances.size&&(this.cursorInstances.forEach(t=>{t.destroy()}),this.cursorInstances.clear())}}class mw{constructor(t){this.manager=t,B.on("changePageState",()=>{ne.emit("pageStateChange",this.toObject())})}get index(){return this.manager.store.getMainViewSceneIndex()||0}get length(){return this.manager.mainViewScenesLength||0}toObject(){return{index:this.index>=this.length?this.length-1:this.index,length:this.length}}}class vw{constructor(t){this.ctx=t,this.reactors=new Map,this.disposers=new Map,this.onPhaseChanged=async i=>{var n,r;i===A.RoomPhase.Reconnecting&&this.ctx.emitter.emit("startReconnect"),i===A.RoomPhase.Connected&&this.phase===A.RoomPhase.Reconnecting&&((n=this.room)!=null&&n.isWritable?(r=this.room)==null||r.dispatchMagixEvent(ta,{}):(await Jr(500),this.onReconnected())),this.phase=i},this.onReconnected=E.debounce(()=>{this._onReconnected()},1e3),this._onReconnected=()=>{lt("onReconnected refresh reactors"),this.releaseDisposers(),this.reactors.forEach((i,n)=>{E.isFunction(i)&&this.disposers.set(n,i())}),this.ctx.emitter.emit("onReconnected")}}setRoom(t){this.room=t,this.phase=t==null?void 0:t.phase,t&&(t.callbacks.off("onPhaseChanged",this.onPhaseChanged),t.callbacks.on("onPhaseChanged",this.onPhaseChanged),t.addMagixEventListener(ta,i=>{i.authorId===t.observerId&&this.onReconnected()},{fireSelfEventAfterCommit:!0}))}setContext(t){this.ctx=t}releaseDisposers(){this.disposers.forEach(t=>{E.isFunction(t)&&t()}),this.disposers.clear()}refresh(){this._onReconnected()}add(t,i){const n=this.disposers.get(t);n&&E.isFunction(n)&&n(),E.isFunction(i)&&(this.reactors.set(t,i),this.disposers.set(t,i()))}remove(t){this.reactors.has(t)&&this.reactors.delete(t);const i=this.disposers.get(t);i&&(E.isFunction(i)&&i(),this.disposers.delete(t))}hasReactor(t){return this.reactors.has(t)}destroy(){var t,i;(t=this.room)==null||t.callbacks.off("onPhaseChanged",this.onPhaseChanged),(i=this.room)==null||i.removeMagixEventListener(ta,this.onReconnected),this.releaseDisposers()}}const ww=(e,t)=>{if(A.isPlayer(e))xw(e);else{if(e=e,Object.getOwnPropertyDescriptor(e,"disableCameraTransform"))return;Object.defineProperty(e,"disableCameraTransform",{get(){return t.mainView.disableCameraTransform},set(n){t.mainView.disableCameraTransform=n}}),Object.defineProperty(e,"canUndoSteps",{get(){return t.canUndoSteps}}),Object.defineProperty(e,"canRedoSteps",{get(){return t.canRedoSteps}}),e.moveCamera=n=>t.moveCamera(n),e.moveCameraToContain=(...n)=>t.moveCameraToContain(...n),e.convertToPointInWorld=(...n)=>t.mainView.convertToPointInWorld(...n),e.setCameraBound=(...n)=>t.mainView.setCameraBound(...n),e.scenePreview=(...n)=>t.mainView.scenePreview(...n),e.fillSceneSnapshot=(...n)=>t.mainView.fillSceneSnapshot(...n),e.generateScreenshot=(...n)=>t.mainView.generateScreenshot(...n),e.setMemberState=(...n)=>t.mainView.setMemberState(...n),e.redo=()=>t.redo(),e.undo=()=>t.undo(),e.cleanCurrentScene=()=>t.cleanCurrentScene(),e.delete=()=>t.delete(),e.copy=()=>t.copy(),e.paste=()=>t.paste(),e.duplicate=()=>t.duplicate(),e.insertImage=(...n)=>t.insertImage(...n),e.completeImageUpload=(...n)=>t.completeImageUpload(...n),e.insertText=(...n)=>t.insertText(...n),e.lockImage=(...n)=>t.lockImage(...n),e.lockImages=(...n)=>t.lockImages(...n),yw(e,t)}},yw=(e,t)=>{const i=e.removeScenes;e.removeScenes=(n,r)=>{var a;n===Le&&((a=t.appManager)==null||a.updateRootDirRemoving(!0));const s=i.call(e,n);return B.emit("removeScenes",{scenePath:n,index:r}),s}},xw=e=>{const t=e.seekToProgressTime;async function i(n){await B.emit("seekStart");const r=await t.call(e,n);return B.emit("seek",n),r}e.seekToProgressTime=i};var Sw=Object.defineProperty,Mw=Object.defineProperties,Cw=Object.getOwnPropertyDescriptors,Fu=Object.getOwnPropertySymbols,Iw=Object.prototype.hasOwnProperty,bw=Object.prototype.propertyIsEnumerable,Qu=(e,t,i)=>t in e?Sw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,gh=(e,t)=>{for(var i in t||(t={}))Iw.call(t,i)&&Qu(e,i,t[i]);if(Fu)for(var i of Fu(t))bw.call(t,i)&&Qu(e,i,t[i]);return e},mh=(e,t)=>Mw(e,Cw(t)),Aw=(()=>`.netless-app-docs-viewer-content{position:relative;height:100%;overflow:hidden}.netless-app-docs-viewer-preview-mask{display:none;position:absolute;z-index:200;top:0;left:0;width:100%;height:100%}.netless-app-docs-viewer-preview{display:flex;flex-direction:column;align-items:center;position:absolute;z-index:300;top:0;left:0;width:33%;max-width:200px;height:100%;padding-top:10px;transform:translate(-100%);background:rgba(237,237,240,.9);box-shadow:inset -1px 0 #0000001c;transition:transform .4s}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview-mask{display:block}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview{transform:translate(0)}.netless-app-docs-viewer-preview-page{position:relative;display:block;width:55%;margin-bottom:10px;font-size:0;color:transparent;outline:none;border:7px solid transparent;border-radius:4px;transition:border-color .3s;user-select:none}.netless-app-docs-viewer-preview-page:hover,.netless-app-docs-viewer-preview-page.netless-app-docs-viewer-preview-page-active{border-color:#444e601a}.netless-app-docs-viewer-preview-page>img{width:100%;height:auto;box-sizing:border-box;border:1px solid rgba(0,0,0,.5);border-radius:1px;background-color:#fff;box-shadow:0 2px 8px #0000004d}.netless-app-docs-viewer-preview-page-name{position:absolute;top:1px;left:-10px;transform:translate(-100%);text-align:right;font-size:12px;color:#5f5f5f;user-select:none}.netless-app-docs-viewer-footer{box-sizing:border-box;height:26px;display:flex;align-items:center;padding:0 16px;border-top:1px solid #eeeef7;color:#191919}.netless-app-docs-viewer-float-footer{width:100%;min-height:26px;position:absolute;left:0;bottom:0;z-index:2000;background:rgba(249,249,252,.9);transition:opacity .4s}.netless-app-docs-viewer-footer-btn{box-sizing:border-box;width:26px;height:26px;font-size:0;margin:0;padding:3px;border:none;border-radius:1px;outline:none;color:currentColor;background:transparent;transition:background .4s;cursor:pointer;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-footer-btn:hover{background:rgba(237,237,240,.9)}@media (hover: none){.netless-app-docs-viewer-footer-btn:hover{background:transparent!important}}.netless-app-docs-viewer-footer-btn>svg{width:100%;height:100%}.netless-app-docs-viewer-footer-btn>svg:nth-of-type(2){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(1){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(2){display:initial}.netless-app-docs-viewer-footer-btn~.netless-app-docs-viewer-footer-btn{margin-left:15px}.netless-app-docs-viewer-page-jumps{flex:1;display:flex;justify-content:center;align-items:center}.netless-app-docs-viewer-page-number{margin-left:auto;font-size:13px;user-select:none;white-space:nowrap;word-break:keep-all}.netless-app-docs-viewer-page-number-input{border:none;outline:none;width:3em;margin:0;padding:0 2px;text-align:right;font-size:13px;line-height:1;font-weight:400;font-family:inherit;border-radius:2px;color:currentColor;background:transparent;transition:background .4s;user-select:text;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-page-number-input:active{background:#fff;box-shadow:#63636333 0 2px 8px}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn:hover{background:transparent}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:active{background:transparent;box-shadow:none}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:disabled{color:inherit}.netless-app-docs-viewer-readonly.netless-app-docs-viewer-float-footer{display:none}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input{color:#a6a6a8}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:active,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:focus,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:hover{color:#222}.telebox-color-scheme-dark .netless-app-docs-viewer-footer{color:#a6a6a8;background:#2d2d33;border-top:none}.telebox-color-scheme-dark .netless-app-docs-viewer-footer-btn:hover{background:#212126}.telebox-color-scheme-dark .netless-app-docs-viewer-preview{background:rgba(50,50,50,.9)}.netless-app-docs-viewer-static-scrollbar{position:absolute;top:0;right:0;z-index:2147483647;width:8px;min-height:30px;margin:0;padding:0;border:none;outline:none;border-radius:4px;background:rgba(68,78,96,.4);box-shadow:1px 1px 8px #ffffffb3;opacity:0;transition:background .4s,opacity .4s 3s,transform .2s;user-select:none}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrollbar-dragging{background:rgba(68,78,96,.6);opacity:1;transition:background .4s,opacity .4s 3s!important}.netless-app-docs-viewer-static-scrollbar:hover,.netless-app-docs-viewer-static-scrollbar:focus{background:rgba(68,78,96,.5)}.netless-app-docs-viewer-static-scrollbar:active{background:rgba(68,78,96,.6)}.netless-app-docs-viewer-content:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-static-scrollbar{display:none}.netless-app-docs-viewer-static-pages:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.page-renderer-pages-container{position:relative;overflow:hidden}.page-renderer-page{position:absolute;top:0;left:0;background-position:center;background-size:cover;background-repeat:no-repeat}.page-renderer-pages-container.is-hwa .page-renderer-page{will-change:transform}.page-renderer-page-img{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-pages{overflow:hidden;position:relative;height:100%;user-select:none}.netless-app-docs-viewer-static-page{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-wb-view,.netless-app-docs-viewer-dynamic-wb-view{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100;overflow:hidden}.netless-app-docs-viewer-dynamic-wb-view .cursor-clicker .ppt-event-source{cursor:pointer}
`)();const Ew=(e,t,i,n)=>{if(i==="length"||i==="prototype"||i==="arguments"||i==="caller")return;const r=Object.getOwnPropertyDescriptor(e,i),s=Object.getOwnPropertyDescriptor(t,i);!Tw(r,s)&&n||Object.defineProperty(e,i,s)},Tw=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},kw=(e,t)=>{const i=Object.getPrototypeOf(t);i!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,i)},Pw=(e,t)=>`/* Wrapped ${e}*/
${t}`,Nw=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Dw=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),zw=(e,t,i)=>{const n=i===""?"":`with ${i.trim()}() `,r=Pw.bind(null,n,t.toString());Object.defineProperty(r,"name",Dw),Object.defineProperty(e,"toString",mh(gh({},Nw),{value:r}))};function Lw(e,t,{ignoreNonConfigurable:i=!1}={}){const{name:n}=e;for(const r of Reflect.ownKeys(t))Ew(e,t,r,i);return kw(e,t),zw(e,t,n),e}const Rw=(e,t={})=>{if(typeof e!="function")throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:i=0,maxWait:n=Number.Infinity,before:r=!1,after:s=!0}=t;if(!r&&!s)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,o,l;const u=function(...h){const c=this,m=()=>{a=void 0,o&&(clearTimeout(o),o=void 0),s&&(l=e.apply(c,h))},v=()=>{o=void 0,a&&(clearTimeout(a),a=void 0),s&&(l=e.apply(c,h))},y=r&&!a;return clearTimeout(a),a=setTimeout(m,i),n>0&&n!==Number.Infinity&&!o&&(o=setTimeout(v,n)),y&&(l=e.apply(c,h)),l};return Lw(u,e),u.cancel=()=>{a&&(clearTimeout(a),a=void 0),o&&(clearTimeout(o),o=void 0)},u},jw="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Bw=87,_w=20,Zu=[],Ow=()=>{for(let e=0;e<_w;e++)Zu[e]=jw.charAt(Math.random()*Bw);return Zu.join("")};function vh(e){try{return e()}catch(t){console.error(t)}}class Rs{constructor(){this.push=this.addDisposer,this.disposers=new Map}addDisposer(t,i=this.genUID()){return this.flush(i),this.disposers.set(i,Array.isArray(t)?Vw(t):t),i}add(t,i=this.genUID()){const n=t();return n?this.addDisposer(n,i):i}addEventListener(t,i,n,r,s=this.genUID()){return t.addEventListener(i,n,r),this.addDisposer(()=>t.removeEventListener(i,n,r),s),s}setTimeout(t,i,n=this.genUID()){const r=window.setTimeout(()=>{this.remove(n),t()},i);return this.addDisposer(()=>window.clearTimeout(r),n)}setInterval(t,i,n=this.genUID()){const r=window.setInterval(t,i);return this.addDisposer(()=>window.clearInterval(r),n)}remove(t){const i=this.disposers.get(t);return this.disposers.delete(t),i}flush(t){const i=this.remove(t);i&&i()}flushAll(){this.disposers.forEach(vh),this.disposers.clear()}genUID(){let t;do t=Ow();while(this.disposers.has(t));return t}}function Vw(e){return()=>e.forEach(vh)}var li=[],Uw=function(){return li.some(function(e){return e.activeTargets.length>0})},Ww=function(){return li.some(function(e){return e.skippedTargets.length>0})},Yu="ResizeObserver loop completed with undelivered notifications.",Hw=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Yu}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Yu),window.dispatchEvent(e)},Bn;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Bn||(Bn={}));var ui=function(e){return Object.freeze(e)},$w=function(){function e(t,i){this.inlineSize=t,this.blockSize=i,ui(this)}return e}(),wh=function(){function e(t,i,n,r){return this.x=t,this.y=i,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ui(this)}return e.prototype.toJSON=function(){var t=this,i=t.x,n=t.y,r=t.top,s=t.right,a=t.bottom,o=t.left,l=t.width,u=t.height;return{x:i,y:n,top:r,right:s,bottom:a,left:o,width:l,height:u}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),ul=function(e){return e instanceof SVGElement&&"getBBox"in e},yh=function(e){if(ul(e)){var t=e.getBBox(),i=t.width,n=t.height;return!i&&!n}var r=e,s=r.offsetWidth,a=r.offsetHeight;return!(s||a||e.getClientRects().length)},Gu=function(e){var t;if(e instanceof Element)return!0;var i=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(i&&e instanceof i.Element)},Fw=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},bn=typeof window!="undefined"?window:{},vr=new WeakMap,Xu=/auto|scroll/,Qw=/^tb|vertical/,Zw=/msie|trident/i.test(bn.navigator&&bn.navigator.userAgent),st=function(e){return parseFloat(e||"0")},zi=function(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=!1),new $w((i?t:e)||0,(i?e:t)||0)},Ju=ui({devicePixelContentBoxSize:zi(),borderBoxSize:zi(),contentBoxSize:zi(),contentRect:new wh(0,0,0,0)}),xh=function(e,t){if(t===void 0&&(t=!1),vr.has(e)&&!t)return vr.get(e);if(yh(e))return vr.set(e,Ju),Ju;var i=getComputedStyle(e),n=ul(e)&&e.ownerSVGElement&&e.getBBox(),r=!Zw&&i.boxSizing==="border-box",s=Qw.test(i.writingMode||""),a=!n&&Xu.test(i.overflowY||""),o=!n&&Xu.test(i.overflowX||""),l=n?0:st(i.paddingTop),u=n?0:st(i.paddingRight),h=n?0:st(i.paddingBottom),c=n?0:st(i.paddingLeft),m=n?0:st(i.borderTopWidth),v=n?0:st(i.borderRightWidth),y=n?0:st(i.borderBottomWidth),S=n?0:st(i.borderLeftWidth),d=c+u,p=l+h,f=S+v,g=m+y,w=o?e.offsetHeight-g-e.clientHeight:0,x=a?e.offsetWidth-f-e.clientWidth:0,b=r?d+f:0,T=r?p+g:0,L=n?n.width:st(i.width)-b-x,k=n?n.height:st(i.height)-T-w,R=L+d+x+f,C=k+p+w+g,_=ui({devicePixelContentBoxSize:zi(Math.round(L*devicePixelRatio),Math.round(k*devicePixelRatio),s),borderBoxSize:zi(R,C,s),contentBoxSize:zi(L,k,s),contentRect:new wh(c,l,L,k)});return vr.set(e,_),_},Sh=function(e,t,i){var n=xh(e,i),r=n.borderBoxSize,s=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(t){case Bn.DEVICE_PIXEL_CONTENT_BOX:return a;case Bn.BORDER_BOX:return r;default:return s}},Yw=function(){function e(t){var i=xh(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=ui([i.borderBoxSize]),this.contentBoxSize=ui([i.contentBoxSize]),this.devicePixelContentBoxSize=ui([i.devicePixelContentBoxSize])}return e}(),Mh=function(e){if(yh(e))return 1/0;for(var t=0,i=e.parentNode;i;)t+=1,i=i.parentNode;return t},Gw=function(){var e=1/0,t=[];li.forEach(function(a){if(a.activeTargets.length!==0){var o=[];a.activeTargets.forEach(function(u){var h=new Yw(u.target),c=Mh(u.target);o.push(h),u.lastReportedSize=Sh(u.target,u.observedBox),c<e&&(e=c)}),t.push(function(){a.callback.call(a.observer,o,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var i=0,n=t;i<n.length;i++){var r=n[i];r()}return e},Ku=function(e){li.forEach(function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach(function(r){r.isActive()&&(Mh(r.target)>e?i.activeTargets.push(r):i.skippedTargets.push(r))})})},Xw=function(){var e=0;for(Ku(e);Uw();)e=Gw(),Ku(e);return Ww()&&Hw(),e>0},pa,Ch=[],Jw=function(){return Ch.splice(0).forEach(function(e){return e()})},Kw=function(e){if(!pa){var t=0,i=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Jw()}).observe(i,n),pa=function(){i.textContent="".concat(t?t--:t++)}}Ch.push(e),pa()},qw=function(e){Kw(function(){requestAnimationFrame(e)})},jr=0,ey=function(){return!!jr},ty=250,iy={attributes:!0,characterData:!0,childList:!0,subtree:!0},qu=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],ec=function(e){return e===void 0&&(e=0),Date.now()+e},fa=!1,ny=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var i=this;if(t===void 0&&(t=ty),!fa){fa=!0;var n=ec(t);qw(function(){var r=!1;try{r=Xw()}finally{if(fa=!1,t=n-ec(),!ey())return;r?i.run(1e3):t>0?i.run(t):i.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,iy)};document.body?i():bn.addEventListener("DOMContentLoaded",i)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),qu.forEach(function(i){return bn.addEventListener(i,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),qu.forEach(function(i){return bn.removeEventListener(i,t.listener,!0)}),this.stopped=!0)},e}(),Ya=new ny,tc=function(e){!jr&&e>0&&Ya.start(),jr+=e,!jr&&Ya.stop()},ry=function(e){return!ul(e)&&!Fw(e)&&getComputedStyle(e).display==="inline"},sy=function(){function e(t,i){this.target=t,this.observedBox=i||Bn.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=Sh(this.target,this.observedBox,!0);return ry(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),ay=function(){function e(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i}return e}(),wr=new WeakMap,ic=function(e,t){for(var i=0;i<e.length;i+=1)if(e[i].target===t)return i;return-1},yr=function(){function e(){}return e.connect=function(t,i){var n=new ay(t,i);wr.set(t,n)},e.observe=function(t,i,n){var r=wr.get(t),s=r.observationTargets.length===0;ic(r.observationTargets,i)<0&&(s&&li.push(r),r.observationTargets.push(new sy(i,n&&n.box)),tc(1),Ya.schedule())},e.unobserve=function(t,i){var n=wr.get(t),r=ic(n.observationTargets,i),s=n.observationTargets.length===1;r>=0&&(s&&li.splice(li.indexOf(n),1),n.observationTargets.splice(r,1),tc(-1))},e.disconnect=function(t){var i=this,n=wr.get(t);n.observationTargets.slice().forEach(function(r){return i.unobserve(t,r.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),oy=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");yr.connect(this,t)}return e.prototype.observe=function(t,i){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Gu(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");yr.observe(this,t,i)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Gu(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");yr.unobserve(this,t)},e.prototype.disconnect=function(){yr.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();function ly(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-sidebar`),i.setAttribute("viewBox","0 0 64 64");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M50 8H14c-3.309 0-6 2.691-6 6v36c0 3.309 2.691 6 6 6h36c3.309 0 6-2.691 6-6V14c0-3.309-2.691-6-6-6zM12 50V14c0-1.103.897-2 2-2h8v40h-8c-1.103 0-2-.897-2-2zm40 0c0 1.103-.897 2-2 2H26V12h24c1.103 0 2 .897 2 2z"),i.appendChild(n),i}function uy(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-arrow-left`),i.setAttribute("viewBox","0 0 500 500");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M177.81 249.959L337.473 90.295c2.722-2.865 2.651-7.378-.143-10.1-2.793-2.65-7.163-2.65-9.956 0l-164.75 164.75c-2.793 2.793-2.793 7.306 0 10.1l164.75 164.75c2.865 2.722 7.378 2.65 10.099-.143 2.651-2.794 2.651-7.163 0-9.957L177.809 249.959z"),i.appendChild(n),i}function cy(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-arrow-right`),i.setAttribute("viewBox","0 0 500 500");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M322.19 250.041L162.527 409.705c-2.722 2.865-2.651 7.378.143 10.1 2.793 2.65 7.163 2.65 9.956 0l164.75-164.75c2.793-2.793 2.793-7.306 0-10.1l-164.75-164.75c-2.865-2.722-7.378-2.65-10.099.143-2.651 2.794-2.651 7.163 0 9.957l159.664 159.736z"),i.appendChild(n),i}function dy(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-play`),i.setAttribute("viewBox","0 0 500 500");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z"),i.appendChild(n),i}function hy(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-pause`),i.setAttribute("viewBox","0 0 500 500");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z"),i.appendChild(n),i}const Jt=typeof window!="undefined",Ih=Jt&&!("onscroll"in window)||typeof navigator!="undefined"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),bh=Jt&&"IntersectionObserver"in window,Ah=Jt&&"classList"in document.createElement("p"),Eh=Jt&&window.devicePixelRatio>1,py={elements_selector:".lazy",container:Ih||Jt?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},Th=e=>Object.assign({},py,e),nc=function(e,t){let i;const n="LazyLoad::Initialized",r=new e(t);try{i=new CustomEvent(n,{detail:{instance:r}})}catch{i=document.createEvent("CustomEvent"),i.initCustomEvent(n,!1,!1,{instance:r})}window.dispatchEvent(i)},fy=(e,t)=>{if(!!t)if(!t.length)nc(e,t);else for(let i=0,n;n=t[i];i+=1)nc(e,n)},At="src",cl="srcset",dl="sizes",kh="poster",qn="llOriginalAttrs",Ph="data",hl="loading",Nh="loaded",Dh="applied",gy="entered",pl="error",zh="native",Lh="data-",Rh="ll-status",Ee=(e,t)=>e.getAttribute(Lh+t),my=(e,t,i)=>{var n=Lh+t;if(i===null){e.removeAttribute(n);return}e.setAttribute(n,i)},er=e=>Ee(e,Rh),Mi=(e,t)=>my(e,Rh,t),js=e=>Mi(e,null),fl=e=>er(e)===null,vy=e=>er(e)===hl,wy=e=>er(e)===pl,gl=e=>er(e)===zh,yy=[hl,Nh,Dh,pl],xy=e=>yy.indexOf(er(e))>=0,Kt=(e,t,i,n)=>{if(!!e){if(n!==void 0){e(t,i,n);return}if(i!==void 0){e(t,i);return}e(t)}},Ki=(e,t)=>{if(Ah){e.classList.add(t);return}e.className+=(e.className?" ":"")+t},ot=(e,t)=>{if(Ah){e.classList.remove(t);return}e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},Sy=e=>{e.llTempImage=document.createElement("IMG")},My=e=>{delete e.llTempImage},jh=e=>e.llTempImage,Bs=(e,t)=>{if(!t)return;const i=t._observer;!i||i.unobserve(e)},Cy=e=>{e.disconnect()},Iy=(e,t,i)=>{t.unobserve_entered&&Bs(e,i)},ml=(e,t)=>{!e||(e.loadingCount+=t)},by=e=>{!e||(e.toLoadCount-=1)},Bh=(e,t)=>{!e||(e.toLoadCount=t)},Ay=e=>e.loadingCount>0,Ey=e=>e.toLoadCount>0,_h=e=>{let t=[];for(let i=0,n;n=e.children[i];i+=1)n.tagName==="SOURCE"&&t.push(n);return t},vl=(e,t)=>{const i=e.parentNode;if(!i||i.tagName!=="PICTURE")return;_h(i).forEach(t)},Oh=(e,t)=>{_h(e).forEach(t)},_s=[At],Vh=[At,kh],_n=[At,cl,dl],Uh=[Ph],Os=e=>!!e[qn],Wh=e=>e[qn],Hh=e=>delete e[qn],Ui=(e,t)=>{if(Os(e))return;const i={};t.forEach(n=>{i[n]=e.getAttribute(n)}),e[qn]=i},Ty=e=>{Os(e)||(e[qn]={backgroundImage:e.style.backgroundImage})},ky=(e,t,i)=>{if(!i){e.removeAttribute(t);return}e.setAttribute(t,i)},mi=(e,t)=>{if(!Os(e))return;const i=Wh(e);t.forEach(n=>{ky(e,n,i[n])})},Py=e=>{if(!Os(e))return;const t=Wh(e);e.style.backgroundImage=t.backgroundImage},$h=(e,t,i)=>{Ki(e,t.class_applied),Mi(e,Dh),i&&(t.unobserve_completed&&Bs(e,t),Kt(t.callback_applied,e,i))},Fh=(e,t,i)=>{Ki(e,t.class_loading),Mi(e,hl),i&&(ml(i,1),Kt(t.callback_loading,e,i))},Vt=(e,t,i)=>{!i||e.setAttribute(t,i)},rc=(e,t)=>{Vt(e,dl,Ee(e,t.data_sizes)),Vt(e,cl,Ee(e,t.data_srcset)),Vt(e,At,Ee(e,t.data_src))},Ny=(e,t)=>{vl(e,i=>{Ui(i,_n),rc(i,t)}),Ui(e,_n),rc(e,t)},Dy=(e,t)=>{Ui(e,_s),Vt(e,At,Ee(e,t.data_src))},zy=(e,t)=>{Oh(e,i=>{Ui(i,_s),Vt(i,At,Ee(i,t.data_src))}),Ui(e,Vh),Vt(e,kh,Ee(e,t.data_poster)),Vt(e,At,Ee(e,t.data_src)),e.load()},Ly=(e,t)=>{Ui(e,Uh),Vt(e,Ph,Ee(e,t.data_src))},Ry=(e,t,i)=>{const n=Ee(e,t.data_bg),r=Ee(e,t.data_bg_hidpi),s=Eh&&r?r:n;!s||(e.style.backgroundImage=`url("${s}")`,jh(e).setAttribute(At,s),Fh(e,t,i))},jy=(e,t,i)=>{const n=Ee(e,t.data_bg_multi),r=Ee(e,t.data_bg_multi_hidpi),s=Eh&&r?r:n;!s||(e.style.backgroundImage=s,$h(e,t,i))},By=(e,t,i)=>{const n=Ee(e,t.data_bg_set);if(!n)return;const r=n.split("|");let s=r.map(a=>`image-set(${a})`);e.style.backgroundImage=s.join(),e.style.backgroundImage===""&&(s=r.map(a=>`-webkit-image-set(${a})`),e.style.backgroundImage=s.join()),$h(e,t,i)},Qh={IMG:Ny,IFRAME:Dy,VIDEO:zy,OBJECT:Ly},_y=(e,t)=>{const i=Qh[e.tagName];!i||i(e,t)},Oy=(e,t,i)=>{const n=Qh[e.tagName];!n||(n(e,t),Fh(e,t,i))},Vy=["IMG","IFRAME","VIDEO","OBJECT"],Uy=e=>Vy.indexOf(e.tagName)>-1,Zh=(e,t)=>{t&&!Ay(t)&&!Ey(t)&&Kt(e.callback_finish,t)},sc=(e,t,i)=>{e.addEventListener(t,i),e.llEvLisnrs[t]=i},Wy=(e,t,i)=>{e.removeEventListener(t,i)},wl=e=>!!e.llEvLisnrs,Hy=(e,t,i)=>{wl(e)||(e.llEvLisnrs={});const n=e.tagName==="VIDEO"?"loadeddata":"load";sc(e,n,t),sc(e,"error",i)},Ga=e=>{if(!wl(e))return;const t=e.llEvLisnrs;for(let i in t){const n=t[i];Wy(e,i,n)}delete e.llEvLisnrs},Yh=(e,t,i)=>{My(e),ml(i,-1),by(i),ot(e,t.class_loading),t.unobserve_completed&&Bs(e,i)},$y=(e,t,i,n)=>{const r=gl(t);Yh(t,i,n),Ki(t,i.class_loaded),Mi(t,Nh),Kt(i.callback_loaded,t,n),r||Zh(i,n)},Fy=(e,t,i,n)=>{const r=gl(t);Yh(t,i,n),Ki(t,i.class_error),Mi(t,pl),Kt(i.callback_error,t,n),i.restore_on_error&&mi(t,_n),r||Zh(i,n)},yl=(e,t,i)=>{const n=jh(e)||e;if(wl(n))return;Hy(n,a=>{$y(a,e,t,i),Ga(n)},a=>{Fy(a,e,t,i),Ga(n)})},Qy=(e,t,i)=>{Sy(e),yl(e,t,i),Ty(e),Ry(e,t,i),jy(e,t,i),By(e,t,i)},Zy=(e,t,i)=>{yl(e,t,i),Oy(e,t,i)},xl=(e,t,i)=>{Uy(e)?Zy(e,t,i):Qy(e,t,i)},Yy=(e,t,i)=>{e.setAttribute("loading","lazy"),yl(e,t,i),_y(e,t),Mi(e,zh)},ac=e=>{e.removeAttribute(At),e.removeAttribute(cl),e.removeAttribute(dl)},Gy=e=>{vl(e,t=>{ac(t)}),ac(e)},Gh=e=>{vl(e,t=>{mi(t,_n)}),mi(e,_n)},Xy=e=>{Oh(e,t=>{mi(t,_s)}),mi(e,Vh),e.load()},Jy=e=>{mi(e,_s)},Ky=e=>{mi(e,Uh)},qy={IMG:Gh,IFRAME:Jy,VIDEO:Xy,OBJECT:Ky},e0=e=>{const t=qy[e.tagName];if(!t){Py(e);return}t(e)},t0=(e,t)=>{fl(e)||gl(e)||(ot(e,t.class_entered),ot(e,t.class_exited),ot(e,t.class_applied),ot(e,t.class_loading),ot(e,t.class_loaded),ot(e,t.class_error))},i0=(e,t)=>{e0(e),t0(e,t),js(e),Hh(e)},n0=(e,t,i,n)=>{!i.cancel_on_exit||!vy(e)||e.tagName==="IMG"&&(Ga(e),Gy(e),Gh(e),ot(e,i.class_loading),ml(n,-1),js(e),Kt(i.callback_cancel,e,t,n))},r0=(e,t,i,n)=>{const r=xy(e);Mi(e,gy),Ki(e,i.class_entered),ot(e,i.class_exited),Iy(e,i,n),Kt(i.callback_enter,e,t,n),!r&&xl(e,i,n)},s0=(e,t,i,n)=>{fl(e)||(Ki(e,i.class_exited),n0(e,t,i,n),Kt(i.callback_exit,e,t,n))},a0=["IMG","IFRAME","VIDEO"],Xh=e=>e.use_native&&"loading"in HTMLImageElement.prototype,o0=(e,t,i)=>{e.forEach(n=>{a0.indexOf(n.tagName)!==-1&&Yy(n,t,i)}),Bh(i,0)},l0=e=>e.isIntersecting||e.intersectionRatio>0,u0=e=>({root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}),c0=(e,t,i)=>{e.forEach(n=>l0(n)?r0(n.target,n,t,i):s0(n.target,n,t,i))},d0=(e,t)=>{t.forEach(i=>{e.observe(i)})},h0=(e,t)=>{Cy(e),d0(e,t)},p0=(e,t)=>{!bh||Xh(e)||(t._observer=new IntersectionObserver(i=>{c0(i,e,t)},u0(e)))},Jh=e=>Array.prototype.slice.call(e),ns=e=>e.container.querySelectorAll(e.elements_selector),f0=e=>Jh(e).filter(fl),g0=e=>wy(e),m0=e=>Jh(e).filter(g0),oc=(e,t)=>f0(e||ns(t)),v0=(e,t)=>{m0(ns(e)).forEach(n=>{ot(n,e.class_error),js(n)}),t.update()},w0=(e,t)=>{!Jt||(t._onlineHandler=()=>{v0(e,t)},window.addEventListener("online",t._onlineHandler))},y0=e=>{!Jt||window.removeEventListener("online",e._onlineHandler)},tr=function(e,t){const i=Th(e);this._settings=i,this.loadingCount=0,p0(i,this),w0(i,this),this.update(t)};tr.prototype={update:function(e){const t=this._settings,i=oc(e,t);if(Bh(this,i.length),Ih||!bh){this.loadAll(i);return}if(Xh(t)){o0(i,t,this);return}h0(this._observer,i)},destroy:function(){this._observer&&this._observer.disconnect(),y0(this),ns(this._settings).forEach(e=>{Hh(e)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){const t=this._settings;oc(e,t).forEach(n=>{Bs(n,this),xl(n,t,this)})},restoreAll:function(){const e=this._settings;ns(e).forEach(t=>{i0(t,e)})}};tr.load=(e,t)=>{const i=Th(t);xl(e,i)};tr.resetStatus=e=>{js(e)};Jt&&fy(tr,window.lazyLoadOptions);class Kh{constructor({readonly:t,box:i,pages:n,onNewPageIndex:r,onPlay:s}){if(this.pageIndex=0,this.namespace="netless-app-docs-viewer",this.isShowPreview=!1,this.isSmallBox=!1,this.sideEffect=new Rs,n.length<=0)throw new Error("[DocsViewer] Empty pages.");this.readonly=t,this.box=i,this.pages=n,this.onNewPageIndex=r,this.onPlay=s,this.onPageIndexChanged=()=>{},this.render()}mount(){this.box.mountContent(this.$content),this.box.mountFooter(this.$footer),this.sideEffect.add(()=>{const t=new tr({container:this.$preview,elements_selector:`.${this.wrapClassName("preview-page>img")}`});return()=>t.destroy()},"preview-lazyload")}unmount(){this.$content.remove(),this.$footer.remove()}setReadonly(t){this.readonly!==t&&(this.readonly=t,this.$content.classList.toggle(this.wrapClassName("readonly"),t),this.$footer.classList.toggle(this.wrapClassName("readonly"),t),this.$pageNumberInput.disabled=t)}destroy(){this.sideEffect.flushAll(),this.unmount()}setPageIndex(t){Number.isNaN(t)||(this.pageIndex=t,this.$pageNumberInput.value=String(t+1),this.onPageIndexChanged(t))}setSmallBox(t){this.isSmallBox!==t&&(this.isSmallBox=t,this.$footer.classList.toggle(this.wrapClassName("float-footer"),t))}render(){return this.renderContent(),this.renderFooter(),this.$content}renderContent(){if(!this.$content){const t=document.createElement("div");t.className=this.wrapClassName("content"),this.$content=t,this.readonly&&t.classList.add(this.wrapClassName("readonly")),t.appendChild(this.renderPreviewMask()),t.appendChild(this.renderPreview())}return this.$content}renderPreview(){if(!this.$preview){const t=document.createElement("div");t.className=this.wrapClassName("preview")+" tele-fancy-scrollbar",this.$preview=t;const i=this.wrapClassName("preview-page"),n=this.wrapClassName("preview-page-name");this.pages.forEach((r,s)=>{var a;const o=(a=r.thumbnail)!=null?a:r.src.startsWith("ppt")?void 0:r.src;if(!o)return;const l=String(s),u=document.createElement("a");u.className=i+" "+this.wrapClassName(`preview-page-${s}`),u.setAttribute("href","#"),u.dataset.pageIndex=l;const h=document.createElement("span");h.className=n,h.textContent=String(s+1),h.dataset.pageIndex=l;const c=document.createElement("img");c.width=r.width,c.height=r.height,c.dataset.src=o,c.dataset.pageIndex=l,u.appendChild(c),u.appendChild(h),t.appendChild(u)}),this.sideEffect.addEventListener(t,"click",r=>{var s;if(this.readonly)return;const a=(s=r.target.dataset)==null?void 0:s.pageIndex;a&&(r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation(),this.onNewPageIndex(Number(a)),this.togglePreview(!1))})}return this.$preview}renderPreviewMask(){return this.$previewMask||(this.$previewMask=document.createElement("div"),this.$previewMask.className=this.wrapClassName("preview-mask"),this.sideEffect.addEventListener(this.$previewMask,"click",t=>{this.readonly||t.target===this.$previewMask&&this.togglePreview(!1)})),this.$previewMask}renderFooter(){if(!this.$footer){const t=document.createElement("div");if(t.className=this.wrapClassName("footer"),this.$footer=t,this.readonly&&t.classList.add(this.wrapClassName("readonly")),this.isSmallBox&&t.classList.add(this.wrapClassName("float-footer")),this.pages.some(l=>l.thumbnail||!l.src.startsWith("ppt"))){const l=this.renderFooterBtn("btn-sidebar",ly(this.namespace));this.sideEffect.addEventListener(l,"click",()=>{this.readonly||this.togglePreview()}),this.$footer.appendChild(l)}const i=document.createElement("div");i.className=this.wrapClassName("page-jumps");const n=this.renderFooterBtn("btn-page-back",uy(this.namespace));if(this.sideEffect.addEventListener(n,"click",()=>{this.readonly||this.onNewPageIndex(this.pageIndex-1)}),i.appendChild(n),this.onPlay){const l=this.renderFooterBtn("btn-page-play",dy(this.namespace),hy(this.namespace)),u=()=>{this.sideEffect.setTimeout(()=>{l.classList.toggle(this.wrapClassName("footer-btn-playing"),!1)},500,"returnPlay")};this.sideEffect.addEventListener(l,"click",()=>{this.readonly||(l.classList.toggle(this.wrapClassName("footer-btn-playing"),!0),this.onPlay&&this.onPlay(),u())}),i.appendChild(l)}const r=this.renderFooterBtn("btn-page-next",cy(this.namespace));this.sideEffect.addEventListener(r,"click",()=>{this.readonly||this.onNewPageIndex(this.pageIndex+1)}),i.appendChild(r);const s=document.createElement("div");s.className=this.wrapClassName("page-number");const a=document.createElement("input");a.className=this.wrapClassName("page-number-input"),a.value=String(this.pageIndex+1),this.readonly&&(a.disabled=!0),this.$pageNumberInput=a,this.sideEffect.addEventListener(a,"focus",()=>{a.select()}),this.sideEffect.addEventListener(a,"change",()=>{this.readonly||a.value&&this.onNewPageIndex(Number(a.value)-1)});const o=document.createElement("span");o.textContent=" / "+this.pages.length,s.appendChild(a),s.appendChild(o),this.$footer.appendChild(i),this.$footer.appendChild(s)}return this.$footer}renderFooterBtn(t,i,n){const r=document.createElement("button");return r.className=this.wrapClassName("footer-btn")+" "+this.wrapClassName(t),r.appendChild(i),n&&r.appendChild(n),r}togglePreview(t){if(this.isShowPreview=t!=null?t:!this.isShowPreview,this.$content.classList.toggle(this.wrapClassName("preview-active"),this.isShowPreview),this.isShowPreview){const i=this.$preview.querySelector("."+this.wrapClassName(`preview-page-${this.pageIndex}`));i&&this.$preview.scrollTo({top:i.offsetTop-16})}}wrapClassName(t){return`${this.namespace}-${t}`}}function Wi(e,t,i){return Math.min(Math.max(e,t),i)}function lc(e){return e.touches?e.touches[0]:e}function qh(e){e.stopPropagation(),e.cancelable&&e.preventDefault()}function ep(e){if(!e)return!1;const t=e.tagName;return t==="INPUT"||t==="TEXTAREA"||t==="SELECT"}class x0{constructor(t){var i,n,r;this.velocity=0,this.paused=!0,this._animationFrameID=null,this._loopTimestamp=0,this.looper=s=>{if(this.paused)return;let a=Math.floor((s-this._loopTimestamp)/1e3*60)+1;for(this._loopTimestamp=s;a-- >0;)this.stepper();this.onStep(this.current,this),!this.paused&&this.current!==this.target&&window.requestAnimationFrame(this.looper)},this.current=(i=t.start)!=null?i:0,this.target=this.current,this.stiffness=(n=t.stiffness)!=null?n:170,this.damping=(r=t.damping)!=null?r:26,this.onStep=t.onStep}stepTo(t,i){this.paused&&i!=null&&(this.current=i),this.paused=!1,this.target=t,this.onStep(this.current,this),this._loopTimestamp=Date.now(),window.requestAnimationFrame(this.looper)}pause(){this.paused=!0}destroy(){this.pause()}stepper(){const t=-this.stiffness*(this.current-this.target),i=-this.damping*this.velocity,n=this.velocity+(t+i)/60,r=this.current+n/60;Math.abs(n-0)<.01&&Math.abs(r-this.target)<.01?(this.current=this.target,this.velocity=0):(this.current=r,this.velocity=n)}}class S0{constructor(t,i,n,r){this.scale=1,this.lastVisit=Date.now(),this.pageOffsetY=0,this.pageOffsetX=0,this.visible=!0,this.index=t,this.page=i,this.scale=n,this.pageOffsetX=(r-i.width)/2;const s=document.createElement("div");s.className="page-renderer-page",s.dataset.index=`${t}`,s.style.width=`${i.width*n}px`,s.style.height=`${i.height*n}px`,i.thumbnail&&(s.style.backgroundImage=`url("${i.thumbnail}")`);const a=document.createElement("img");a.className="page-renderer-page-img",a.width=i.width,a.height=i.height,a.src=i.src,s.appendChild(a),this.$page=s}translateY(t){Math.abs(t-this.pageOffsetY)>=.001&&(this.pageOffsetY=t,this.$page.style.transform=`translate(${this.pageOffsetX*this.scale}px, ${this.pageOffsetY*this.scale}px)`)}setScale(t){Math.abs(t-this.scale)>=.001&&(this.scale=t,this.$page.style.width=`${this.page.width*this.scale}px`,this.$page.style.height=`${this.page.height*this.scale}px`,this.$page.style.transform=`translate(${this.pageOffsetX*this.scale}px, ${this.pageOffsetY*this.scale}px)`)}setVisible(t){t!==this.visible&&(this.visible=t,this.$page.style.opacity=t?"1":"0")}}const M0=window.requestIdleCallback||(e=>window.setTimeout(e,5e3)),C0=window.cancelIdleCallback||window.clearTimeout;class I0{constructor(t,i,n){this.pages=t,this.pagesIntrinsicWidth=i,this.scale=n,this.els=new Map,this.maxElCount=200,this.gcTimer=null,this.gc=()=>{if(this.gcTimer=null,this.els.size>this.maxElCount){const r=[...this.els.values()].sort((s,a)=>a.lastVisit-s.lastVisit);for(let s=Math.floor(this.maxElCount/4);s<r.length;s++)this.els.delete(r[s].index)}}}getEl(t){let i=this.els.get(t);return i||(i=new S0(t,this.pages[t],this.scale,this.pagesIntrinsicWidth),this.els.set(t,i)),i.lastVisit=Date.now(),this.els.size>this.maxElCount&&this.gcTimer===null&&(this.gcTimer=M0(this.gc)),i}setScale(t){t!==this.scale&&(this.scale=t,this.els.forEach(i=>i.setScale(t)))}destroy(){this.els.clear(),this.gcTimer!==null&&(C0(this.gcTimer),this.gcTimer=null)}}class b0{constructor(t){this._hwaTimeout=NaN,this._turnOffHWA=()=>{window.clearTimeout(this._hwaTimeout),this._hwaTimeout=NaN,this.$pages.classList.toggle("is-hwa",!1)},this.pagesScrollTop=t.pagesScrollTop||0,this.containerWidth=t.containerWidth||1,this.containerHeight=t.containerHeight||1,this.pages=t.pages.map(s=>{if(s.thumbnail)return s;try{const a=new URL(s.src);return a.searchParams.set("x-oss-process","image/resize,l_50"),mh(gh({},s),{thumbnail:a.toString()})}catch(a){return console.error(a),s}});const i=Array(this.pages.length);let n=1/0,r=0;this.pagesIntrinsicHeight=this.pages.reduce((s,a,o)=>(i[o]=s,a.width>r&&(r=a.width),a.height<=n&&(n=a.height),s+a.height),0),this.pagesIntrinsicWidth=r,this.pagesMinHeight=n,this.pagesIntrinsicYs=i,this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.onPageIndexChanged=t.onPageIndexChanged,this.pageScrollIndex=0,this.pagesScrollTop!==0&&(this.pageScrollIndex=this.findScrollPageIndex(),this.onPageIndexChanged&&this.pageScrollIndex>0&&this.onPageIndexChanged(this.pageScrollIndex)),this.pageElManager=new I0(this.pages,r,this.scale),this.$pages=this.renderPages()}setContainerSize(t,i){t>0&&i>0&&(t!==this.containerWidth||i!==this.containerHeight)&&(this.containerWidth=t,this.containerHeight=i,this.$pages.style.width=`${this.containerWidth}px`,this.$pages.style.height=`${this.containerHeight}px`,this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.pageElManager.setScale(this.scale),this.$pages.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}renderPages(){const t=document.createElement("div");return t.className="page-renderer-pages-container",t.style.width=`${this.containerWidth}px`,t.style.height=`${this.containerHeight}px`,t}pagesScrollTo(t,i){if(t=Wi(t,0,this.pagesIntrinsicHeight-this.containerHeight/this.scale),i||Math.abs(t-this.pagesScrollTop)>=.001){this._turnOnHWA(),this.pagesScrollTop=t;const n=this.findScrollPageIndex(),r=Math.max(n-this.threshold,0),s=Math.min(n+this.threshold,this.pages.length-1);for(let a=0;a<this.$pages.children.length;a++){const o=this.$pages.children[a],l=Number(o.dataset.index);l>=r&&l<=s||(o.remove(),a--)}for(let a=r;a<=s;a++){const o=this.pageElManager.getEl(a);o.$page.parentElement!==this.$pages&&this.$pages.appendChild(o.$page),o.translateY(this.pagesIntrinsicYs[a]-this.pagesScrollTop)}n!==this.pageScrollIndex&&(this.pageScrollIndex=n,this.onPageIndexChanged&&this.onPageIndexChanged(n))}}findScrollPageIndex(){for(let t=0;t<this.pagesIntrinsicYs.length;t++)if(this.pagesIntrinsicYs[t]+this.pages[t].height-this.pagesScrollTop>=.001)return t;return this.pagesIntrinsicYs.length-1}mount(t){t.appendChild(this.$pages),this.pagesScrollTo(this.pagesScrollTop,!0)}unmount(){this.$pages.remove()}destroy(){this.unmount(),this.onPageIndexChanged=void 0,this.pageElManager.destroy(),this._hwaTimeout&&(window.clearTimeout(this._hwaTimeout),this._hwaTimeout=NaN)}_calcScale(){return this.containerWidth/this.pagesIntrinsicWidth||1}_calcThreshold(){return Wi(Math.ceil(this.containerHeight/this.scale/this.pagesMinHeight/2),1,this.pages.length)}_turnOnHWA(){this._hwaTimeout?window.clearTimeout(this._hwaTimeout):this.$pages.classList.toggle("is-hwa",!0),this._hwaTimeout=window.setTimeout(this._turnOffHWA,1e3)}}const A0=30;class E0{constructor(t){this.sideEffect=new Rs,this.pagesScrollTop=t.pagesScrollTop||0,this.containerWidth=t.containerWidth||1,this.containerHeight=t.containerHeight||1,this.pagesWidth=t.pagesWidth||1,this.pagesHeight=t.pagesHeight||1,this.scale=this._calcScale(),this.scrollbarMinHeight=t.scrollbarMinHeight||A0,this.scrollbarHeight=this._calcScrollbarHeight(),this.readonly=t.readonly,this.wrapClassName=t.wrapClassName,this.onDragScroll=t.onDragScroll,this.$scrollbar=this.renderScrollbar()}mount(t){t.appendChild(this.$scrollbar),this.pagesScrollTo(this.pagesScrollTop,!0)}unmount(){this.$scrollbar.remove()}setReadonly(t){this.readonly=t}setContainerSize(t,i){t>0&&i>0&&(t!==this.containerWidth||i!==this.containerHeight)&&(this.containerWidth=t,this.containerHeight=i,this.scale=this._calcScale(),this._updateScrollbarHeight(),this.$scrollbar.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}pagesScrollTo(t,i){if(t=Wi(t,0,this.pagesHeight-this.containerHeight/this.scale),i||Math.abs(t-this.pagesScrollTop)>=.001){this.pagesScrollTop=t;const n=this.pagesScrollTop*this.scale,r=this.pagesHeight*this.scale,s=n/(r-this.containerHeight)*(this.containerHeight-this.scrollbarHeight);window.requestAnimationFrame?window.requestAnimationFrame(()=>{this.$scrollbar.style.transform=`translateY(${s}px)`}):this.$scrollbar.style.transform=`translateY(${s}px)`}}destroy(){this.unmount(),this.onDragScroll=void 0,this.sideEffect.flushAll()}renderScrollbar(){const t=document.createElement("button");t.className=this.wrapClassName("scrollbar"),t.style.minHeight=`${this.scrollbarMinHeight}px`,t.style.height=`${this.scrollbarHeight}px`;const i=n=>{if(this.readonly||n.button!=null&&n.button!==0)return;qh(n);const r=this.wrapClassName("scrollbar-dragging");t.classList.toggle(r,!0);const s=this.pagesScrollTop,{clientY:a}=lc(n),o=u=>{if(this.readonly)return;const{clientY:h}=lc(u),c=(h-a)/this.scale;Math.abs(c)>0&&this.onDragScroll&&this.onDragScroll(s+c*(this.pagesHeight*this.scale/this.containerHeight))},l=()=>{t.classList.toggle(r,!1),window.removeEventListener("mousemove",o,!0),window.removeEventListener("touchmove",o,!0),window.removeEventListener("mouseup",l,!0),window.removeEventListener("touchend",l,!0),window.removeEventListener("touchcancel",l,!0)};window.addEventListener("mousemove",o,!0),window.addEventListener("touchmove",o,!0),window.addEventListener("mouseup",l,!0),window.addEventListener("touchend",l,!0),window.addEventListener("touchcancel",l,!0)};return this.sideEffect.addEventListener(t,"mousedown",i),this.sideEffect.addEventListener(t,"touchstart",i),t}_calcScale(){return this.containerWidth/this.pagesWidth||1}_calcScrollbarHeight(){return Wi(this.containerHeight/(this.pagesHeight*this.scale)*this.containerHeight,this.scrollbarMinHeight,this.containerHeight)}_updateScrollbarHeight(){const t=this._calcScrollbarHeight();Math.abs(t-this.scrollbarHeight)>.001&&(this.scrollbarHeight=t,this.$scrollbar.style.height=`${t}px`)}}const T0=window.ResizeObserver||oy,rn=640;class k0{constructor({whiteboardView:t,readonly:i,box:n,pages:r,pageScrollTop:s=0,mountWhiteboard:a,onUserScroll:o,baseScenePath:l,appId:u}){this.sideEffect=new Rs,this.userScrolling=!1,this.onNewPageIndex=v=>{this.scrollToPage(v)},this.toPdf=async()=>{const v=document.createElement("canvas"),y=v.getContext("2d");if(!y||!this.baseScenePath){this.reportProgress(100,null);return}const S=this.whiteboardView.focusScenePath||`${this.baseScenePath}/1`,d=this.pages[0],{jsPDF:p}=await Promise.resolve().then(function(){return xg(require("jspdf"))}),f=new p({format:[d.width,d.height],orientation:d.width>d.height?"l":"p",compress:!0});for(const[w,x]of this.pages.entries()){const{width:b,height:T,src:L}=x;v.width=b,v.height=T;const k=b>T?"l":"p";w>0&&f.addPage([b,T],k);const R=await this.getBase64FromUrl(L),C=document.createElement("img");C.src=R,await new Promise(Q=>C.onload=Q),y.drawImage(C,0,0);const _=v.toDataURL("image/jpeg",.6);y.clearRect(0,0,b,T),this.whiteboardView.screenshotToCanvas(y,S,b,T,{centerX:b/2,centerY:T/2+w*T,scale:1});const N=v.toDataURL("image/png");f.addImage(_,"JPEG",0,0,b,T,"","FAST"),f.addImage(N,"PNG",0,0,b,T,"","FAST"),y.clearRect(0,0,b,T),Math.ceil((w+1)/this.pages.length*100)<100&&this.reportProgress(Math.ceil((w+1)/this.pages.length*100),null)}const g=f.output("arraybuffer");this.reportProgress(100,{pdf:g,title:this.box.title})},this.whiteboardView=t,this.readonly=i,this.box=n,this.pages=r,this.baseScenePath=l,this.appId=u,this.mountWhiteboard=a,this._onUserScroll=o;const h=this.debounce(()=>{this.userScrolling=!1,this._onUserScroll&&this._onUserScroll(this.pageRenderer.pagesScrollTop)},{wait:80},"debounce-updateUserScroll");this.updateUserScroll=()=>{this.userScrolling=!0,h()},this.viewer=new Kh({readonly:i,box:n,pages:r,onNewPageIndex:this.onNewPageIndex});const{width:c,height:m}=this.whiteboardView.size;this.pageRenderer=new b0({pagesScrollTop:s,pages:this.pages,containerWidth:c,containerHeight:m,onPageIndexChanged:this.viewer.setPageIndex.bind(this.viewer)}),this.scrollbar=new E0({pagesScrollTop:this.pageRenderer.pagesScrollTop,containerWidth:c,containerHeight:m,pagesWidth:this.pageRenderer.pagesIntrinsicWidth,pagesHeight:this.pageRenderer.pagesIntrinsicHeight,readonly:this.readonly,wrapClassName:this.wrapClassName.bind(this),onDragScroll:v=>{this.pageScrollTo(v),this.updateUserScroll()}}),this.pageScrollStepper=new x0({start:this.pageRenderer.pagesScrollTop,onStep:v=>{this.pageScrollTo(v)}}),this.render()}mount(){this.viewer.mount(),this.setupScrollListener();const t=this.debounce(this.renderRatioHeight.bind(this),{wait:80});return this.sideEffect.add(()=>{const i=new T0(t);return i.observe(this.viewer.$content),()=>i.disconnect()}),this.sideEffect.setTimeout(()=>{this.userScrolling||this.pageScrollTo(this.pageRenderer.pagesScrollTop)},100),this.sideEffect.add(()=>{const i=n=>{n.data.type==="@netless/_request_save_pdf_"&&n.data.appId===this.appId&&this.toPdf().catch(()=>this.reportProgress(100,null))};return window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}}),this}unmount(){return this.viewer.unmount(),this}setReadonly(t){this.readonly!==t&&(this.readonly=t,this.viewer.setReadonly(t),this.scrollbar.setReadonly(t))}destroy(){this.sideEffect.flushAll(),this.pageScrollStepper.destroy(),this._onUserScroll=void 0,this.unmount(),this.viewer.destroy(),this.pageRenderer.destroy(),this.scrollbar.destroy()}syncPageScrollTop(t){!this.userScrolling&&t>=0&&Math.abs(this.pageRenderer.pagesScrollTop-t)>.01&&this.pageScrollStepper.stepTo(t,this.pageRenderer.pagesScrollTop)}render(){this.pageRenderer.mount(this.viewer.$content),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.scrollbar.mount(this.viewer.$content),this.renderRatioHeight()}renderRatioHeight(){const t=this.box.absoluteHeight,i=t<=rn;if(this.viewer.setSmallBox(i),i){const n=26/rn,r=26/t,s=26/rn,a=0,o=Math.max((n+s-(r+a))/2,0);if(this.box.$titleBar){const l=r+o;this.box.$titleBar.style.height=`${l*100}%`}if(this.box.$footer){const l=a+o;this.box.$footer.style.height=`${l*100}%`}}else{if(this.box.$titleBar){const n=Math.max(26/rn,26/t);this.box.$titleBar.style.height=`${n*100}%`}if(this.box.$footer){const n=Math.max(26/rn,26/t);this.box.$footer.style.height=`${n*100}%`}}}renderWhiteboardView(){return this.$whiteboardView||(this.$whiteboardView=document.createElement("div"),this.$whiteboardView.className=this.wrapClassName("wb-view"),this.mountWhiteboard(this.$whiteboardView),this.sideEffect.addEventListener(this.$whiteboardView,"wheel",t=>{qh(t),this.readonly||(this.pageScrollTo(this.pageRenderer.pagesScrollTop+t.deltaY),this.updateUserScroll())},{passive:!1,capture:!0}),this.sideEffect.addEventListener(this.$whiteboardView,"touchmove",t=>{this.readonly||t.touches.length<=1||this.updateUserScroll()},{passive:!0,capture:!0})),this.$whiteboardView}scrollTopPageToEl(t){return t*this.pageRenderer.scale}scrollTopElToPage(t){return t/this.pageRenderer.scale}elScrollTo(t){this.pageScrollTo(this.scrollTopElToPage(t))}pageScrollTo(t){const i=this.scrollTopElToPage(this.whiteboardView.size.height/2);this.whiteboardView.moveCamera({centerY:Wi(t+i,i,this.pageRenderer.pagesIntrinsicHeight-i),animationMode:"immediately"})}scrollToPage(t){if(!this.readonly&&!Number.isNaN(t)){const i=this.pageRenderer.pagesIntrinsicYs[t];i>=0&&(this.pageScrollTo(i+5/this.pageRenderer.scale),this.updateUserScroll())}}setupScrollListener(){this.sideEffect.add(()=>{const t=i=>{const{width:n,height:r}=this.whiteboardView.size;if(n<=0||r<=0)return;const s=i.centerY-this.pageRenderer.containerHeight/this.pageRenderer.scale/2;this.pageRenderer.pagesScrollTo(s),this.scrollbar.pagesScrollTo(s)};return this.whiteboardView.callbacks.on("onCameraUpdated",t),()=>this.whiteboardView.callbacks.off("onCameraUpdated",t)}),this.sideEffect.add(()=>{const{updateUserScroll:t}=this;return this.whiteboardView.callbacks.on("onCameraUpdatedByDevice",t),()=>this.whiteboardView.callbacks.off("onCameraUpdatedByDevice",t)}),this.sideEffect.add(()=>{const t=({width:i,height:n})=>{if(i<=0||n<=0)return;this.pageRenderer.setContainerSize(i,n),this.scrollbar.setContainerSize(i,n);const{pagesIntrinsicWidth:r,pagesIntrinsicHeight:s}=this.pageRenderer;this.whiteboardView.moveCameraToContain({originX:0,originY:this.pageRenderer.pagesScrollTop,width:r,height:n/this.pageRenderer.scale,animationMode:"immediately"}),this.whiteboardView.setCameraBound({damping:1,maxContentMode:()=>this.pageRenderer.scale,minContentMode:()=>this.pageRenderer.scale,centerX:r/2,centerY:s/2,width:r,height:s})};return this.whiteboardView.callbacks.on("onSizeUpdated",t),()=>{this.whiteboardView.callbacks.off("onSizeUpdated",t)}},"whiteboard-size-update"),this.sideEffect.addEventListener(window,"keyup",t=>{if(this.readonly||!this.box.focus||this.box.minimized||ep(t.target))return;let i=null;switch(t.key){case"PageDown":{i=this.pageRenderer.pagesScrollTop+this.pageRenderer.containerHeight/this.pageRenderer.scale;break}case"PageUp":{i=this.pageRenderer.pagesScrollTop-this.pageRenderer.containerHeight/this.pageRenderer.scale;break}case"ArrowDown":{i=this.pageRenderer.pagesScrollTop+this.pageRenderer.containerHeight/4/this.pageRenderer.scale;break}case"ArrowUp":{i=this.pageRenderer.pagesScrollTop-this.pageRenderer.containerHeight/4/this.pageRenderer.scale;break}}i!==null&&(this._onUserScroll?this._onUserScroll(i):(this.pageScrollTo(i),this.updateUserScroll()))},{capture:!0})}debounce(t,i,n){const r=Rw(t,i);return this.sideEffect.addDisposer(()=>r.cancel(),n),r}wrapClassName(t){return"netless-app-docs-viewer-static-"+t}async getBase64FromUrl(t){const n=await(await fetch(this._invalidate(t))).blob();return new Promise(r=>{const s=new FileReader;s.readAsDataURL(n),s.onloadend=()=>{const a=s.result;r(a)}})}_invalidate(t){try{const i=new URL(t);return i.searchParams.set("t",Date.now().toString()),i.toString()}catch{return t}}reportProgress(t,i){window.postMessage({type:"@netless/_result_save_pdf_",appId:this.appId,progress:t,result:i})}}class P0{constructor({context:t,whiteboardView:i,box:n,pages:r}){this.sideEffect=new Rs,this.onPlayPPT=()=>{const s=this.context.getRoom();s&&s.pptNextStep()},this._scaleDocsToFitImpl=()=>{const s=this.pages[this.getPageIndex()];s&&(this.whiteboardView.moveCameraToContain({originX:-s.width/2,originY:-s.height/2,width:s.width,height:s.height,animationMode:"immediately"}),this.whiteboardView.setCameraBound({damping:1,maxContentMode:()=>this.whiteboardView.camera.scale,minContentMode:()=>this.whiteboardView.camera.scale,centerX:0,centerY:0,width:s.width,height:s.height}))},this._scaleDocsToFitDebounced=()=>{this.sideEffect.setTimeout(this._scaleDocsToFitImpl,1e3,"_scaleDocsToFitDebounced")},this.scaleDocsToFit=()=>{this._scaleDocsToFitImpl(),this._scaleDocsToFitDebounced()},this.onNewPageIndex=s=>{this.jumpToPage(s,!0)},this.context=t,this.whiteboardView=i,this.box=n,this.pages=r,this.displayer=t.getDisplayer(),this.viewer=new Kh({readonly:!t.getIsWritable(),box:n,pages:r,onNewPageIndex:this.onNewPageIndex,onPlay:this.onPlayPPT}),this.render(),this.sideEffect.add(()=>{const s=a=>{this.viewer.setReadonly(!a)};return this.context.emitter.on("writableChange",s),()=>this.context.emitter.off("writableChange",s)}),this.sideEffect.add(()=>{const s=a=>{this.jumpToPage(a.index)};return this.context.emitter.on("sceneStateChange",s),()=>this.context.emitter.off("sceneStateChange",s)})}mount(){this.viewer.mount();const t=this.getPageIndex();return t!==0&&this.jumpToPage(t),this.scaleDocsToFit(),this.sideEffect.add(()=>(this.whiteboardView.callbacks.on("onSizeUpdated",this.scaleDocsToFit),()=>{this.whiteboardView.callbacks.off("onSizeUpdated",this.scaleDocsToFit)})),this}unmount(){return this.viewer.unmount(),this}destroy(){this.sideEffect.flushAll(),this.unmount(),this.viewer.destroy()}getPageIndex(){return this.displayer.state.sceneState.index}jumpToPage(t,i){var n,r;if(t=Wi(t,0,this.pages.length-1),t!==this.getPageIndex()&&this.context.getIsWritable()){const s=this.context.getInitScenePath(),a=(r=(n=this.context.getScenes())==null?void 0:n[t])==null?void 0:r.name;s&&a&&this.context.setScenePath(`${s}/${a}`),this.scaleDocsToFit()}if(t!==this.viewer.pageIndex&&this.viewer.setPageIndex(t),i){const s=this.context.getRoom();if(s){const a=s.state.globalState.__pptState;s.setGlobalState({__pptState:a&&{uuid:a.uuid,pageIndex:t,disableAutoPlay:a.disableAutoPlay}})}}}render(){this.viewer.$content.appendChild(this.renderMask()),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.sideEffect.addEventListener(window,"keydown",t=>{var i;if(this.box.focus&&!ep(t.target))switch(t.key){case"ArrowUp":case"ArrowLeft":{this.jumpToPage(this.getPageIndex()-1,!0);break}case"ArrowRight":case"ArrowDown":{(i=this.context.getRoom())==null||i.pptNextStep();break}}})}renderMask(){if(!this.$mask){const t=document.createElement("div");t.className=this.wrapClassName("mask"),this.$mask=t;const i=document.createElement("button");i.className=this.wrapClassName("back");const n=document.createElement("button");n.className=this.wrapClassName("next")}return this.$mask}renderWhiteboardView(){return this.$whiteboardView||(this.$whiteboardView=document.createElement("div"),this.$whiteboardView.className=this.wrapClassName("wb-view"),this.sideEffect.addEventListener(this.$whiteboardView,"click",t=>{var i;const n=this.context.getRoom();if(n&&n.state.memberState.currentApplianceName==="clicker"){for(let r=t.target;r;r=r.parentElement)if((i=r.classList)!=null&&i.contains("ppt-event-source"))return;n.pptNextStep()}}),this.context.mountView(this.$whiteboardView)),this.$whiteboardView}wrapClassName(t){return"netless-app-docs-viewer-dynamic-"+t}}const N0="DocsViewer",Xa={kind:N0,setup(e){const t=e.getBox(),i=e.getScenes();if(!i)throw new Error("[Docs Viewer]: scenes not found.");const n=e.getView();if(!n)throw new Error("[Docs Viewer]: no whiteboard view.");const r=i.map(({ppt:s})=>s?{width:s.width,height:s.height,src:s.src,thumbnail:s.previewURL}:null).filter(s=>Boolean(s));if(r.length<=0)throw new Error("[Docs Viewer]: empty scenes.");t.mountStyles(Aw),r[0].src.startsWith("ppt")?z0(e,n,t,r):D0(e,n,t,r)}};function D0(e,t,i,n){var r;t.disableCameraTransform=!e.getIsWritable();const s=new k0({whiteboardView:t,readonly:!e.getIsWritable(),box:i,pages:n,pageScrollTop:(r=e.getAttributes())==null?void 0:r.pageScrollTop,mountWhiteboard:e.mountView.bind(e),onUserScroll:a=>{var o;((o=e.getAttributes())==null?void 0:o.pageScrollTop)!==a&&!i.readonly&&e.updateAttributes(["pageScrollTop"],a)},baseScenePath:e.getInitScenePath(),appId:e.appId}).mount();s.viewer.onPageIndexChanged=a=>{e.dispatchAppEvent("pageStateChange",{index:a,length:n.length})},e.dispatchAppEvent("pageStateChange",{index:s.viewer.pageIndex,length:n.length}),e.emitter.on("attributesUpdate",a=>{a&&a.pageScrollTop!=null&&s.syncPageScrollTop(a.pageScrollTop)}),e.emitter.on("writableChange",a=>{s.setReadonly(!a),t.disableCameraTransform=!a})}function z0(e,t,i,n){t.disableCameraTransform=!0;const r=new P0({context:e,whiteboardView:t,box:i,pages:n}).mount();r.viewer.onPageIndexChanged=s=>{e.dispatchAppEvent("pageStateChange",{index:s,length:n.length})},e.dispatchAppEvent("pageStateChange",{index:r.getPageIndex(),length:n.length}),e.mountView(r.$whiteboardView),e.isAddApp&&t.callbacks.once("onSizeUpdated",({width:s,height:a})=>{if(n.length>0&&i.state!=="maximized"){const{width:o,height:l}=n[0],h=l/o*s-a;h!==0&&e.getIsWritable()&&e.emitter.emit("setBoxSize",{width:i.width,height:i.height+h/i.containerRect.height})}})}var tp={exports:{}},Qe={},ip={exports:{}},np={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,i,n,r,s;if(typeof window=="undefined"||typeof MessageChannel!="function"){var a=null,o=null,l=function(){if(a!==null)try{var I=e.unstable_now();a(!0,I),a=null}catch(D){throw setTimeout(l,0),D}},u=Date.now();e.unstable_now=function(){return Date.now()-u},t=function(I){a!==null?setTimeout(t,0,I):(a=I,setTimeout(l,0))},i=function(I,D){o=setTimeout(I,D)},n=function(){clearTimeout(o)},r=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var h=window.performance,c=window.Date,m=window.setTimeout,v=window.clearTimeout;if(typeof console!="undefined"){var y=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof y!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof h=="object"&&typeof h.now=="function")e.unstable_now=function(){return h.now()};else{var S=c.now();e.unstable_now=function(){return c.now()-S}}var d=!1,p=null,f=-1,g=5,w=0;r=function(){return e.unstable_now()>=w},s=function(){},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):g=0<I?Math.floor(1e3/I):5};var x=new MessageChannel,b=x.port2;x.port1.onmessage=function(){if(p!==null){var I=e.unstable_now();w=I+g;try{p(!0,I)?b.postMessage(null):(d=!1,p=null)}catch(D){throw b.postMessage(null),D}}else d=!1},t=function(I){p=I,d||(d=!0,b.postMessage(null))},i=function(I,D){f=m(function(){I(e.unstable_now())},D)},n=function(){v(f),f=-1}}function T(I,D){var $=I.length;I.push(D);e:for(;;){var G=$-1>>>1,X=I[G];if(X!==void 0&&0<R(X,D))I[G]=D,I[$]=X,$=G;else break e}}function L(I){return I=I[0],I===void 0?null:I}function k(I){var D=I[0];if(D!==void 0){var $=I.pop();if($!==D){I[0]=$;e:for(var G=0,X=I.length;G<X;){var nt=2*(G+1)-1,Ve=I[nt],Ye=nt+1,Ue=I[Ye];if(Ve!==void 0&&0>R(Ve,$))Ue!==void 0&&0>R(Ue,Ve)?(I[G]=Ue,I[Ye]=$,G=Ye):(I[G]=Ve,I[nt]=$,G=nt);else if(Ue!==void 0&&0>R(Ue,$))I[G]=Ue,I[Ye]=$,G=Ye;else break e}}return D}return null}function R(I,D){var $=I.sortIndex-D.sortIndex;return $!==0?$:I.id-D.id}var C=[],_=[],N=1,j=null,Q=3,fe=!1,Ze=!1,Tt=!1;function kt(I){for(var D=L(_);D!==null;){if(D.callback===null)k(_);else if(D.startTime<=I)k(_),D.sortIndex=D.expirationTime,T(C,D);else break;D=L(_)}}function Pt(I){if(Tt=!1,kt(I),!Ze)if(L(C)!==null)Ze=!0,t(tn);else{var D=L(_);D!==null&&i(Pt,D.startTime-I)}}function tn(I,D){Ze=!1,Tt&&(Tt=!1,n()),fe=!0;var $=Q;try{for(kt(D),j=L(C);j!==null&&(!(j.expirationTime>D)||I&&!r());){var G=j.callback;if(G!==null){j.callback=null,Q=j.priorityLevel;var X=G(j.expirationTime<=D);D=e.unstable_now(),typeof X=="function"?j.callback=X:j===L(C)&&k(C),kt(D)}else k(C);j=L(C)}if(j!==null)var nt=!0;else{var Ve=L(_);Ve!==null&&i(Pt,Ve.startTime-D),nt=!1}return nt}finally{j=null,Q=$,fe=!1}}function ur(I){switch(I){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var qs=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){Ze||fe||(Ze=!0,t(tn))},e.unstable_getCurrentPriorityLevel=function(){return Q},e.unstable_getFirstCallbackNode=function(){return L(C)},e.unstable_next=function(I){switch(Q){case 1:case 2:case 3:var D=3;break;default:D=Q}var $=Q;Q=D;try{return I()}finally{Q=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=qs,e.unstable_runWithPriority=function(I,D){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var $=Q;Q=I;try{return D()}finally{Q=$}},e.unstable_scheduleCallback=function(I,D,$){var G=e.unstable_now();if(typeof $=="object"&&$!==null){var X=$.delay;X=typeof X=="number"&&0<X?G+X:G,$=typeof $.timeout=="number"?$.timeout:ur(I)}else $=ur(I),X=G;return $=X+$,I={id:N++,callback:D,priorityLevel:I,startTime:X,expirationTime:$,sortIndex:-1},X>G?(I.sortIndex=X,T(_,I),L(C)===null&&I===L(_)&&(Tt?n():Tt=!0,i(Pt,X-G))):(I.sortIndex=$,T(C,I),Ze||fe||(Ze=!0,t(tn))),I},e.unstable_shouldYield=function(){var I=e.unstable_now();kt(I);var D=L(C);return D!==j&&j!==null&&D!==null&&D.callback!==null&&D.startTime<=I&&D.expirationTime<j.expirationTime||r()},e.unstable_wrapCallback=function(I){var D=Q;return function(){var $=Q;Q=D;try{return I.apply(this,arguments)}finally{Q=$}}}})(np);ip.exports=np;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vs=Si.exports,Ce=Ld,ge=ip.exports;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Vs)throw Error(M(227));function L0(e,t,i,n,r,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(i,u)}catch(h){this.onError(h)}}var An=!1,rs=null,ss=!1,Ja=null,R0={onError:function(e){An=!0,rs=e}};function j0(e,t,i,n,r,s,a,o,l){An=!1,rs=null,L0.apply(R0,arguments)}function B0(e,t,i,n,r,s,a,o,l){if(j0.apply(this,arguments),An){if(An){var u=rs;An=!1,rs=null}else throw Error(M(198));ss||(ss=!0,Ja=u)}}var Sl=null,rp=null,sp=null;function uc(e,t,i){var n=e.type||"unknown-event";e.currentTarget=sp(i),B0(n,t,void 0,e),e.currentTarget=null}var as=null,bi={};function ap(){if(as)for(var e in bi){var t=bi[e],i=as.indexOf(e);if(!(-1<i))throw Error(M(96,e));if(!os[i]){if(!t.extractEvents)throw Error(M(97,e));os[i]=t,i=t.eventTypes;for(var n in i){var r=void 0,s=i[n],a=t,o=n;if(Ka.hasOwnProperty(o))throw Error(M(99,o));Ka[o]=s;var l=s.phasedRegistrationNames;if(l){for(r in l)l.hasOwnProperty(r)&&cc(l[r],a,o);r=!0}else s.registrationName?(cc(s.registrationName,a,o),r=!0):r=!1;if(!r)throw Error(M(98,n,e))}}}}function cc(e,t,i){if(Hi[e])throw Error(M(100,e));Hi[e]=t,Ml[e]=t.eventTypes[i].dependencies}var os=[],Ka={},Hi={},Ml={};function op(e){var t=!1,i;for(i in e)if(e.hasOwnProperty(i)){var n=e[i];if(!bi.hasOwnProperty(i)||bi[i]!==n){if(bi[i])throw Error(M(102,i));bi[i]=n,t=!0}}t&&ap()}var qt=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),qa=null,Li=null,Ri=null;function dc(e){if(e=rp(e)){if(typeof qa!="function")throw Error(M(280));var t=e.stateNode;t&&(t=Sl(t),qa(e.stateNode,e.type,t))}}function lp(e){Li?Ri?Ri.push(e):Ri=[e]:Li=e}function up(){if(Li){var e=Li,t=Ri;if(Ri=Li=null,dc(e),t)for(e=0;e<t.length;e++)dc(t[e])}}function Cl(e,t){return e(t)}function cp(e,t,i,n,r){return e(t,i,n,r)}function Il(){}var dp=Cl,ni=!1,ga=!1;function bl(){(Li!==null||Ri!==null)&&(Il(),up())}function hp(e,t,i){if(ga)return e(t,i);ga=!0;try{return dp(e,t,i)}finally{ga=!1,bl()}}var _0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hc=Object.prototype.hasOwnProperty,pc={},fc={};function O0(e){return hc.call(fc,e)?!0:hc.call(pc,e)?!1:_0.test(e)?fc[e]=!0:(pc[e]=!0,!1)}function V0(e,t,i,n){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function U0(e,t,i,n){if(t===null||typeof t=="undefined"||V0(e,t,i,n))return!0;if(n)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ie(e,t,i,n,r,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s}var me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){me[e]=new Ie(e,0,!1,e,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];me[t]=new Ie(t,1,!1,e[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){me[e]=new Ie(e,2,!1,e.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){me[e]=new Ie(e,2,!1,e,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){me[e]=new Ie(e,3,!1,e.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(e){me[e]=new Ie(e,3,!0,e,null,!1)});["capture","download"].forEach(function(e){me[e]=new Ie(e,4,!1,e,null,!1)});["cols","rows","size","span"].forEach(function(e){me[e]=new Ie(e,6,!1,e,null,!1)});["rowSpan","start"].forEach(function(e){me[e]=new Ie(e,5,!1,e.toLowerCase(),null,!1)});var Al=/[\-:]([a-z])/g;function El(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Al,El);me[t]=new Ie(t,1,!1,e,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Al,El);me[t]=new Ie(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Al,El);me[t]=new Ie(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(e){me[e]=new Ie(e,1,!1,e.toLowerCase(),null,!1)});me.xlinkHref=new Ie("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(e){me[e]=new Ie(e,1,!1,e.toLowerCase(),null,!0)});var et=Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;et.hasOwnProperty("ReactCurrentDispatcher")||(et.ReactCurrentDispatcher={current:null});et.hasOwnProperty("ReactCurrentBatchConfig")||(et.ReactCurrentBatchConfig={suspense:null});function Tl(e,t,i,n){var r=me.hasOwnProperty(t)?me[t]:null,s=r!==null?r.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");s||(U0(t,i,r,n)&&(i=null),n||r===null?O0(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=i===null?r.type===3?!1:"":i:(t=r.attributeName,n=r.attributeNamespace,i===null?e.removeAttribute(t):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}var W0=/^(.*)[\\\/]/,Ne=typeof Symbol=="function"&&Symbol.for,xr=Ne?Symbol.for("react.element"):60103,Ai=Ne?Symbol.for("react.portal"):60106,ii=Ne?Symbol.for("react.fragment"):60107,pp=Ne?Symbol.for("react.strict_mode"):60108,Br=Ne?Symbol.for("react.profiler"):60114,fp=Ne?Symbol.for("react.provider"):60109,gp=Ne?Symbol.for("react.context"):60110,H0=Ne?Symbol.for("react.concurrent_mode"):60111,kl=Ne?Symbol.for("react.forward_ref"):60112,_r=Ne?Symbol.for("react.suspense"):60113,eo=Ne?Symbol.for("react.suspense_list"):60120,Pl=Ne?Symbol.for("react.memo"):60115,mp=Ne?Symbol.for("react.lazy"):60116,vp=Ne?Symbol.for("react.block"):60121,gc=typeof Symbol=="function"&&Symbol.iterator;function sn(e){return e===null||typeof e!="object"?null:(e=gc&&e[gc]||e["@@iterator"],typeof e=="function"?e:null)}function $0(e){if(e._status===-1){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then(function(i){e._status===0&&(i=i.default,e._status=1,e._result=i)},function(i){e._status===0&&(e._status=2,e._result=i)})}}function bt(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ii:return"Fragment";case Ai:return"Portal";case Br:return"Profiler";case pp:return"StrictMode";case _r:return"Suspense";case eo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gp:return"Context.Consumer";case fp:return"Context.Provider";case kl:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Pl:return bt(e.type);case vp:return bt(e.render);case mp:if(e=e._status===1?e._result:null)return bt(e)}return null}function Nl(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var i="";break e;default:var n=e._debugOwner,r=e._debugSource,s=bt(e.type);i=null,n&&(i=bt(n.type)),n=s,s="",r?s=" (at "+r.fileName.replace(W0,"")+":"+r.lineNumber+")":i&&(s=" (created by "+i+")"),i=`
    in `+(n||"Unknown")+s}t+=i,e=e.return}while(e);return t}function Yt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function wp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function F0(e){var t=wp(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof i!="undefined"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sr(e){e._valueTracker||(e._valueTracker=F0(e))}function yp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=wp(e)?e.checked?"true":"false":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function to(e,t){var i=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:e._wrapperState.initialChecked})}function mc(e,t){var i=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;i=Yt(t.value!=null?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xp(e,t){t=t.checked,t!=null&&Tl(e,"checked",t,!1)}function io(e,t){xp(e,t);var i=Yt(t.value),n=t.type;if(i!=null)n==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?no(e,t.type,i):t.hasOwnProperty("defaultValue")&&no(e,t.type,Yt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vc(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function no(e,t,i){(t!=="number"||e.ownerDocument.activeElement!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function Q0(e){var t="";return Vs.Children.forEach(e,function(i){i!=null&&(t+=i)}),t}function ro(e,t){return e=Ce({children:void 0},t),(t=Q0(t.children))&&(e.children=t),e}function ji(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+Yt(i),t=null,r=0;r<e.length;r++){if(e[r].value===i){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function so(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wc(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(M(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(M(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Yt(i)}}function Sp(e,t){var i=Yt(t.value),n=Yt(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),n!=null&&(e.defaultValue=""+n)}function yc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var Mp={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Cp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ao(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Cp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Mr,Ip=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,i,n,r){MSApp.execUnsafeLocalFunction(function(){return e(t,i,n,r)})}:e}(function(e,t){if(e.namespaceURI!==Mp.svg||"innerHTML"in e)e.innerHTML=t;else{for(Mr=Mr||document.createElement("div"),Mr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Mr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function On(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}function Cr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ei={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionend:Cr("Transition","TransitionEnd")},ma={},bp={};qt&&(bp=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function Us(e){if(ma[e])return ma[e];if(!Ei[e])return e;var t=Ei[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in bp)return ma[e]=t[i];return e}var Ap=Us("animationend"),Ep=Us("animationiteration"),Tp=Us("animationstart"),kp=Us("transitionend"),mn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xc=new(typeof WeakMap=="function"?WeakMap:Map);function Dl(e){var t=xc.get(e);return t===void 0&&(t=new Map,xc.set(e,t)),t}function Ci(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.effectTag&1026)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Pp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sc(e){if(Ci(e)!==e)throw Error(M(188))}function Z0(e){var t=e.alternate;if(!t){if(t=Ci(e),t===null)throw Error(M(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){i=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return Sc(r),e;if(s===n)return Sc(r),t;s=s.sibling}throw Error(M(188))}if(i.return!==n.return)i=r,n=s;else{for(var a=!1,o=r.child;o;){if(o===i){a=!0,i=r,n=s;break}if(o===n){a=!0,n=r,i=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===i){a=!0,i=s,n=r;break}if(o===n){a=!0,n=s,i=r;break}o=o.sibling}if(!a)throw Error(M(189))}}if(i.alternate!==n)throw Error(M(190))}if(i.tag!==3)throw Error(M(188));return i.stateNode.current===i?e:t}function Np(e){if(e=Z0(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function $i(e,t){if(t==null)throw Error(M(30));return e==null?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function zl(e,t,i){Array.isArray(e)?e.forEach(t,i):e&&t.call(i,e)}var an=null;function Y0(e){if(e){var t=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)uc(e,t[n],i[n]);else t&&uc(e,t,i);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function Ws(e){if(e!==null&&(an=$i(an,e)),e=an,an=null,e){if(zl(e,Y0),an)throw Error(M(95));if(ss)throw e=Ja,ss=!1,Ja=null,e}}function Ll(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}function Dp(e){if(!qt)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t=typeof t[e]=="function"),t}var ls=[];function zp(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ls.length&&ls.push(e)}function Lp(e,t,i,n){if(ls.length){var r=ls.pop();return r.topLevelType=e,r.eventSystemFlags=n,r.nativeEvent=t,r.targetInst=i,r}return{topLevelType:e,eventSystemFlags:n,nativeEvent:t,targetInst:i,ancestors:[]}}function Rp(e){var t=e.targetInst,i=t;do{if(!i){e.ancestors.push(i);break}var n=i;if(n.tag===3)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=n.tag!==3?null:n.stateNode.containerInfo}if(!n)break;t=i.tag,t!==5&&t!==6||e.ancestors.push(i),i=nr(n)}while(i);for(i=0;i<e.ancestors.length;i++){t=e.ancestors[i];var r=Ll(e.nativeEvent);n=e.topLevelType;var s=e.nativeEvent,a=e.eventSystemFlags;i===0&&(a|=64);for(var o=null,l=0;l<os.length;l++){var u=os[l];u&&(u=u.extractEvents(n,t,s,r,a))&&(o=$i(o,u))}Ws(o)}}function oo(e,t,i){if(!i.has(e)){switch(e){case"scroll":vn(t,"scroll",!0);break;case"focus":case"blur":vn(t,"focus",!0),vn(t,"blur",!0),i.set("blur",null),i.set("focus",null);break;case"cancel":case"close":Dp(e)&&vn(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:mn.indexOf(e)===-1&&te(e,t)}i.set(e,null)}}var jp,Rl,Bp,lo=!1,ut=[],Ut=null,Wt=null,Ht=null,Vn=new Map,Un=new Map,on=[],uo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),G0="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function X0(e,t){var i=Dl(t);uo.forEach(function(n){oo(n,t,i)}),G0.forEach(function(n){oo(n,t,i)})}function co(e,t,i,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:i|32,nativeEvent:r,container:n}}function Mc(e,t){switch(e){case"focus":case"blur":Ut=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":Ht=null;break;case"pointerover":case"pointerout":Vn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Un.delete(t.pointerId)}}function ln(e,t,i,n,r,s){return e===null||e.nativeEvent!==s?(e=co(t,i,n,r,s),t!==null&&(t=rr(t),t!==null&&Rl(t)),e):(e.eventSystemFlags|=n,e)}function J0(e,t,i,n,r){switch(t){case"focus":return Ut=ln(Ut,e,t,i,n,r),!0;case"dragenter":return Wt=ln(Wt,e,t,i,n,r),!0;case"mouseover":return Ht=ln(Ht,e,t,i,n,r),!0;case"pointerover":var s=r.pointerId;return Vn.set(s,ln(Vn.get(s)||null,e,t,i,n,r)),!0;case"gotpointercapture":return s=r.pointerId,Un.set(s,ln(Un.get(s)||null,e,t,i,n,r)),!0}return!1}function K0(e){var t=nr(e.target);if(t!==null){var i=Ci(t);if(i!==null){if(t=i.tag,t===13){if(t=Pp(i),t!==null){e.blockedOn=t,ge.unstable_runWithPriority(e.priority,function(){Bp(i)});return}}else if(t===3&&i.stateNode.hydrate){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Or(e){if(e.blockedOn!==null)return!1;var t=_l(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(t!==null){var i=rr(t);return i!==null&&Rl(i),e.blockedOn=t,!1}return!0}function Cc(e,t,i){Or(e)&&i.delete(t)}function q0(){for(lo=!1;0<ut.length;){var e=ut[0];if(e.blockedOn!==null){e=rr(e.blockedOn),e!==null&&jp(e);break}var t=_l(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);t!==null?e.blockedOn=t:ut.shift()}Ut!==null&&Or(Ut)&&(Ut=null),Wt!==null&&Or(Wt)&&(Wt=null),Ht!==null&&Or(Ht)&&(Ht=null),Vn.forEach(Cc),Un.forEach(Cc)}function un(e,t){e.blockedOn===t&&(e.blockedOn=null,lo||(lo=!0,ge.unstable_scheduleCallback(ge.unstable_NormalPriority,q0)))}function _p(e){function t(r){return un(r,e)}if(0<ut.length){un(ut[0],e);for(var i=1;i<ut.length;i++){var n=ut[i];n.blockedOn===e&&(n.blockedOn=null)}}for(Ut!==null&&un(Ut,e),Wt!==null&&un(Wt,e),Ht!==null&&un(Ht,e),Vn.forEach(t),Un.forEach(t),i=0;i<on.length;i++)n=on[i],n.blockedOn===e&&(n.blockedOn=null);for(;0<on.length&&(i=on[0],i.blockedOn===null);)K0(i),i.blockedOn===null&&on.shift()}var Op={},Vp=new Map,jl=new Map,ex=["abort","abort",Ap,"animationEnd",Ep,"animationIteration",Tp,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",kp,"transitionEnd","waiting","waiting"];function Bl(e,t){for(var i=0;i<e.length;i+=2){var n=e[i],r=e[i+1],s="on"+(r[0].toUpperCase()+r.slice(1));s={phasedRegistrationNames:{bubbled:s,captured:s+"Capture"},dependencies:[n],eventPriority:t},jl.set(n,t),Vp.set(n,s),Op[r]=s}}Bl("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Bl("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Bl(ex,2);for(var Ic="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),va=0;va<Ic.length;va++)jl.set(Ic[va],0);var tx=ge.unstable_UserBlockingPriority,ix=ge.unstable_runWithPriority,Vr=!0;function te(e,t){vn(t,e,!1)}function vn(e,t,i){var n=jl.get(t);switch(n===void 0?2:n){case 0:n=nx.bind(null,t,1,e);break;case 1:n=rx.bind(null,t,1,e);break;default:n=Hs.bind(null,t,1,e)}i?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function nx(e,t,i,n){ni||Il();var r=Hs,s=ni;ni=!0;try{cp(r,e,t,i,n)}finally{(ni=s)||bl()}}function rx(e,t,i,n){ix(tx,Hs.bind(null,e,t,i,n))}function Hs(e,t,i,n){if(Vr)if(0<ut.length&&-1<uo.indexOf(e))e=co(null,e,t,i,n),ut.push(e);else{var r=_l(e,t,i,n);if(r===null)Mc(e,n);else if(-1<uo.indexOf(e))e=co(r,e,t,i,n),ut.push(e);else if(!J0(r,e,t,i,n)){Mc(e,n),e=Lp(e,n,null,t);try{hp(Rp,e)}finally{zp(e)}}}}function _l(e,t,i,n){if(i=Ll(n),i=nr(i),i!==null){var r=Ci(i);if(r===null)i=null;else{var s=r.tag;if(s===13){if(i=Pp(r),i!==null)return i;i=null}else if(s===3){if(r.stateNode.hydrate)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}e=Lp(e,n,i,t);try{hp(Rp,e)}finally{zp(e)}return null}var En={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sx=["Webkit","ms","Moz","O"];Object.keys(En).forEach(function(e){sx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),En[t]=En[e]})});function Up(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||En.hasOwnProperty(e)&&En[e]?(""+t).trim():t+"px"}function Wp(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var n=i.indexOf("--")===0,r=Up(i,t[i],n);i==="float"&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}var ax=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ho(e,t){if(t){if(ax[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e,""));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62,""))}}function po(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bc=Mp.html;function vt(e,t){e=e.nodeType===9||e.nodeType===11?e:e.ownerDocument;var i=Dl(e);t=Ml[t];for(var n=0;n<t.length;n++)oo(t[n],e,i)}function us(){}function fo(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ac(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ec(e,t){var i=Ac(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ac(i)}}function Hp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Hp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Tc(){for(var e=window,t=fo();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=fo(e.document)}return t}function go(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var $p="$",Fp="/$",Ol="$?",Vl="$!",wa=null,ya=null;function Qp(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function mo(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xa=typeof setTimeout=="function"?setTimeout:void 0,ox=typeof clearTimeout=="function"?clearTimeout:void 0;function Bi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function kc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i===$p||i===Vl||i===Ol){if(t===0)return e;t--}else i===Fp&&t++}e=e.previousSibling}return null}var Ul=Math.random().toString(36).slice(2),Lt="__reactInternalInstance$"+Ul,cs="__reactEventHandlers$"+Ul,ir="__reactContainere$"+Ul;function nr(e){var t=e[Lt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ir]||i[Lt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=kc(e);e!==null;){if(i=e[Lt])return i;e=kc(e)}return t}e=i,i=e.parentNode}return null}function rr(e){return e=e[Lt]||e[ir],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function Wl(e){return e[cs]||null}function wt(e){do e=e.return;while(e&&e.tag!==5);return e||null}function Zp(e,t){var i=e.stateNode;if(!i)return null;var n=Sl(i);if(!n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(M(231,t,typeof i));return i}function Pc(e,t,i){(t=Zp(e,i.dispatchConfig.phasedRegistrationNames[t]))&&(i._dispatchListeners=$i(i._dispatchListeners,t),i._dispatchInstances=$i(i._dispatchInstances,e))}function lx(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,i=[];t;)i.push(t),t=wt(t);for(t=i.length;0<t--;)Pc(i[t],"captured",e);for(t=0;t<i.length;t++)Pc(i[t],"bubbled",e)}}function vo(e,t,i){e&&i&&i.dispatchConfig.registrationName&&(t=Zp(e,i.dispatchConfig.registrationName))&&(i._dispatchListeners=$i(i._dispatchListeners,t),i._dispatchInstances=$i(i._dispatchInstances,e))}function ux(e){e&&e.dispatchConfig.registrationName&&vo(e._targetInst,null,e)}function Fi(e){zl(e,lx)}var Rt=null,Hl=null,Ur=null;function Yp(){if(Ur)return Ur;var e,t=Hl,i=t.length,n,r="value"in Rt?Rt.value:Rt.textContent,s=r.length;for(e=0;e<i&&t[e]===r[e];e++);var a=i-e;for(n=1;n<=a&&t[i-n]===r[s-n];n++);return Ur=r.slice(e,1<n?1-n:void 0)}function Wr(){return!0}function ds(){return!1}function Oe(e,t,i,n){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=i,e=this.constructor.Interface;for(var r in e)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(i):r==="target"?this.target=n:this[r]=i[r]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wr:ds,this.isPropagationStopped=ds,this}Ce(Oe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){this.isPersistent=Wr},isPersistent:ds,destructor:function(){var e=this.constructor.Interface,t;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ds,this._dispatchInstances=this._dispatchListeners=null}});Oe.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};Oe.extend=function(e){function t(){}function i(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var r=new t;return Ce(r,i.prototype),i.prototype=r,i.prototype.constructor=i,i.Interface=Ce({},n.Interface,e),i.extend=n.extend,Gp(i),i};Gp(Oe);function cx(e,t,i,n){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,i,n),r}return new this(e,t,i,n)}function dx(e){if(!(e instanceof this))throw Error(M(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Gp(e){e.eventPool=[],e.getPooled=cx,e.release=dx}var hx=Oe.extend({data:null}),px=Oe.extend({data:null}),fx=[9,13,27,32],$l=qt&&"CompositionEvent"in window,Tn=null;qt&&"documentMode"in document&&(Tn=document.documentMode);var gx=qt&&"TextEvent"in window&&!Tn,Xp=qt&&(!$l||Tn&&8<Tn&&11>=Tn),Nc=String.fromCharCode(32),mt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Dc=!1;function Jp(e,t){switch(e){case"keyup":return fx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Kp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ti=!1;function mx(e,t){switch(e){case"compositionend":return Kp(t);case"keypress":return t.which!==32?null:(Dc=!0,Nc);case"textInput":return e=t.data,e===Nc&&Dc?null:e;default:return null}}function vx(e,t){if(Ti)return e==="compositionend"||!$l&&Jp(e,t)?(e=Yp(),Ur=Hl=Rt=null,Ti=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xp&&t.locale!=="ko"?null:t.data;default:return null}}var wx={eventTypes:mt,extractEvents:function(e,t,i,n){var r;if($l)e:{switch(e){case"compositionstart":var s=mt.compositionStart;break e;case"compositionend":s=mt.compositionEnd;break e;case"compositionupdate":s=mt.compositionUpdate;break e}s=void 0}else Ti?Jp(e,i)&&(s=mt.compositionEnd):e==="keydown"&&i.keyCode===229&&(s=mt.compositionStart);return s?(Xp&&i.locale!=="ko"&&(Ti||s!==mt.compositionStart?s===mt.compositionEnd&&Ti&&(r=Yp()):(Rt=n,Hl="value"in Rt?Rt.value:Rt.textContent,Ti=!0)),s=hx.getPooled(s,t,i,n),r?s.data=r:(r=Kp(i),r!==null&&(s.data=r)),Fi(s),r=s):r=null,(e=gx?mx(e,i):vx(e,i))?(t=px.getPooled(mt.beforeInput,t,i,n),t.data=e,Fi(t)):t=null,r===null?t:t===null?r:[r,t]}},yx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yx[e.type]:t==="textarea"}var ef={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function tf(e,t,i){return e=Oe.getPooled(ef.change,e,t,i),e.type="change",lp(i),Fi(e),e}var kn=null,Wn=null;function xx(e){Ws(e)}function $s(e){var t=vi(e);if(yp(t))return e}function Sx(e,t){if(e==="change")return t}var wo=!1;qt&&(wo=Dp("input")&&(!document.documentMode||9<document.documentMode));function zc(){kn&&(kn.detachEvent("onpropertychange",nf),Wn=kn=null)}function nf(e){if(e.propertyName==="value"&&$s(Wn))if(e=tf(Wn,e,Ll(e)),ni)Ws(e);else{ni=!0;try{Cl(xx,e)}finally{ni=!1,bl()}}}function Mx(e,t,i){e==="focus"?(zc(),kn=t,Wn=i,kn.attachEvent("onpropertychange",nf)):e==="blur"&&zc()}function Cx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $s(Wn)}function Ix(e,t){if(e==="click")return $s(t)}function bx(e,t){if(e==="input"||e==="change")return $s(t)}var Ax={eventTypes:ef,_isInputEventSupported:wo,extractEvents:function(e,t,i,n){var r=t?vi(t):window,s=r.nodeName&&r.nodeName.toLowerCase();if(s==="select"||s==="input"&&r.type==="file")var a=Sx;else if(qp(r))if(wo)a=bx;else{a=Cx;var o=Mx}else(s=r.nodeName)&&s.toLowerCase()==="input"&&(r.type==="checkbox"||r.type==="radio")&&(a=Ix);if(a&&(a=a(e,t)))return tf(a,i,n);o&&o(e,r,t),e==="blur"&&(e=r._wrapperState)&&e.controlled&&r.type==="number"&&no(r,"number",r.value)}},sr=Oe.extend({view:null,detail:null}),Ex={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ex[e])?!!t[e]:!1}function Fl(){return Tx}var Lc=0,Rc=0,jc=!1,Bc=!1,ar=sr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Fl,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Lc;return Lc=e.screenX,jc?e.type==="mousemove"?e.screenX-t:0:(jc=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Rc;return Rc=e.screenY,Bc?e.type==="mousemove"?e.screenY-t:0:(Bc=!0,0)}}),rf=ar.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),cn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},kx={eventTypes:cn,extractEvents:function(e,t,i,n,r){var s=e==="mouseover"||e==="pointerover",a=e==="mouseout"||e==="pointerout";if(s&&(r&32)===0&&(i.relatedTarget||i.fromElement)||!a&&!s)return null;if(s=n.window===n?n:(s=n.ownerDocument)?s.defaultView||s.parentWindow:window,a){if(a=t,t=(t=i.relatedTarget||i.toElement)?nr(t):null,t!==null){var o=Ci(t);(t!==o||t.tag!==5&&t.tag!==6)&&(t=null)}}else a=null;if(a===t)return null;if(e==="mouseout"||e==="mouseover")var l=ar,u=cn.mouseLeave,h=cn.mouseEnter,c="mouse";else(e==="pointerout"||e==="pointerover")&&(l=rf,u=cn.pointerLeave,h=cn.pointerEnter,c="pointer");if(e=a==null?s:vi(a),s=t==null?s:vi(t),u=l.getPooled(u,a,i,n),u.type=c+"leave",u.target=e,u.relatedTarget=s,i=l.getPooled(h,t,i,n),i.type=c+"enter",i.target=s,i.relatedTarget=e,n=a,c=t,n&&c)e:{for(l=n,h=c,a=0,e=l;e;e=wt(e))a++;for(e=0,t=h;t;t=wt(t))e++;for(;0<a-e;)l=wt(l),a--;for(;0<e-a;)h=wt(h),e--;for(;a--;){if(l===h||l===h.alternate)break e;l=wt(l),h=wt(h)}l=null}else l=null;for(h=l,l=[];n&&n!==h&&(a=n.alternate,!(a!==null&&a===h));)l.push(n),n=wt(n);for(n=[];c&&c!==h&&(a=c.alternate,!(a!==null&&a===h));)n.push(c),c=wt(c);for(c=0;c<l.length;c++)vo(l[c],"bubbled",u);for(c=n.length;0<c--;)vo(n[c],"captured",i);return(r&64)===0?[u]:[u,i]}};function Px(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wi=typeof Object.is=="function"?Object.is:Px,Nx=Object.prototype.hasOwnProperty;function Hn(e,t){if(wi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!Nx.call(t,i[n])||!wi(e[i[n]],t[i[n]]))return!1;return!0}var Dx=qt&&"documentMode"in document&&11>=document.documentMode,sf={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ki=null,yo=null,Pn=null,xo=!1;function _c(e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;return xo||ki==null||ki!==fo(i)?null:(i=ki,"selectionStart"in i&&go(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Pn&&Hn(Pn,i)?null:(Pn=i,e=Oe.getPooled(sf.select,yo,e,t),e.type="select",e.target=ki,Fi(e),e))}var zx={eventTypes:sf,extractEvents:function(e,t,i,n,r,s){if(r=s||(n.window===n?n.document:n.nodeType===9?n:n.ownerDocument),!(s=!r)){e:{r=Dl(r),s=Ml.onSelect;for(var a=0;a<s.length;a++)if(!r.has(s[a])){r=!1;break e}r=!0}s=!r}if(s)return null;switch(r=t?vi(t):window,e){case"focus":(qp(r)||r.contentEditable==="true")&&(ki=r,yo=t,Pn=null);break;case"blur":Pn=yo=ki=null;break;case"mousedown":xo=!0;break;case"contextmenu":case"mouseup":case"dragend":return xo=!1,_c(i,n);case"selectionchange":if(Dx)break;case"keydown":case"keyup":return _c(i,n)}return null}},Lx=Oe.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Rx=Oe.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jx=sr.extend({relatedTarget:null});function Hr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}var Bx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_x={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ox=sr.extend({key:function(e){if(e.key){var t=Bx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_x[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Fl,charCode:function(e){return e.type==="keypress"?Hr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vx=ar.extend({dataTransfer:null}),Ux=sr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Fl}),Wx=Oe.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Hx=ar.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),$x={eventTypes:Op,extractEvents:function(e,t,i,n){var r=Vp.get(e);if(!r)return null;switch(e){case"keypress":if(Hr(i)===0)return null;case"keydown":case"keyup":e=Ox;break;case"blur":case"focus":e=jx;break;case"click":if(i.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Vx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Ux;break;case Ap:case Ep:case Tp:e=Lx;break;case kp:e=Wx;break;case"scroll":e=sr;break;case"wheel":e=Hx;break;case"copy":case"cut":case"paste":e=Rx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=rf;break;default:e=Oe}return t=e.getPooled(r,t,i,n),Fi(t),t}};if(as)throw Error(M(101));as=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));ap();var Fx=rr;Sl=Wl;rp=Fx;sp=vi;op({SimpleEventPlugin:$x,EnterLeaveEventPlugin:kx,ChangeEventPlugin:Ax,SelectEventPlugin:zx,BeforeInputEventPlugin:wx});var So=[],Pi=-1;function ee(e){0>Pi||(e.current=So[Pi],So[Pi]=null,Pi--)}function ae(e,t){Pi++,So[Pi]=e.current,e.current=t}var Gt={},Se={current:Gt},Te={current:!1},yi=Gt;function Qi(e,t){var i=e.type.contextTypes;if(!i)return Gt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in i)r[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function ke(e){return e=e.childContextTypes,e!=null}function hs(){ee(Te),ee(Se)}function Oc(e,t,i){if(Se.current!==Gt)throw Error(M(168));ae(Se,t),ae(Te,i)}function af(e,t,i){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return i;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(M(108,bt(t)||"Unknown",r));return Ce({},i,{},n)}function $r(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gt,yi=Se.current,ae(Se,e),ae(Te,Te.current),!0}function Vc(e,t,i){var n=e.stateNode;if(!n)throw Error(M(169));i?(e=af(e,t,yi),n.__reactInternalMemoizedMergedChildContext=e,ee(Te),ee(Se),ae(Se,e)):ee(Te),ae(Te,i)}var Qx=ge.unstable_runWithPriority,Ql=ge.unstable_scheduleCallback,of=ge.unstable_cancelCallback,Uc=ge.unstable_requestPaint,Mo=ge.unstable_now,Zx=ge.unstable_getCurrentPriorityLevel,Fs=ge.unstable_ImmediatePriority,lf=ge.unstable_UserBlockingPriority,uf=ge.unstable_NormalPriority,cf=ge.unstable_LowPriority,df=ge.unstable_IdlePriority,hf={},Yx=ge.unstable_shouldYield,Gx=Uc!==void 0?Uc:function(){},xt=null,Fr=null,Sa=!1,Wc=Mo(),We=1e4>Wc?Mo:function(){return Mo()-Wc};function Qs(){switch(Zx()){case Fs:return 99;case lf:return 98;case uf:return 97;case cf:return 96;case df:return 95;default:throw Error(M(332))}}function pf(e){switch(e){case 99:return Fs;case 98:return lf;case 97:return uf;case 96:return cf;case 95:return df;default:throw Error(M(332))}}function Xt(e,t){return e=pf(e),Qx(e,t)}function ff(e,t,i){return e=pf(e),Ql(e,t,i)}function Hc(e){return xt===null?(xt=[e],Fr=Ql(Fs,gf)):xt.push(e),hf}function gt(){if(Fr!==null){var e=Fr;Fr=null,of(e)}gf()}function gf(){if(!Sa&&xt!==null){Sa=!0;var e=0;try{var t=xt;Xt(99,function(){for(;e<t.length;e++){var i=t[e];do i=i(!0);while(i!==null)}}),xt=null}catch(i){throw xt!==null&&(xt=xt.slice(e+1)),Ql(Fs,gt),i}finally{Sa=!1}}}function Qr(e,t,i){return i/=10,1073741821-(((1073741821-e+t/10)/i|0)+1)*i}function qe(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i])}return t}var ps={current:null},fs=null,Ni=null,gs=null;function Zl(){gs=Ni=fs=null}function Yl(e){var t=ps.current;ee(ps),e.type._context._currentValue=t}function mf(e,t){for(;e!==null;){var i=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,i!==null&&i.childExpirationTime<t&&(i.childExpirationTime=t);else if(i!==null&&i.childExpirationTime<t)i.childExpirationTime=t;else break;e=e.return}}function _i(e,t){fs=e,gs=Ni=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.expirationTime>=t&&(ct=!0),e.firstContext=null)}function Fe(e,t){if(gs!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(gs=e,t=1073741823),t={context:e,observedBits:t,next:null},Ni===null){if(fs===null)throw Error(M(308));Ni=t,fs.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ni=Ni.next=t;return e._currentValue}var zt=!1;function Gl(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Xl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function $t(e,t){return e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null},e.next=e}function Ft(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function $c(e,t){var i=e.alternate;i!==null&&Xl(i,e),e=e.updateQueue,i=e.baseQueue,i===null?(e.baseQueue=t.next=t,t.next=t):(t.next=i.next,i.next=t)}function $n(e,t,i,n){var r=e.updateQueue;zt=!1;var s=r.baseQueue,a=r.shared.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}s=a,r.shared.pending=null,o=e.alternate,o!==null&&(o=o.updateQueue,o!==null&&(o.baseQueue=a))}if(s!==null){o=s.next;var l=r.baseState,u=0,h=null,c=null,m=null;if(o!==null){var v=o;do{if(a=v.expirationTime,a<n){var y={expirationTime:v.expirationTime,suspenseConfig:v.suspenseConfig,tag:v.tag,payload:v.payload,callback:v.callback,next:null};m===null?(c=m=y,h=l):m=m.next=y,a>u&&(u=a)}else{m!==null&&(m=m.next={expirationTime:1073741823,suspenseConfig:v.suspenseConfig,tag:v.tag,payload:v.payload,callback:v.callback,next:null}),Qf(a,v.suspenseConfig);e:{var S=e,d=v;switch(a=t,y=i,d.tag){case 1:if(S=d.payload,typeof S=="function"){l=S.call(y,l,a);break e}l=S;break e;case 3:S.effectTag=S.effectTag&-4097|64;case 0:if(S=d.payload,a=typeof S=="function"?S.call(y,l,a):S,a==null)break e;l=Ce({},l,a);break e;case 2:zt=!0}}v.callback!==null&&(e.effectTag|=32,a=r.effects,a===null?r.effects=[v]:a.push(v))}if(v=v.next,v===null||v===o){if(a=r.shared.pending,a===null)break;v=s.next=a.next,a.next=o,r.baseQueue=s=a,r.shared.pending=null}}while(1)}m===null?h=l:m.next=c,r.baseState=h,r.baseQueue=m,Js(u),e.expirationTime=u,e.memoizedState=l}}function Fc(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(r!==null){if(n.callback=null,n=r,r=i,typeof n!="function")throw Error(M(191,n));n.call(r)}}}var Nn=et.ReactCurrentBatchConfig,vf=new Vs.Component().refs;function ms(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:Ce({},t,i),e.memoizedState=i,e.expirationTime===0&&(e.updateQueue.baseState=i)}var Zs={isMounted:function(e){return(e=e._reactInternalFiber)?Ci(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternalFiber;var n=pt(),r=Nn.suspense;n=pi(n,e,r),r=$t(n,r),r.payload=t,i!=null&&(r.callback=i),Ft(e,r),Zt(e,n)},enqueueReplaceState:function(e,t,i){e=e._reactInternalFiber;var n=pt(),r=Nn.suspense;n=pi(n,e,r),r=$t(n,r),r.tag=1,r.payload=t,i!=null&&(r.callback=i),Ft(e,r),Zt(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var i=pt(),n=Nn.suspense;i=pi(i,e,n),n=$t(i,n),n.tag=2,t!=null&&(n.callback=t),Ft(e,n),Zt(e,i)}};function Qc(e,t,i,n,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,a):t.prototype&&t.prototype.isPureReactComponent?!Hn(i,n)||!Hn(r,s):!0}function wf(e,t,i){var n=!1,r=Gt,s=t.contextType;return typeof s=="object"&&s!==null?s=Fe(s):(r=ke(t)?yi:Se.current,n=t.contextTypes,s=(n=n!=null)?Qi(e,r):Gt),t=new t(i,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zs,e.stateNode=t,t._reactInternalFiber=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Zc(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Zs.enqueueReplaceState(t,t.state,null)}function Co(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=vf,Gl(e);var s=t.contextType;typeof s=="object"&&s!==null?r.context=Fe(s):(s=ke(t)?yi:Se.current,r.context=Qi(e,s)),$n(e,i,r,n),r.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ms(e,t,s,i),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Zs.enqueueReplaceState(r,r.state,null),$n(e,i,r,n),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.effectTag|=4)}var Ir=Array.isArray;function dn(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(M(309));var n=i.stateNode}if(!n)throw Error(M(147,e));var r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(s){var a=n.refs;a===vf&&(a=n.refs={}),s===null?delete a[r]:a[r]=s},t._stringRef=r,t)}if(typeof e!="string")throw Error(M(284));if(!i._owner)throw Error(M(290,e))}return e}function br(e,t){if(e.type!=="textarea")throw Error(M(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function yf(e){function t(d,p){if(e){var f=d.lastEffect;f!==null?(f.nextEffect=p,d.lastEffect=p):d.firstEffect=d.lastEffect=p,p.nextEffect=null,p.effectTag=8}}function i(d,p){if(!e)return null;for(;p!==null;)t(d,p),p=p.sibling;return null}function n(d,p){for(d=new Map;p!==null;)p.key!==null?d.set(p.key,p):d.set(p.index,p),p=p.sibling;return d}function r(d,p){return d=xi(d,p),d.index=0,d.sibling=null,d}function s(d,p,f){return d.index=f,e?(f=d.alternate,f!==null?(f=f.index,f<p?(d.effectTag=2,p):f):(d.effectTag=2,p)):p}function a(d){return e&&d.alternate===null&&(d.effectTag=2),d}function o(d,p,f,g){return p===null||p.tag!==6?(p=Ea(f,d.mode,g),p.return=d,p):(p=r(p,f),p.return=d,p)}function l(d,p,f,g){return p!==null&&p.elementType===f.type?(g=r(p,f.props),g.ref=dn(d,p,f),g.return=d,g):(g=Xr(f.type,f.key,f.props,null,d.mode,g),g.ref=dn(d,p,f),g.return=d,g)}function u(d,p,f,g){return p===null||p.tag!==4||p.stateNode.containerInfo!==f.containerInfo||p.stateNode.implementation!==f.implementation?(p=Ta(f,d.mode,g),p.return=d,p):(p=r(p,f.children||[]),p.return=d,p)}function h(d,p,f,g,w){return p===null||p.tag!==7?(p=_t(f,d.mode,g,w),p.return=d,p):(p=r(p,f),p.return=d,p)}function c(d,p,f){if(typeof p=="string"||typeof p=="number")return p=Ea(""+p,d.mode,f),p.return=d,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case xr:return f=Xr(p.type,p.key,p.props,null,d.mode,f),f.ref=dn(d,null,p),f.return=d,f;case Ai:return p=Ta(p,d.mode,f),p.return=d,p}if(Ir(p)||sn(p))return p=_t(p,d.mode,f,null),p.return=d,p;br(d,p)}return null}function m(d,p,f,g){var w=p!==null?p.key:null;if(typeof f=="string"||typeof f=="number")return w!==null?null:o(d,p,""+f,g);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case xr:return f.key===w?f.type===ii?h(d,p,f.props.children,g,w):l(d,p,f,g):null;case Ai:return f.key===w?u(d,p,f,g):null}if(Ir(f)||sn(f))return w!==null?null:h(d,p,f,g,null);br(d,f)}return null}function v(d,p,f,g,w){if(typeof g=="string"||typeof g=="number")return d=d.get(f)||null,o(p,d,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case xr:return d=d.get(g.key===null?f:g.key)||null,g.type===ii?h(p,d,g.props.children,w,g.key):l(p,d,g,w);case Ai:return d=d.get(g.key===null?f:g.key)||null,u(p,d,g,w)}if(Ir(g)||sn(g))return d=d.get(f)||null,h(p,d,g,w,null);br(p,g)}return null}function y(d,p,f,g){for(var w=null,x=null,b=p,T=p=0,L=null;b!==null&&T<f.length;T++){b.index>T?(L=b,b=null):L=b.sibling;var k=m(d,b,f[T],g);if(k===null){b===null&&(b=L);break}e&&b&&k.alternate===null&&t(d,b),p=s(k,p,T),x===null?w=k:x.sibling=k,x=k,b=L}if(T===f.length)return i(d,b),w;if(b===null){for(;T<f.length;T++)b=c(d,f[T],g),b!==null&&(p=s(b,p,T),x===null?w=b:x.sibling=b,x=b);return w}for(b=n(d,b);T<f.length;T++)L=v(b,d,T,f[T],g),L!==null&&(e&&L.alternate!==null&&b.delete(L.key===null?T:L.key),p=s(L,p,T),x===null?w=L:x.sibling=L,x=L);return e&&b.forEach(function(R){return t(d,R)}),w}function S(d,p,f,g){var w=sn(f);if(typeof w!="function")throw Error(M(150));if(f=w.call(f),f==null)throw Error(M(151));for(var x=w=null,b=p,T=p=0,L=null,k=f.next();b!==null&&!k.done;T++,k=f.next()){b.index>T?(L=b,b=null):L=b.sibling;var R=m(d,b,k.value,g);if(R===null){b===null&&(b=L);break}e&&b&&R.alternate===null&&t(d,b),p=s(R,p,T),x===null?w=R:x.sibling=R,x=R,b=L}if(k.done)return i(d,b),w;if(b===null){for(;!k.done;T++,k=f.next())k=c(d,k.value,g),k!==null&&(p=s(k,p,T),x===null?w=k:x.sibling=k,x=k);return w}for(b=n(d,b);!k.done;T++,k=f.next())k=v(b,d,T,k.value,g),k!==null&&(e&&k.alternate!==null&&b.delete(k.key===null?T:k.key),p=s(k,p,T),x===null?w=k:x.sibling=k,x=k);return e&&b.forEach(function(C){return t(d,C)}),w}return function(d,p,f,g){var w=typeof f=="object"&&f!==null&&f.type===ii&&f.key===null;w&&(f=f.props.children);var x=typeof f=="object"&&f!==null;if(x)switch(f.$$typeof){case xr:e:{for(x=f.key,w=p;w!==null;){if(w.key===x){switch(w.tag){case 7:if(f.type===ii){i(d,w.sibling),p=r(w,f.props.children),p.return=d,d=p;break e}break;default:if(w.elementType===f.type){i(d,w.sibling),p=r(w,f.props),p.ref=dn(d,w,f),p.return=d,d=p;break e}}i(d,w);break}else t(d,w);w=w.sibling}f.type===ii?(p=_t(f.props.children,d.mode,g,f.key),p.return=d,d=p):(g=Xr(f.type,f.key,f.props,null,d.mode,g),g.ref=dn(d,p,f),g.return=d,d=g)}return a(d);case Ai:e:{for(w=f.key;p!==null;){if(p.key===w)if(p.tag===4&&p.stateNode.containerInfo===f.containerInfo&&p.stateNode.implementation===f.implementation){i(d,p.sibling),p=r(p,f.children||[]),p.return=d,d=p;break e}else{i(d,p);break}else t(d,p);p=p.sibling}p=Ta(f,d.mode,g),p.return=d,d=p}return a(d)}if(typeof f=="string"||typeof f=="number")return f=""+f,p!==null&&p.tag===6?(i(d,p.sibling),p=r(p,f),p.return=d,d=p):(i(d,p),p=Ea(f,d.mode,g),p.return=d,d=p),a(d);if(Ir(f))return y(d,p,f,g);if(sn(f))return S(d,p,f,g);if(x&&br(d,f),typeof f=="undefined"&&!w)switch(d.tag){case 1:case 0:throw d=d.type,Error(M(152,d.displayName||d.name||"Component"))}return i(d,p)}}var Zi=yf(!0),Jl=yf(!1),or={},ht={current:or},Fn={current:or},Qn={current:or};function ri(e){if(e===or)throw Error(M(174));return e}function Io(e,t){switch(ae(Qn,t),ae(Fn,e),ae(ht,or),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ao(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ao(t,e)}ee(ht),ae(ht,t)}function Yi(){ee(ht),ee(Fn),ee(Qn)}function Yc(e){ri(Qn.current);var t=ri(ht.current),i=ao(t,e.type);t!==i&&(ae(Fn,e),ae(ht,i))}function Kl(e){Fn.current===e&&(ee(ht),ee(Fn))}var se={current:0};function vs(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data===Ol||i.data===Vl))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.effectTag&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ql(e,t){return{responder:e,props:t}}var Zr=et.ReactCurrentDispatcher,He=et.ReactCurrentBatchConfig,jt=0,ue=null,ye=null,xe=null,ws=!1;function De(){throw Error(M(321))}function eu(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!wi(e[i],t[i]))return!1;return!0}function tu(e,t,i,n,r,s){if(jt=s,ue=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Zr.current=e===null||e.memoizedState===null?Xx:Jx,e=i(n,r),t.expirationTime===jt){s=0;do{if(t.expirationTime=0,!(25>s))throw Error(M(301));s+=1,xe=ye=null,t.updateQueue=null,Zr.current=Kx,e=i(n,r)}while(t.expirationTime===jt)}if(Zr.current=Ss,t=ye!==null&&ye.next!==null,jt=0,xe=ye=ue=null,ws=!1,t)throw Error(M(300));return e}function Oi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?ue.memoizedState=xe=e:xe=xe.next=e,xe}function qi(){if(ye===null){var e=ue.alternate;e=e!==null?e.memoizedState:null}else e=ye.next;var t=xe===null?ue.memoizedState:xe.next;if(t!==null)xe=t,ye=e;else{if(e===null)throw Error(M(310));ye=e,e={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},xe===null?ue.memoizedState=xe=e:xe=xe.next=e}return xe}function ci(e,t){return typeof t=="function"?t(e):t}function Ar(e){var t=qi(),i=t.queue;if(i===null)throw Error(M(311));i.lastRenderedReducer=e;var n=ye,r=n.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}n.baseQueue=r=s,i.pending=null}if(r!==null){r=r.next,n=n.baseState;var o=a=s=null,l=r;do{var u=l.expirationTime;if(u<jt){var h={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};o===null?(a=o=h,s=n):o=o.next=h,u>ue.expirationTime&&(ue.expirationTime=u,Js(u))}else o!==null&&(o=o.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),Qf(u,l.suspenseConfig),n=l.eagerReducer===e?l.eagerState:e(n,l.action);l=l.next}while(l!==null&&l!==r);o===null?s=n:o.next=a,wi(n,t.memoizedState)||(ct=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=o,i.lastRenderedState=n}return[t.memoizedState,i.dispatch]}function Er(e){var t=qi(),i=t.queue;if(i===null)throw Error(M(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,s=t.memoizedState;if(r!==null){i.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);wi(s,t.memoizedState)||(ct=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,n]}function Ma(e){var t=Oi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ci,lastRenderedState:e},e=e.dispatch=bf.bind(null,ue,e),[t.memoizedState,e]}function bo(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},t=ue.updateQueue,t===null?(t={lastEffect:null},ue.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e)),e}function xf(){return qi().memoizedState}function Ao(e,t,i,n){var r=Oi();ue.effectTag|=e,r.memoizedState=bo(1|t,i,void 0,n===void 0?null:n)}function iu(e,t,i,n){var r=qi();n=n===void 0?null:n;var s=void 0;if(ye!==null){var a=ye.memoizedState;if(s=a.destroy,n!==null&&eu(n,a.deps)){bo(t,i,s,n);return}}ue.effectTag|=e,r.memoizedState=bo(1|t,i,s,n)}function Gc(e,t){return Ao(516,4,e,t)}function ys(e,t){return iu(516,4,e,t)}function Sf(e,t){return iu(4,2,e,t)}function Mf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cf(e,t,i){return i=i!=null?i.concat([e]):null,iu(4,2,Mf.bind(null,t,e),i)}function nu(){}function Xc(e,t){return Oi().memoizedState=[e,t===void 0?null:t],e}function xs(e,t){var i=qi();t=t===void 0?null:t;var n=i.memoizedState;return n!==null&&t!==null&&eu(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function If(e,t){var i=qi();t=t===void 0?null:t;var n=i.memoizedState;return n!==null&&t!==null&&eu(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function ru(e,t,i){var n=Qs();Xt(98>n?98:n,function(){e(!0)}),Xt(97<n?97:n,function(){var r=He.suspense;He.suspense=t===void 0?null:t;try{e(!1),i()}finally{He.suspense=r}})}function bf(e,t,i){var n=pt(),r=Nn.suspense;n=pi(n,e,r),r={expirationTime:n,suspenseConfig:r,action:i,eagerReducer:null,eagerState:null,next:null};var s=t.pending;if(s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r,s=e.alternate,e===ue||s!==null&&s===ue)ws=!0,r.expirationTime=jt,ue.expirationTime=jt;else{if(e.expirationTime===0&&(s===null||s.expirationTime===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,i);if(r.eagerReducer=s,r.eagerState=o,wi(o,a))return}catch{}finally{}Zt(e,n)}}var Ss={readContext:Fe,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useResponder:De,useDeferredValue:De,useTransition:De},Xx={readContext:Fe,useCallback:Xc,useContext:Fe,useEffect:Gc,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Ao(4,2,Mf.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ao(4,2,e,t)},useMemo:function(e,t){var i=Oi();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=Oi();return t=i!==void 0?i(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=bf.bind(null,ue,e),[n.memoizedState,e]},useRef:function(e){var t=Oi();return e={current:e},t.memoizedState=e},useState:Ma,useDebugValue:nu,useResponder:ql,useDeferredValue:function(e,t){var i=Ma(e),n=i[0],r=i[1];return Gc(function(){var s=He.suspense;He.suspense=t===void 0?null:t;try{r(e)}finally{He.suspense=s}},[e,t]),n},useTransition:function(e){var t=Ma(!1),i=t[0];return t=t[1],[Xc(ru.bind(null,t,e),[t,e]),i]}},Jx={readContext:Fe,useCallback:xs,useContext:Fe,useEffect:ys,useImperativeHandle:Cf,useLayoutEffect:Sf,useMemo:If,useReducer:Ar,useRef:xf,useState:function(){return Ar(ci)},useDebugValue:nu,useResponder:ql,useDeferredValue:function(e,t){var i=Ar(ci),n=i[0],r=i[1];return ys(function(){var s=He.suspense;He.suspense=t===void 0?null:t;try{r(e)}finally{He.suspense=s}},[e,t]),n},useTransition:function(e){var t=Ar(ci),i=t[0];return t=t[1],[xs(ru.bind(null,t,e),[t,e]),i]}},Kx={readContext:Fe,useCallback:xs,useContext:Fe,useEffect:ys,useImperativeHandle:Cf,useLayoutEffect:Sf,useMemo:If,useReducer:Er,useRef:xf,useState:function(){return Er(ci)},useDebugValue:nu,useResponder:ql,useDeferredValue:function(e,t){var i=Er(ci),n=i[0],r=i[1];return ys(function(){var s=He.suspense;He.suspense=t===void 0?null:t;try{r(e)}finally{He.suspense=s}},[e,t]),n},useTransition:function(e){var t=Er(ci),i=t[0];return t=t[1],[xs(ru.bind(null,t,e),[t,e]),i]}},Ct=null,Bt=null,di=!1;function Af(e,t){var i=dt(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.effectTag=8,e.lastEffect!==null?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function Jc(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function Eo(e){if(di){var t=Bt;if(t){var i=t;if(!Jc(e,t)){if(t=Bi(i.nextSibling),!t||!Jc(e,t)){e.effectTag=e.effectTag&-1025|2,di=!1,Ct=e;return}Af(Ct,i)}Ct=e,Bt=Bi(t.firstChild)}else e.effectTag=e.effectTag&-1025|2,di=!1,Ct=e}}function Kc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ct=e}function Tr(e){if(e!==Ct)return!1;if(!di)return Kc(e),di=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!mo(t,e.memoizedProps))for(t=Bt;t;)Af(e,t),t=Bi(t.nextSibling);if(Kc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i===Fp){if(t===0){Bt=Bi(e.nextSibling);break e}t--}else i!==$p&&i!==Vl&&i!==Ol||t++}e=e.nextSibling}Bt=null}}else Bt=Ct?Bi(e.stateNode.nextSibling):null;return!0}function Ca(){Bt=Ct=null,di=!1}var qx=et.ReactCurrentOwner,ct=!1;function ze(e,t,i,n){t.child=e===null?Jl(t,null,i,n):Zi(t,e.child,i,n)}function qc(e,t,i,n,r){i=i.render;var s=t.ref;return _i(t,r),n=tu(e,t,i,n,s,r),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),It(e,t,r)):(t.effectTag|=1,ze(e,t,n,r),t.child)}function ed(e,t,i,n,r,s){if(e===null){var a=i.type;return typeof a=="function"&&!uu(a)&&a.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=a,Ef(e,t,a,n,r,s)):(e=Xr(i.type,null,n,null,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}return a=e.child,r<s&&(r=a.memoizedProps,i=i.compare,i=i!==null?i:Hn,i(r,n)&&e.ref===t.ref)?It(e,t,s):(t.effectTag|=1,e=xi(a,n),e.ref=t.ref,e.return=t,t.child=e)}function Ef(e,t,i,n,r,s){return e!==null&&Hn(e.memoizedProps,n)&&e.ref===t.ref&&(ct=!1,r<s)?(t.expirationTime=e.expirationTime,It(e,t,s)):To(e,t,i,n,s)}function Tf(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.effectTag|=128)}function To(e,t,i,n,r){var s=ke(i)?yi:Se.current;return s=Qi(t,s),_i(t,r),i=tu(e,t,i,n,s,r),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),It(e,t,r)):(t.effectTag|=1,ze(e,t,i,r),t.child)}function td(e,t,i,n,r){if(ke(i)){var s=!0;$r(t)}else s=!1;if(_i(t,r),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),wf(t,i,n),Co(t,i,n,r),n=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=i.contextType;typeof u=="object"&&u!==null?u=Fe(u):(u=ke(i)?yi:Se.current,u=Qi(t,u));var h=i.getDerivedStateFromProps,c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&Zc(t,a,n,u),zt=!1;var m=t.memoizedState;a.state=m,$n(t,n,a,r),l=t.memoizedState,o!==n||m!==l||Te.current||zt?(typeof h=="function"&&(ms(t,i,h,n),l=t.memoizedState),(o=zt||Qc(t,i,o,n,m,l,u))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.effectTag|=4)):(typeof a.componentDidMount=="function"&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(t.effectTag|=4),n=!1)}else a=t.stateNode,Xl(e,t),o=t.memoizedProps,a.props=t.type===t.elementType?o:qe(t.type,o),l=a.context,u=i.contextType,typeof u=="object"&&u!==null?u=Fe(u):(u=ke(i)?yi:Se.current,u=Qi(t,u)),h=i.getDerivedStateFromProps,(c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&Zc(t,a,n,u),zt=!1,l=t.memoizedState,a.state=l,$n(t,n,a,r),m=t.memoizedState,o!==n||l!==m||Te.current||zt?(typeof h=="function"&&(ms(t,i,h,n),m=t.memoizedState),(h=zt||Qc(t,i,o,n,l,m,u))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,u)),typeof a.componentDidUpdate=="function"&&(t.effectTag|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.effectTag|=256)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=m),a.props=n,a.state=m,a.context=u,n=h):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),n=!1);return ko(e,t,i,n,s,r)}function ko(e,t,i,n,r,s){Tf(e,t);var a=(t.effectTag&64)!==0;if(!n&&!a)return r&&Vc(t,i,!1),It(e,t,s);n=t.stateNode,qx.current=t;var o=a&&typeof i.getDerivedStateFromError!="function"?null:n.render();return t.effectTag|=1,e!==null&&a?(t.child=Zi(t,e.child,null,s),t.child=Zi(t,null,o,s)):ze(e,t,o,s),t.memoizedState=n.state,r&&Vc(t,i,!0),t.child}function id(e){var t=e.stateNode;t.pendingContext?Oc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Oc(e,t.context,!1),Io(e,t.containerInfo)}var Ia={dehydrated:null,retryTime:0};function nd(e,t,i){var n=t.mode,r=t.pendingProps,s=se.current,a=!1,o;if((o=(t.effectTag&64)!==0)||(o=(s&2)!==0&&(e===null||e.memoizedState!==null)),o?(a=!0,t.effectTag&=-65):e!==null&&e.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(s|=1),ae(se,s&1),e===null){if(r.fallback!==void 0&&Eo(t),a){if(a=r.fallback,r=_t(null,n,0,null),r.return=t,(t.mode&2)===0)for(e=t.memoizedState!==null?t.child.child:t.child,r.child=e;e!==null;)e.return=r,e=e.sibling;return i=_t(a,n,i,null),i.return=t,r.sibling=i,t.memoizedState=Ia,t.child=r,i}return n=r.children,t.memoizedState=null,t.child=Jl(t,null,n,i)}if(e.memoizedState!==null){if(e=e.child,n=e.sibling,a){if(r=r.fallback,i=xi(e,e.pendingProps),i.return=t,(t.mode&2)===0&&(a=t.memoizedState!==null?t.child.child:t.child,a!==e.child))for(i.child=a;a!==null;)a.return=i,a=a.sibling;return n=xi(n,r),n.return=t,i.sibling=n,i.childExpirationTime=0,t.memoizedState=Ia,t.child=i,n}return i=Zi(t,e.child,r.children,i),t.memoizedState=null,t.child=i}if(e=e.child,a){if(a=r.fallback,r=_t(null,n,0,null),r.return=t,r.child=e,e!==null&&(e.return=r),(t.mode&2)===0)for(e=t.memoizedState!==null?t.child.child:t.child,r.child=e;e!==null;)e.return=r,e=e.sibling;return i=_t(a,n,i,null),i.return=t,r.sibling=i,i.effectTag|=2,r.childExpirationTime=0,t.memoizedState=Ia,t.child=r,i}return t.memoizedState=null,t.child=Zi(t,e,r.children,i)}function rd(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;i!==null&&i.expirationTime<t&&(i.expirationTime=t),mf(e.return,t)}function ba(e,t,i,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailExpiration:0,tailMode:r,lastEffect:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=i,a.tailExpiration=0,a.tailMode=r,a.lastEffect=s)}function sd(e,t,i){var n=t.pendingProps,r=n.revealOrder,s=n.tail;if(ze(e,t,n.children,i),n=se.current,(n&2)!==0)n=n&1|2,t.effectTag|=64;else{if(e!==null&&(e.effectTag&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rd(e,i);else if(e.tag===19)rd(e,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ae(se,n),(t.mode&2)===0)t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;i!==null;)e=i.alternate,e!==null&&vs(e)===null&&(r=i),i=i.sibling;i=r,i===null?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),ba(t,!1,r,i,s,t.lastEffect);break;case"backwards":for(i=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&vs(e)===null){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}ba(t,!0,i,null,s,t.lastEffect);break;case"together":ba(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function It(e,t,i){e!==null&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(n!==0&&Js(n),t.childExpirationTime<i)return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,i=xi(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=xi(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}var kf,Po,Pf,Nf;kf=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Po=function(){};Pf=function(e,t,i,n,r){var s=e.memoizedProps;if(s!==n){var a=t.stateNode;switch(ri(ht.current),e=null,i){case"input":s=to(a,s),n=to(a,n),e=[];break;case"option":s=ro(a,s),n=ro(a,n),e=[];break;case"select":s=Ce({},s,{value:void 0}),n=Ce({},n,{value:void 0}),e=[];break;case"textarea":s=so(a,s),n=so(a,n),e=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(a.onclick=us)}ho(i,n);var o,l;i=null;for(o in s)if(!n.hasOwnProperty(o)&&s.hasOwnProperty(o)&&s[o]!=null)if(o==="style")for(l in a=s[o],a)a.hasOwnProperty(l)&&(i||(i={}),i[l]="");else o!=="dangerouslySetInnerHTML"&&o!=="children"&&o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Hi.hasOwnProperty(o)?e||(e=[]):(e=e||[]).push(o,null));for(o in n){var u=n[o];if(a=s!=null?s[o]:void 0,n.hasOwnProperty(o)&&u!==a&&(u!=null||a!=null))if(o==="style")if(a){for(l in a)!a.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(i||(i={}),i[l]="");for(l in u)u.hasOwnProperty(l)&&a[l]!==u[l]&&(i||(i={}),i[l]=u[l])}else i||(e||(e=[]),e.push(o,i)),i=u;else o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(e=e||[]).push(o,u)):o==="children"?a===u||typeof u!="string"&&typeof u!="number"||(e=e||[]).push(o,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&(Hi.hasOwnProperty(o)?(u!=null&&vt(r,o),e||a===u||(e=[])):(e=e||[]).push(o,u))}i&&(e=e||[]).push("style",i),r=e,(t.updateQueue=r)&&(t.effectTag|=4)}};Nf=function(e,t,i,n){i!==n&&(t.effectTag|=4)};function kr(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function eS(e,t,i){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ke(t.type)&&hs(),null;case 3:return Yi(),ee(Te),ee(Se),i=t.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),e!==null&&e.child!==null||!Tr(t)||(t.effectTag|=4),Po(t),null;case 5:Kl(t),i=ri(Qn.current);var r=t.type;if(e!==null&&t.stateNode!=null)Pf(e,t,r,n,i),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(t.stateNode===null)throw Error(M(166));return null}if(e=ri(ht.current),Tr(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Lt]=t,n[cs]=s,r){case"iframe":case"object":case"embed":te("load",n);break;case"video":case"audio":for(e=0;e<mn.length;e++)te(mn[e],n);break;case"source":te("error",n);break;case"img":case"image":case"link":te("error",n),te("load",n);break;case"form":te("reset",n),te("submit",n);break;case"details":te("toggle",n);break;case"input":mc(n,s),te("invalid",n),vt(i,"onChange");break;case"select":n._wrapperState={wasMultiple:!!s.multiple},te("invalid",n),vt(i,"onChange");break;case"textarea":wc(n,s),te("invalid",n),vt(i,"onChange")}ho(r,s),e=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(e=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(e=["children",""+o]):Hi.hasOwnProperty(a)&&o!=null&&vt(i,a)}switch(r){case"input":Sr(n),vc(n,s,!0);break;case"textarea":Sr(n),yc(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=us)}i=e,t.updateQueue=i,i!==null&&(t.effectTag|=4)}else{switch(a=i.nodeType===9?i:i.ownerDocument,e===bc&&(e=Cp(r)),e===bc?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Lt]=t,e[cs]=n,kf(e,t,!1,!1),t.stateNode=e,a=po(r,n),r){case"iframe":case"object":case"embed":te("load",e),o=n;break;case"video":case"audio":for(o=0;o<mn.length;o++)te(mn[o],e);o=n;break;case"source":te("error",e),o=n;break;case"img":case"image":case"link":te("error",e),te("load",e),o=n;break;case"form":te("reset",e),te("submit",e),o=n;break;case"details":te("toggle",e),o=n;break;case"input":mc(e,n),o=to(e,n),te("invalid",e),vt(i,"onChange");break;case"option":o=ro(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=Ce({},n,{value:void 0}),te("invalid",e),vt(i,"onChange");break;case"textarea":wc(e,n),o=so(e,n),te("invalid",e),vt(i,"onChange");break;default:o=n}ho(r,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Wp(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ip(e,u)):s==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&On(e,u):typeof u=="number"&&On(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hi.hasOwnProperty(s)?u!=null&&vt(i,s):u!=null&&Tl(e,s,u,a))}switch(r){case"input":Sr(e),vc(e,n,!1);break;case"textarea":Sr(e),yc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Yt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ji(e,!!n.multiple,i,!1):n.defaultValue!=null&&ji(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=us)}Qp(r,n)&&(t.effectTag|=4)}t.ref!==null&&(t.effectTag|=128)}return null;case 6:if(e&&t.stateNode!=null)Nf(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(M(166));i=ri(Qn.current),ri(ht.current),Tr(t)?(i=t.stateNode,n=t.memoizedProps,i[Lt]=t,i.nodeValue!==n&&(t.effectTag|=4)):(i=(i.nodeType===9?i:i.ownerDocument).createTextNode(n),i[Lt]=t,t.stateNode=i)}return null;case 13:return ee(se),n=t.memoizedState,(t.effectTag&64)!==0?(t.expirationTime=i,t):(i=n!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&Tr(t):(r=e.memoizedState,n=r!==null,i||r===null||(r=e.child.sibling,r!==null&&(s=t.firstEffect,s!==null?(t.firstEffect=r,r.nextEffect=s):(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8))),i&&!n&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(se.current&1)!==0?he===hi&&(he=Is):((he===hi||he===Is)&&(he=Ys),Yn!==0&&Be!==null&&(oi(Be,Pe),Jf(Be,Yn)))),(i||n)&&(t.effectTag|=4),null);case 4:return Yi(),Po(t),null;case 10:return Yl(t),null;case 17:return ke(t.type)&&hs(),null;case 19:if(ee(se),n=t.memoizedState,n===null)return null;if(r=(t.effectTag&64)!==0,s=n.rendering,s===null){if(r)kr(n,!1);else if(he!==hi||e!==null&&(e.effectTag&64)!==0)for(s=t.child;s!==null;){if(e=vs(s),e!==null){for(t.effectTag|=64,kr(n,!1),r=e.updateQueue,r!==null&&(t.updateQueue=r,t.effectTag|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=t.child;n!==null;)r=n,s=i,r.effectTag&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,e=r.alternate,e===null?(r.childExpirationTime=0,r.expirationTime=s,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),n=n.sibling;return ae(se,se.current&1|2),t.child}s=s.sibling}}else{if(!r)if(e=vs(s),e!==null){if(t.effectTag|=64,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.effectTag|=4),kr(n,!0),n.tail===null&&n.tailMode==="hidden"&&!s.alternate)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*We()-n.renderingStartTime>n.tailExpiration&&1<i&&(t.effectTag|=64,r=!0,kr(n,!1),t.expirationTime=t.childExpirationTime=i-1);n.isBackwards?(s.sibling=t.child,t.child=s):(i=n.last,i!==null?i.sibling=s:t.child=s,n.last=s)}return n.tail!==null?(n.tailExpiration===0&&(n.tailExpiration=We()+500),i=n.tail,n.rendering=i,n.tail=i.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=We(),i.sibling=null,t=se.current,ae(se,r?t&1|2:t&1),i):null}throw Error(M(156,t.tag))}function tS(e){switch(e.tag){case 1:ke(e.type)&&hs();var t=e.effectTag;return t&4096?(e.effectTag=t&-4097|64,e):null;case 3:if(Yi(),ee(Te),ee(Se),t=e.effectTag,(t&64)!==0)throw Error(M(285));return e.effectTag=t&-4097|64,e;case 5:return Kl(e),null;case 13:return ee(se),t=e.effectTag,t&4096?(e.effectTag=t&-4097|64,e):null;case 19:return ee(se),null;case 4:return Yi(),null;case 10:return Yl(e),null;default:return null}}function su(e,t){return{value:e,source:t,stack:Nl(t)}}var iS=typeof WeakSet=="function"?WeakSet:Set;function No(e,t){var i=t.source,n=t.stack;n===null&&i!==null&&(n=Nl(i)),i!==null&&bt(i.type),t=t.value,e!==null&&e.tag===1&&bt(e.type);try{console.error(t)}catch(r){setTimeout(function(){throw r})}}function nS(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(i){fi(e,i)}}function ad(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){fi(e,i)}else t.current=null}function rS(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.effectTag&256&&e!==null){var i=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?i:qe(t.type,i),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(M(163))}function Df(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var n=i.destroy;i.destroy=void 0,n!==void 0&&n()}i=i.next}while(i!==t)}}function zf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function sS(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:zf(3,i);return;case 1:if(e=i.stateNode,i.effectTag&4)if(t===null)e.componentDidMount();else{var n=i.elementType===i.type?t.memoizedProps:qe(i.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}t=i.updateQueue,t!==null&&Fc(i,t,e);return;case 3:if(t=i.updateQueue,t!==null){if(e=null,i.child!==null)switch(i.child.tag){case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}Fc(i,t,e)}return;case 5:e=i.stateNode,t===null&&i.effectTag&4&&Qp(i.type,i.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:i.memoizedState===null&&(i=i.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&_p(i))));return;case 19:case 17:case 20:case 21:return}throw Error(M(163))}function od(e,t,i){switch(typeof Oo=="function"&&Oo(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e.next;Xt(97<i?97:i,function(){var r=n;do{var s=r.destroy;if(s!==void 0){var a=t;try{s()}catch(o){fi(a,o)}}r=r.next}while(r!==n)})}break;case 1:ad(t),i=t.stateNode,typeof i.componentWillUnmount=="function"&&nS(t,i);break;case 5:ad(t);break;case 4:Rf(e,t,i)}}function Lf(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,t!==null&&Lf(t)}function ld(e){return e.tag===5||e.tag===3||e.tag===4}function ud(e){e:{for(var t=e.return;t!==null;){if(ld(t)){var i=t;break e}t=t.return}throw Error(M(160))}switch(t=i.stateNode,i.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(M(161))}i.effectTag&16&&(On(t,""),i.effectTag&=-17);e:t:for(i=e;;){for(;i.sibling===null;){if(i.return===null||ld(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.effectTag&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.effectTag&2)){i=i.stateNode;break e}}n?Do(e,i,t):zo(e,i,t)}function Do(e,t,i){var n=e.tag,r=n===5||n===6;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=us));else if(n!==4&&(e=e.child,e!==null))for(Do(e,t,i),e=e.sibling;e!==null;)Do(e,t,i),e=e.sibling}function zo(e,t,i){var n=e.tag,r=n===5||n===6;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(zo(e,t,i),e=e.sibling;e!==null;)zo(e,t,i),e=e.sibling}function Rf(e,t,i){for(var n=t,r=!1,s,a;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(M(160));switch(s=r.stateNode,r.tag){case 5:a=!1;break e;case 3:s=s.containerInfo,a=!0;break e;case 4:s=s.containerInfo,a=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var o=e,l=n,u=i,h=l;;)if(od(o,h,u),h.child!==null&&h.tag!==4)h.child.return=h,h=h.child;else{if(h===l)break e;for(;h.sibling===null;){if(h.return===null||h.return===l)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}a?(o=s,l=n.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):s.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){s=n.stateNode.containerInfo,a=!0,n.child.return=n,n=n.child;continue}}else if(od(e,n,i),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function Aa(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:Df(3,t);return;case 1:return;case 5:var i=t.stateNode;if(i!=null){var n=t.memoizedProps,r=e!==null?e.memoizedProps:n;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,s!==null){for(i[cs]=n,e==="input"&&n.type==="radio"&&n.name!=null&&xp(i,n),po(e,r),t=po(e,n),r=0;r<s.length;r+=2){var a=s[r],o=s[r+1];a==="style"?Wp(i,o):a==="dangerouslySetInnerHTML"?Ip(i,o):a==="children"?On(i,o):Tl(i,a,o,t)}switch(e){case"input":io(i,n);break;case"textarea":Sp(i,n);break;case"select":t=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!n.multiple,e=n.value,e!=null?ji(i,!!n.multiple,e,!1):t!==!!n.multiple&&(n.defaultValue!=null?ji(i,!!n.multiple,n.defaultValue,!0):ji(i,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(M(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:t=t.stateNode,t.hydrate&&(t.hydrate=!1,_p(t.containerInfo));return;case 12:return;case 13:if(i=t,t.memoizedState===null?n=!1:(n=!0,i=t.child,lu=We()),i!==null)e:for(e=i;;){if(e.tag===5)s=e.stateNode,n?(s=s.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(s=e.stateNode,r=e.memoizedProps.style,r=r!=null&&r.hasOwnProperty("display")?r.display:null,s.style.display=Up("display",r));else if(e.tag===6)e.stateNode.nodeValue=n?"":e.memoizedProps;else if(e.tag===13&&e.memoizedState!==null&&e.memoizedState.dehydrated===null){s=e.child.sibling,s.return=e,e=s;continue}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}cd(t);return;case 19:cd(t);return;case 17:return}throw Error(M(163))}function cd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new iS),t.forEach(function(n){var r=gS.bind(null,e,n);i.has(n)||(i.add(n),n.then(r,r))})}}var aS=typeof WeakMap=="function"?WeakMap:Map;function jf(e,t,i){i=$t(i,null),i.tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Es||(Es=!0,Lo=n),No(e,t)},i}function Bf(e,t,i){i=$t(i,null),i.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var r=t.value;i.payload=function(){return No(e,t),n(r)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){typeof n!="function"&&(Qt===null?Qt=new Set([this]):Qt.add(this),No(e,t));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),i}var oS=Math.ceil,Ms=et.ReactCurrentDispatcher,_f=et.ReactCurrentOwner,pe=0,au=8,tt=16,ft=32,hi=0,Cs=1,Of=2,Is=3,Ys=4,ou=5,O=pe,Be=null,H=null,Pe=0,he=hi,Gs=null,Mt=1073741823,Zn=1073741823,bs=null,Yn=0,As=!1,lu=0,Vf=500,P=null,Es=!1,Lo=null,Qt=null,Ts=!1,Dn=null,wn=90,si=null,zn=0,Ro=null,Yr=0;function pt(){return(O&(tt|ft))!==pe?1073741821-(We()/10|0):Yr!==0?Yr:Yr=1073741821-(We()/10|0)}function pi(e,t,i){if(t=t.mode,(t&2)===0)return 1073741823;var n=Qs();if((t&4)===0)return n===99?1073741823:1073741822;if((O&tt)!==pe)return Pe;if(i!==null)e=Qr(e,i.timeoutMs|0||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=Qr(e,150,100);break;case 97:case 96:e=Qr(e,5e3,250);break;case 95:e=2;break;default:throw Error(M(326))}return Be!==null&&e===Pe&&--e,e}function Zt(e,t){if(50<zn)throw zn=0,Ro=null,Error(M(185));if(e=Xs(e,t),e!==null){var i=Qs();t===1073741823?(O&au)!==pe&&(O&(tt|ft))===pe?jo(e):(_e(e),O===pe&&gt()):_e(e),(O&4)===pe||i!==98&&i!==99||(si===null?si=new Map([[e,t]]):(i=si.get(e),(i===void 0||i>t)&&si.set(e,t)))}}function Xs(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;i!==null&&i.expirationTime<t&&(i.expirationTime=t);var n=e.return,r=null;if(n===null&&e.tag===3)r=e.stateNode;else for(;n!==null;){if(i=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),i!==null&&i.childExpirationTime<t&&(i.childExpirationTime=t),n.return===null&&n.tag===3){r=n.stateNode;break}n=n.return}return r!==null&&(Be===r&&(Js(t),he===Ys&&oi(r,Pe)),Jf(r,t)),r}function Gr(e){var t=e.lastExpiredTime;if(t!==0||(t=e.firstPendingTime,!Xf(e,t)))return t;var i=e.lastPingedTime;return e=e.nextKnownPendingLevel,e=i>e?i:e,2>=e&&t!==e?0:e}function _e(e){if(e.lastExpiredTime!==0)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Hc(jo.bind(null,e));else{var t=Gr(e),i=e.callbackNode;if(t===0)i!==null&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=pt();if(t===1073741823?n=99:t===1||t===2?n=95:(n=10*(1073741821-t)-10*(1073741821-n),n=0>=n?99:250>=n?98:5250>=n?97:95),i!==null){var r=e.callbackPriority;if(e.callbackExpirationTime===t&&r>=n)return;i!==hf&&of(i)}e.callbackExpirationTime=t,e.callbackPriority=n,t=t===1073741823?Hc(jo.bind(null,e)):ff(n,Uf.bind(null,e),{timeout:10*(1073741821-t)-We()}),e.callbackNode=t}}}function Uf(e,t){if(Yr=0,t)return t=pt(),Vo(e,t),_e(e),null;var i=Gr(e);if(i!==0){if(t=e.callbackNode,(O&(tt|ft))!==pe)throw Error(M(327));if(en(),e===Be&&i===Pe||ai(e,i),H!==null){var n=O;O|=tt;var r=Ff();do try{cS();break}catch(o){$f(e,o)}while(1);if(Zl(),O=n,Ms.current=r,he===Cs)throw t=Gs,ai(e,i),oi(e,i),_e(e),t;if(H===null)switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=i,n=he,Be=null,n){case hi:case Cs:throw Error(M(345));case Of:Vo(e,2<i?2:i);break;case Is:if(oi(e,i),n=e.lastSuspendedTime,i===n&&(e.nextKnownPendingLevel=Bo(r)),Mt===1073741823&&(r=lu+Vf-We(),10<r)){if(As){var s=e.lastPingedTime;if(s===0||s>=i){e.lastPingedTime=i,ai(e,i);break}}if(s=Gr(e),s!==0&&s!==i)break;if(n!==0&&n!==i){e.lastPingedTime=n;break}e.timeoutHandle=xa(ti.bind(null,e),r);break}ti(e);break;case Ys:if(oi(e,i),n=e.lastSuspendedTime,i===n&&(e.nextKnownPendingLevel=Bo(r)),As&&(r=e.lastPingedTime,r===0||r>=i)){e.lastPingedTime=i,ai(e,i);break}if(r=Gr(e),r!==0&&r!==i)break;if(n!==0&&n!==i){e.lastPingedTime=n;break}if(Zn!==1073741823?n=10*(1073741821-Zn)-We():Mt===1073741823?n=0:(n=10*(1073741821-Mt)-5e3,r=We(),i=10*(1073741821-i)-r,n=r-n,0>n&&(n=0),n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*oS(n/1960))-n,i<n&&(n=i)),10<n){e.timeoutHandle=xa(ti.bind(null,e),n);break}ti(e);break;case ou:if(Mt!==1073741823&&bs!==null){s=Mt;var a=bs;if(n=a.busyMinDurationMs|0,0>=n?n=0:(r=a.busyDelayMs|0,s=We()-(10*(1073741821-s)-(a.timeoutMs|0||5e3)),n=s<=r?0:r+n-s),10<n){oi(e,i),e.timeoutHandle=xa(ti.bind(null,e),n);break}}ti(e);break;default:throw Error(M(329))}if(_e(e),e.callbackNode===t)return Uf.bind(null,e)}}return null}function jo(e){var t=e.lastExpiredTime;if(t=t!==0?t:1073741823,(O&(tt|ft))!==pe)throw Error(M(327));if(en(),e===Be&&t===Pe||ai(e,t),H!==null){var i=O;O|=tt;var n=Ff();do try{uS();break}catch(r){$f(e,r)}while(1);if(Zl(),O=i,Ms.current=n,he===Cs)throw i=Gs,ai(e,t),oi(e,t),_e(e),i;if(H!==null)throw Error(M(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Be=null,ti(e),_e(e)}return null}function lS(){if(si!==null){var e=si;si=null,e.forEach(function(t,i){Vo(i,t),_e(i)}),gt()}}function Wf(e,t){var i=O;O|=1;try{return e(t)}finally{O=i,O===pe&&gt()}}function Hf(e,t){var i=O;O&=-2,O|=au;try{return e(t)}finally{O=i,O===pe&&gt()}}function ai(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,ox(i)),H!==null)for(i=H.return;i!==null;){var n=i;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&hs();break;case 3:Yi(),ee(Te),ee(Se);break;case 5:Kl(n);break;case 4:Yi();break;case 13:ee(se);break;case 19:ee(se);break;case 10:Yl(n)}i=i.return}Be=e,H=xi(e.current,null),Pe=t,he=hi,Gs=null,Zn=Mt=1073741823,bs=null,Yn=0,As=!1}function $f(e,t){do{try{if(Zl(),Zr.current=Ss,ws)for(var i=ue.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}if(jt=0,xe=ye=ue=null,ws=!1,H===null||H.return===null)return he=Cs,Gs=t,H=null;e:{var r=e,s=H.return,a=H,o=t;if(t=Pe,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,o!==null&&typeof o=="object"&&typeof o.then=="function"){var l=o;if((a.mode&2)===0){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.expirationTime=u.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var h=(se.current&1)!==0,c=s;do{var m;if(m=c.tag===13){var v=c.memoizedState;if(v!==null)m=v.dehydrated!==null;else{var y=c.memoizedProps;m=y.fallback===void 0?!1:y.unstable_avoidThisFallback!==!0?!0:!h}}if(m){var S=c.updateQueue;if(S===null){var d=new Set;d.add(l),c.updateQueue=d}else S.add(l);if((c.mode&2)===0){if(c.effectTag|=64,a.effectTag&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var p=$t(1073741823,null);p.tag=2,Ft(a,p)}a.expirationTime=1073741823;break e}o=void 0,a=t;var f=r.pingCache;if(f===null?(f=r.pingCache=new aS,o=new Set,f.set(l,o)):(o=f.get(l),o===void 0&&(o=new Set,f.set(l,o))),!o.has(a)){o.add(a);var g=fS.bind(null,r,l,a);l.then(g,g)}c.effectTag|=4096,c.expirationTime=t;break e}c=c.return}while(c!==null);o=Error((bt(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+Nl(a))}he!==ou&&(he=Of),o=su(o,a),c=s;do{switch(c.tag){case 3:l=o,c.effectTag|=4096,c.expirationTime=t;var w=jf(c,l,t);$c(c,w);break e;case 1:l=o;var x=c.type,b=c.stateNode;if((c.effectTag&64)===0&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Qt===null||!Qt.has(b)))){c.effectTag|=4096,c.expirationTime=t;var T=Bf(c,l,t);$c(c,T);break e}}c=c.return}while(c!==null)}H=Yf(H)}catch(L){t=L;continue}break}while(1)}function Ff(){var e=Ms.current;return Ms.current=Ss,e===null?Ss:e}function Qf(e,t){e<Mt&&2<e&&(Mt=e),t!==null&&e<Zn&&2<e&&(Zn=e,bs=t)}function Js(e){e>Yn&&(Yn=e)}function uS(){for(;H!==null;)H=Zf(H)}function cS(){for(;H!==null&&!Yx();)H=Zf(H)}function Zf(e){var t=Gf(e.alternate,e,Pe);return e.memoizedProps=e.pendingProps,t===null&&(t=Yf(e)),_f.current=null,t}function Yf(e){H=e;do{var t=H.alternate;if(e=H.return,(H.effectTag&2048)===0){if(t=eS(t,H,Pe),Pe===1||H.childExpirationTime!==1){for(var i=0,n=H.child;n!==null;){var r=n.expirationTime,s=n.childExpirationTime;r>i&&(i=r),s>i&&(i=s),n=n.sibling}H.childExpirationTime=i}if(t!==null)return t;e!==null&&(e.effectTag&2048)===0&&(e.firstEffect===null&&(e.firstEffect=H.firstEffect),H.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=H.firstEffect),e.lastEffect=H.lastEffect),1<H.effectTag&&(e.lastEffect!==null?e.lastEffect.nextEffect=H:e.firstEffect=H,e.lastEffect=H))}else{if(t=tS(H),t!==null)return t.effectTag&=2047,t;e!==null&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(t=H.sibling,t!==null)return t;H=e}while(H!==null);return he===hi&&(he=ou),null}function Bo(e){var t=e.expirationTime;return e=e.childExpirationTime,t>e?t:e}function ti(e){var t=Qs();return Xt(99,dS.bind(null,e,t)),null}function dS(e,t){do en();while(Dn!==null);if((O&(tt|ft))!==pe)throw Error(M(327));var i=e.finishedWork,n=e.finishedExpirationTime;if(i===null)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,i===e.current)throw Error(M(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var r=Bo(i);if(e.firstPendingTime=r,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Be&&(H=Be=null,Pe=0),1<i.effectTag?i.lastEffect!==null?(i.lastEffect.nextEffect=i,r=i.firstEffect):r=i:r=i.firstEffect,r!==null){var s=O;O|=ft,_f.current=null,wa=Vr;var a=Tc();if(go(a)){if("selectionStart"in a)var o={start:a.selectionStart,end:a.selectionEnd};else e:{o=(o=a.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var u=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{o.nodeType,h.nodeType}catch{o=null;break e}var c=0,m=-1,v=-1,y=0,S=0,d=a,p=null;t:for(;;){for(var f;d!==o||u!==0&&d.nodeType!==3||(m=c+u),d!==h||l!==0&&d.nodeType!==3||(v=c+l),d.nodeType===3&&(c+=d.nodeValue.length),(f=d.firstChild)!==null;)p=d,d=f;for(;;){if(d===a)break t;if(p===o&&++y===u&&(m=c),p===h&&++S===l&&(v=c),(f=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=f}o=m===-1||v===-1?null:{start:m,end:v}}else o=null}o=o||{start:0,end:0}}else o=null;ya={activeElementDetached:null,focusedElem:a,selectionRange:o},Vr=!1,P=r;do try{hS()}catch(k){if(P===null)throw Error(M(330));fi(P,k),P=P.nextEffect}while(P!==null);P=r;do try{for(a=e,o=t;P!==null;){var g=P.effectTag;if(g&16&&On(P.stateNode,""),g&128){var w=P.alternate;if(w!==null){var x=w.ref;x!==null&&(typeof x=="function"?x(null):x.current=null)}}switch(g&1038){case 2:ud(P),P.effectTag&=-3;break;case 6:ud(P),P.effectTag&=-3,Aa(P.alternate,P);break;case 1024:P.effectTag&=-1025;break;case 1028:P.effectTag&=-1025,Aa(P.alternate,P);break;case 4:Aa(P.alternate,P);break;case 8:u=P,Rf(a,u,o),Lf(u)}P=P.nextEffect}}catch(k){if(P===null)throw Error(M(330));fi(P,k),P=P.nextEffect}while(P!==null);if(x=ya,w=Tc(),g=x.focusedElem,o=x.selectionRange,w!==g&&g&&g.ownerDocument&&Hp(g.ownerDocument.documentElement,g)){for(o!==null&&go(g)&&(w=o.start,x=o.end,x===void 0&&(x=w),"selectionStart"in g?(g.selectionStart=w,g.selectionEnd=Math.min(x,g.value.length)):(x=(w=g.ownerDocument||document)&&w.defaultView||window,x.getSelection&&(x=x.getSelection(),u=g.textContent.length,a=Math.min(o.start,u),o=o.end===void 0?a:Math.min(o.end,u),!x.extend&&a>o&&(u=o,o=a,a=u),u=Ec(g,a),h=Ec(g,o),u&&h&&(x.rangeCount!==1||x.anchorNode!==u.node||x.anchorOffset!==u.offset||x.focusNode!==h.node||x.focusOffset!==h.offset)&&(w=w.createRange(),w.setStart(u.node,u.offset),x.removeAllRanges(),a>o?(x.addRange(w),x.extend(h.node,h.offset)):(w.setEnd(h.node,h.offset),x.addRange(w)))))),w=[],x=g;x=x.parentNode;)x.nodeType===1&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<w.length;g++)x=w[g],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}Vr=!!wa,ya=wa=null,e.current=i,P=r;do try{for(g=e;P!==null;){var b=P.effectTag;if(b&36&&sS(g,P.alternate,P),b&128){w=void 0;var T=P.ref;if(T!==null){var L=P.stateNode;switch(P.tag){case 5:w=L;break;default:w=L}typeof T=="function"?T(w):T.current=w}}P=P.nextEffect}}catch(k){if(P===null)throw Error(M(330));fi(P,k),P=P.nextEffect}while(P!==null);P=null,Gx(),O=s}else e.current=i;if(Ts)Ts=!1,Dn=e,wn=t;else for(P=r;P!==null;)t=P.nextEffect,P.nextEffect=null,P=t;if(t=e.firstPendingTime,t===0&&(Qt=null),t===1073741823?e===Ro?zn++:(zn=0,Ro=e):zn=0,typeof _o=="function"&&_o(i.stateNode,n),_e(e),Es)throw Es=!1,e=Lo,Lo=null,e;return(O&au)!==pe||gt(),null}function hS(){for(;P!==null;){var e=P.effectTag;(e&256)!==0&&rS(P.alternate,P),(e&512)===0||Ts||(Ts=!0,ff(97,function(){return en(),null})),P=P.nextEffect}}function en(){if(wn!==90){var e=97<wn?97:wn;return wn=90,Xt(e,pS)}}function pS(){if(Dn===null)return!1;var e=Dn;if(Dn=null,(O&(tt|ft))!==pe)throw Error(M(331));var t=O;for(O|=ft,e=e.current.firstEffect;e!==null;){try{var i=e;if((i.effectTag&512)!==0)switch(i.tag){case 0:case 11:case 15:case 22:Df(5,i),zf(5,i)}}catch(n){if(e===null)throw Error(M(330));fi(e,n)}i=e.nextEffect,e.nextEffect=null,e=i}return O=t,gt(),!0}function dd(e,t,i){t=su(i,t),t=jf(e,t,1073741823),Ft(e,t),e=Xs(e,1073741823),e!==null&&_e(e)}function fi(e,t){if(e.tag===3)dd(e,e,t);else for(var i=e.return;i!==null;){if(i.tag===3){dd(i,e,t);break}else if(i.tag===1){var n=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qt===null||!Qt.has(n))){e=su(t,e),e=Bf(i,e,1073741823),Ft(i,e),i=Xs(i,1073741823),i!==null&&_e(i);break}}i=i.return}}function fS(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),Be===e&&Pe===i?he===Ys||he===Is&&Mt===1073741823&&We()-lu<Vf?ai(e,Pe):As=!0:Xf(e,i)&&(t=e.lastPingedTime,t!==0&&t<i||(e.lastPingedTime=i,_e(e)))}function gS(e,t){var i=e.stateNode;i!==null&&i.delete(t),t=0,t===0&&(t=pt(),t=pi(t,e,null)),e=Xs(e,t),e!==null&&_e(e)}var Gf;Gf=function(e,t,i){var n=t.expirationTime;if(e!==null){var r=t.pendingProps;if(e.memoizedProps!==r||Te.current)ct=!0;else{if(n<i){switch(ct=!1,t.tag){case 3:id(t),Ca();break;case 5:if(Yc(t),t.mode&4&&i!==1&&r.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:ke(t.type)&&$r(t);break;case 4:Io(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value,r=t.type._context,ae(ps,r._currentValue),r._currentValue=n;break;case 13:if(t.memoizedState!==null)return n=t.child.childExpirationTime,n!==0&&n>=i?nd(e,t,i):(ae(se,se.current&1),t=It(e,t,i),t!==null?t.sibling:null);ae(se,se.current&1);break;case 19:if(n=t.childExpirationTime>=i,(e.effectTag&64)!==0){if(n)return sd(e,t,i);t.effectTag|=64}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null),ae(se,se.current),!n)return null}return It(e,t,i)}ct=!1}}else ct=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,r=Qi(t,Se.current),_i(t,i),r=tu(null,t,n,e,r,i),t.effectTag|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ke(n)){var s=!0;$r(t)}else s=!1;t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Gl(t);var a=n.getDerivedStateFromProps;typeof a=="function"&&ms(t,n,a,e),r.updater=Zs,t.stateNode=r,r._reactInternalFiber=t,Co(t,n,e,i),t=ko(null,t,n,!0,s,i)}else t.tag=0,ze(null,t,r,i),t=t.child;return t;case 16:e:{if(r=t.elementType,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,$0(r),r._status!==1)throw r._result;switch(r=r._result,t.type=r,s=t.tag=wS(r),e=qe(r,e),s){case 0:t=To(null,t,r,e,i);break e;case 1:t=td(null,t,r,e,i);break e;case 11:t=qc(null,t,r,e,i);break e;case 14:t=ed(null,t,r,qe(r.type,e),n,i);break e}throw Error(M(306,r,""))}return t;case 0:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:qe(n,r),To(e,t,n,r,i);case 1:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:qe(n,r),td(e,t,n,r,i);case 3:if(id(t),n=t.updateQueue,e===null||n===null)throw Error(M(282));if(n=t.pendingProps,r=t.memoizedState,r=r!==null?r.element:null,Xl(e,t),$n(t,n,null,i),n=t.memoizedState.element,n===r)Ca(),t=It(e,t,i);else{if((r=t.stateNode.hydrate)&&(Bt=Bi(t.stateNode.containerInfo.firstChild),Ct=t,r=di=!0),r)for(i=Jl(t,null,n,i),t.child=i;i;)i.effectTag=i.effectTag&-3|1024,i=i.sibling;else ze(e,t,n,i),Ca();t=t.child}return t;case 5:return Yc(t),e===null&&Eo(t),n=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,a=r.children,mo(n,r)?a=null:s!==null&&mo(n,s)&&(t.effectTag|=16),Tf(e,t),t.mode&4&&i!==1&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(ze(e,t,a,i),t=t.child),t;case 6:return e===null&&Eo(t),null;case 13:return nd(e,t,i);case 4:return Io(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Zi(t,null,n,i):ze(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:qe(n,r),qc(e,t,n,r,i);case 7:return ze(e,t,t.pendingProps,i),t.child;case 8:return ze(e,t,t.pendingProps.children,i),t.child;case 12:return ze(e,t,t.pendingProps.children,i),t.child;case 10:e:{n=t.type._context,r=t.pendingProps,a=t.memoizedProps,s=r.value;var o=t.type._context;if(ae(ps,o._currentValue),o._currentValue=s,a!==null)if(o=a.value,s=wi(o,s)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(o,s):1073741823)|0,s===0){if(a.children===r.children&&!Te.current){t=It(e,t,i);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===n&&(u.observedBits&s)!==0){o.tag===1&&(u=$t(i,null),u.tag=2,Ft(o,u)),o.expirationTime<i&&(o.expirationTime=i),u=o.alternate,u!==null&&u.expirationTime<i&&(u.expirationTime=i),mf(o.return,i),l.expirationTime<i&&(l.expirationTime=i);break}u=u.next}}else a=o.tag===10&&o.type===t.type?null:o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}ze(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps,n=s.children,_i(t,i),r=Fe(r,s.unstable_observedBits),n=n(r),t.effectTag|=1,ze(e,t,n,i),t.child;case 14:return r=t.type,s=qe(r,t.pendingProps),s=qe(r.type,s),ed(e,t,r,s,n,i);case 15:return Ef(e,t,t.type,t.pendingProps,n,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:qe(n,r),e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,ke(n)?(e=!0,$r(t)):e=!1,_i(t,i),wf(t,n,r),Co(t,n,r,i),ko(null,t,n,!0,e,i);case 19:return sd(e,t,i)}throw Error(M(156,t.tag))};var _o=null,Oo=null;function mS(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var i=t.inject(e);_o=function(n){try{t.onCommitFiberRoot(i,n,void 0,(n.current.effectTag&64)===64)}catch{}},Oo=function(n){try{t.onCommitFiberUnmount(i,n)}catch{}}}catch{}return!0}function vS(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function dt(e,t,i,n){return new vS(e,t,i,n)}function uu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wS(e){if(typeof e=="function")return uu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kl)return 11;if(e===Pl)return 14}return 2}function xi(e,t){var i=e.alternate;return i===null?(i=dt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Xr(e,t,i,n,r,s){var a=2;if(n=e,typeof e=="function")uu(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ii:return _t(i.children,r,s,t);case H0:a=8,r|=7;break;case pp:a=8,r|=1;break;case Br:return e=dt(12,i,t,r|8),e.elementType=Br,e.type=Br,e.expirationTime=s,e;case _r:return e=dt(13,i,t,r),e.type=_r,e.elementType=_r,e.expirationTime=s,e;case eo:return e=dt(19,i,t,r),e.elementType=eo,e.expirationTime=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fp:a=10;break e;case gp:a=9;break e;case kl:a=11;break e;case Pl:a=14;break e;case mp:a=16,n=null;break e;case vp:a=22;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=dt(a,i,t,r),t.elementType=e,t.type=n,t.expirationTime=s,t}function _t(e,t,i,n){return e=dt(7,e,n,t),e.expirationTime=i,e}function Ea(e,t,i){return e=dt(6,e,null,t),e.expirationTime=i,e}function Ta(e,t,i){return t=dt(4,e.children!==null?e.children:[],e.key,t),t.expirationTime=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yS(e,t,i){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Xf(e,t){var i=e.firstSuspendedTime;return e=e.lastSuspendedTime,i!==0&&i>=t&&e<=t}function oi(e,t){var i=e.firstSuspendedTime,n=e.lastSuspendedTime;i<t&&(e.firstSuspendedTime=t),(n>t||i===0)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Jf(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var i=e.firstSuspendedTime;i!==0&&(t>=i?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Vo(e,t){var i=e.lastExpiredTime;(i===0||i>t)&&(e.lastExpiredTime=t)}function ks(e,t,i,n){var r=t.current,s=pt(),a=Nn.suspense;s=pi(s,r,a);e:if(i){i=i._reactInternalFiber;t:{if(Ci(i)!==i||i.tag!==1)throw Error(M(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(ke(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(M(171))}if(i.tag===1){var l=i.type;if(ke(l)){i=af(i,l,o);break e}}i=o}else i=Gt;return t.context===null?t.context=i:t.pendingContext=i,t=$t(s,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),Ft(r,t),Zt(r,s),s}function ka(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hd(e,t){e=e.memoizedState,e!==null&&e.dehydrated!==null&&e.retryTime<t&&(e.retryTime=t)}function cu(e,t){hd(e,t),(e=e.alternate)&&hd(e,t)}function du(e,t,i){i=i!=null&&i.hydrate===!0;var n=new yS(e,t,i),r=dt(3,null,null,t===2?7:t===1?3:0);n.current=r,r.stateNode=n,Gl(r),e[ir]=n.current,i&&t!==0&&X0(e,e.nodeType===9?e:e.ownerDocument),this._internalRoot=n}du.prototype.render=function(e){ks(e,this._internalRoot,null,null)};du.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ks(null,e,null,function(){t[ir]=null})};function lr(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function xS(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new du(e,0,t?{hydrate:!0}:void 0)}function Ks(e,t,i,n,r){var s=i._reactRootContainer;if(s){var a=s._internalRoot;if(typeof r=="function"){var o=r;r=function(){var u=ka(a);o.call(u)}}ks(t,a,e,r)}else{if(s=i._reactRootContainer=xS(i,n),a=s._internalRoot,typeof r=="function"){var l=r;r=function(){var u=ka(a);l.call(u)}}Hf(function(){ks(t,a,e,r)})}return ka(a)}function SS(e,t,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ai,key:n==null?null:""+n,children:e,containerInfo:t,implementation:i}}jp=function(e){if(e.tag===13){var t=Qr(pt(),150,100);Zt(e,t),cu(e,t)}};Rl=function(e){e.tag===13&&(Zt(e,3),cu(e,3))};Bp=function(e){if(e.tag===13){var t=pt();t=pi(t,e,null),Zt(e,t),cu(e,t)}};qa=function(e,t,i){switch(t){case"input":if(io(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=Wl(n);if(!r)throw Error(M(90));yp(n),io(n,r)}}}break;case"textarea":Sp(e,i);break;case"select":t=i.value,t!=null&&ji(e,!!i.multiple,t,!1)}};Cl=Wf;cp=function(e,t,i,n,r){var s=O;O|=4;try{return Xt(98,e.bind(null,t,i,n,r))}finally{O=s,O===pe&&gt()}};Il=function(){(O&(1|tt|ft))===pe&&(lS(),en())};dp=function(e,t){var i=O;O|=2;try{return e(t)}finally{O=i,O===pe&&gt()}};function Kf(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lr(t))throw Error(M(200));return SS(e,t,null,i)}var MS={Events:[rr,vi,Wl,op,Ka,Fi,function(e){zl(e,ux)},lp,up,Hs,Ws,en,{current:!1}]};(function(e){var t=e.findFiberByHostInstance;return mS(Ce({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:et.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Np(i),i===null?null:i.stateNode},findFiberByHostInstance:function(i){return t?t(i):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:nr,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MS;Qe.createPortal=Kf;Qe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternalFiber;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):Error(M(268,Object.keys(e)));return e=Np(t),e=e===null?null:e.stateNode,e};Qe.flushSync=function(e,t){if((O&(tt|ft))!==pe)throw Error(M(187));var i=O;O|=1;try{return Xt(99,e.bind(null,t))}finally{O=i,gt()}};Qe.hydrate=function(e,t,i){if(!lr(t))throw Error(M(200));return Ks(null,e,t,!0,i)};Qe.render=function(e,t,i){if(!lr(t))throw Error(M(200));return Ks(null,e,t,!1,i)};Qe.unmountComponentAtNode=function(e){if(!lr(e))throw Error(M(40));return e._reactRootContainer?(Hf(function(){Ks(null,null,e,!1,function(){e._reactRootContainer=null,e[ir]=null})}),!0):!1};Qe.unstable_batchedUpdates=Wf;Qe.unstable_createPortal=function(e,t){return Kf(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Qe.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!lr(i))throw Error(M(200));if(e==null||e._reactInternalFiber===void 0)throw Error(M(38));return Ks(e,t,i,!1,n)};Qe.version="16.14.0";function qf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qf)}catch(e){console.error(e)}}qf(),tp.exports=Qe;var pd=tp.exports,CS=Object.defineProperty,IS=Object.defineProperties,bS=Object.getOwnPropertyDescriptors,fd=Object.getOwnPropertySymbols,AS=Object.prototype.hasOwnProperty,ES=Object.prototype.propertyIsEnumerable,gd=(e,t,i)=>t in e?CS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Re=(e,t)=>{for(var i in t||(t={}))AS.call(t,i)&&gd(e,i,t[i]);if(fd)for(var i of fd(t))ES.call(t,i)&&gd(e,i,t[i]);return e};const eg={src:"",currentTime:0,hostTime:0,muted:!1,paused:!0,volume:1},tg={currentTimeMaxError:1,syncInterval:1e3,retryInterval:15e3,verbose:!1,log:console.log.bind(console)};let Dt=tg;function TS(e){Dt=Re(Re({},tg),e)}function Pr(e,t){if(e.paused)return e.currentTime;const i=function(n){if(n.player)return n.player.beginTimestamp+n.player.progressTime;if(n.room)return n.room.calibrationTimestamp}(t);return i?e.currentTime+(i-e.hostTime)/1e3:e.currentTime}const kS=navigator.userAgent.includes("Safari"),PS=[".aac",".mid",".midi",".mp3",".ogg",".oga",".wav",".weba"];var NS=typeof global=="object"&&global&&global.Object===Object&&global,DS=typeof self=="object"&&self&&self.Object===Object&&self,ig=NS||DS||Function("return this")(),Ps=ig.Symbol,ng=Object.prototype,zS=ng.hasOwnProperty,LS=ng.toString,hn=Ps?Ps.toStringTag:void 0,RS=Object.prototype.toString,md=Ps?Ps.toStringTag:void 0;function jS(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":md&&md in Object(e)?function(t){var i=zS.call(t,hn),n=t[hn];try{t[hn]=void 0;var r=!0}catch{}var s=LS.call(t);return r&&(i?t[hn]=n:delete t[hn]),s}(e):function(t){return RS.call(t)}(e)}var BS=/\s/,_S=/^\s+/;function OS(e){return e&&e.slice(0,function(t){for(var i=t.length;i--&&BS.test(t.charAt(i)););return i}(e)+1).replace(_S,"")}function Uo(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var VS=/^[-+]0x[0-9a-f]+$/i,US=/^0b[01]+$/i,WS=/^0o[0-7]+$/i,HS=parseInt;function vd(e){if(typeof e=="number")return e;if(function(n){return typeof n=="symbol"||function(r){return r!=null&&typeof r=="object"}(n)&&jS(n)=="[object Symbol]"}(e))return NaN;if(Uo(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Uo(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=OS(e);var i=US.test(e);return i||WS.test(e)?HS(e.slice(2),i?2:8):VS.test(e)?NaN:+e}var Pa=function(){return ig.Date.now()},$S=Math.max,FS=Math.min;function Nr(e,t,i){var n,r,s,a,o,l,u=0,h=!1,c=!1,m=!0;if(typeof e!="function")throw new TypeError("Expected a function");function v(g){var w=n,x=r;return n=r=void 0,u=g,a=e.apply(x,w)}function y(g){return u=g,o=setTimeout(d,t),h?v(g):a}function S(g){var w=g-l;return l===void 0||w>=t||w<0||c&&g-u>=s}function d(){var g=Pa();if(S(g))return p(g);o=setTimeout(d,function(w){var x=t-(w-l);return c?FS(x,s-(w-u)):x}(g))}function p(g){return o=void 0,m&&n?v(g):(n=r=void 0,a)}function f(){var g=Pa(),w=S(g);if(n=arguments,r=this,l=g,w){if(o===void 0)return y(l);if(c)return clearTimeout(o),o=setTimeout(d,t),v(l)}return o===void 0&&(o=setTimeout(d,t)),a}return t=vd(t)||0,Uo(i)&&(h=!!i.leading,s=(c="maxWait"in i)?$S(vd(i.maxWait)||0,t):s,m="trailing"in i?!!i.trailing:m),f.cancel=function(){o!==void 0&&clearTimeout(o),u=0,n=l=r=o=void 0},f.flush=function(){return o===void 0?a:p(Pa())},f}class wd extends Si.exports.Component{constructor(t){super(t),this.seeking=!1,this.mobileSeeking=!1,this.track=null,this.hoverTime=null,this.offset=0,this.secondsPrefix="00:00:",this.minutesPrefix="00:",this.seekPause=!1,this.handleTouchSeeking=i=>{let n=0;for(let r=0;r<i.changedTouches.length;r++)n=i.changedTouches[r].pageX;n=n<0?0:n,this.mobileSeeking&&this.changeCurrentTimePosition(n)},this.handleSeeking=i=>{this.seeking&&this.changeCurrentTimePosition(i.pageX)},this.setTrackWidthState=()=>{this.track&&this.setState({trackWidth:this.track.offsetWidth})},this.handleTrackHover=(i,n)=>{if(this.track){const r=this.props.scale||1;let s;s=i?0:(n.pageX-this.track.getBoundingClientRect().left)/r,this.setState({seekHoverPosition:s,trackWidth:this.track.offsetWidth})}},this.mouseSeekingHandler=i=>{this.setSeeking(!1,i),this.onMouseUp()},this.setSeeking=(i,n)=>{n.preventDefault(),this.handleSeeking(n),this.seeking=i,this.setState({seekHoverPosition:i?this.state.seekHoverPosition:0})},this.mobileTouchSeekingHandler=()=>{this.setMobileSeeking(!1)},this.setMobileSeeking=i=>{this.mobileSeeking=i,this.setState({seekHoverPosition:i?this.state.seekHoverPosition:0})},this.renderBufferProgress=()=>{if(this.props.buffered){const i=Re(Re({},this.getPositionStyle(this.props.buffered)),this.props.bufferColor&&{backgroundColor:this.props.bufferColor});return F.createElement("div",{className:"buffered",style:i})}return null},this.renderProgress=()=>{const i=Re(Re({},this.getPositionStyle(this.props.current)),this.props.sliderColor&&{backgroundColor:this.props.sliderColor});return F.createElement("div",{className:"connect",style:i})},this.renderHoverProgress=()=>{const i=Re(Re({},this.getSeekHoverPosition()),this.props.sliderHoverColor&&{backgroundColor:this.props.sliderHoverColor});return F.createElement("div",{className:"seek-hover",style:i})},this.renderThumb=()=>F.createElement("div",{className:this.isThumbActive()?"thumb active":"thumb",style:this.getThumbHandlerPosition()},F.createElement("div",{style:{backgroundColor:this.props.thumbColor},className:"handler"})),this.onMouseDown=i=>{var n,r;this.props.pause&&!this.props.paused&&(this.props.pause(),this.seekPause=!0),this.setSeeking(!0,i),(r=(n=this.props).onSeekStart)==null||r.call(n)},this.onMouseUp=()=>{var i,n;this.props.play&&this.seekPause&&(this.props.play(),this.seekPause=!1),(n=(i=this.props).onSeekEnd)==null||n.call(i)},this.props.secondsPrefix&&(this.secondsPrefix=this.props.secondsPrefix),this.props.minutesPrefix&&(this.minutesPrefix=this.props.minutesPrefix),this.state={ready:!1,trackWidth:0,seekHoverPosition:0}}componentDidMount(){this.setTrackWidthState(),window.addEventListener("resize",this.setTrackWidthState),window.addEventListener("mousemove",this.handleSeeking),window.addEventListener("mouseup",this.mouseSeekingHandler),window.addEventListener("touchmove",this.handleTouchSeeking),window.addEventListener("touchend",this.mobileTouchSeekingHandler)}componentWillUnmount(){window.removeEventListener("resize",this.setTrackWidthState),window.removeEventListener("mousemove",this.handleSeeking),window.removeEventListener("mouseup",this.mouseSeekingHandler),window.removeEventListener("touchmove",this.handleTouchSeeking),window.removeEventListener("touchend",this.mobileTouchSeekingHandler)}changeCurrentTimePosition(t){if(this.track){const i=this.props.scale||1;let n=(t-this.track.getBoundingClientRect().left)/i;n=Math.min(this.state.trackWidth,Math.max(0,n)),this.setState({seekHoverPosition:n});const r=+(n/this.state.trackWidth*this.props.total).toFixed(0);this.props.onChange(r)}}getPositionStyle(t){return{transform:`scaleX(${100*t/this.props.total/100})`}}getThumbHandlerPosition(){return{transform:`translateX(${this.state.trackWidth/(this.props.total/this.props.current)}px)`}}getSeekHoverPosition(){return{transform:`scaleX(${100*this.state.seekHoverPosition/this.state.trackWidth/100})`}}getHoverTimePosition(){let t=0;return this.hoverTime&&(t=this.state.seekHoverPosition-this.hoverTime.offsetWidth/2,this.props.limitTimeTooltipBySides&&(t<0?t=0:t+this.hoverTime.offsetWidth>this.state.trackWidth&&(t=this.state.trackWidth-this.hoverTime.offsetWidth))),{transform:`translateX(${t}px)`}}secondsToTime(t){t=Math.round(t+this.offset);const i=Math.floor(t/3600),n=t%3600,r=Math.floor(n/60),s=Math.ceil(n%60);return{hh:i.toString(),mm:r<10?"0"+r:r.toString(),ss:s<10?"0"+s:s.toString()}}getHoverTime(){const t=100*this.state.seekHoverPosition/this.state.trackWidth,i=Math.floor(+t*(this.props.total/100)),n=this.secondsToTime(i);return this.props.total+this.offset<60?this.secondsPrefix+n.ss:this.props.total+this.offset<3600?this.minutesPrefix+n.mm+":"+n.ss:n.hh+":"+n.mm+":"+n.ss}isThumbActive(){return this.state.seekHoverPosition>0||this.seeking}drawHoverTime(){return this.props.hideHoverTime?null:F.createElement("div",{className:this.isThumbActive()?"hover-time active":"hover-time",style:this.getHoverTimePosition(),ref:t=>this.hoverTime=t},this.getHoverTime())}render(){return F.createElement("div",{className:"seek-slider"},F.createElement("div",{className:"track",ref:t=>this.track=t,onMouseMove:t=>this.handleTrackHover(!1,t),onMouseLeave:t=>this.handleTrackHover(!0,t),onMouseDown:this.onMouseDown,onTouchStart:t=>{this.setMobileSeeking(!0),this.onMouseDown(t)},onMouseUp:this.onMouseUp,onTouchEnd:this.onMouseUp},F.createElement("div",{className:"main"},this.renderBufferProgress(),this.renderHoverProgress(),this.renderProgress())),this.drawHoverTime(),this.renderThumb())}}class QS extends Si.exports.Component{constructor(t){super(t),this.stageVolume=0,this.updateVolumeTimer=0,this.onVolumeSeeking=!1,this.onClickOperationButton=()=>{const{paused:i}=this.props;i?this.props.play():this.props.pause()},this.operationButton=()=>{const{paused:i}=this.props;return i?F.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCA1LjE0djE0bDExLTdsLTExLTd6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="}):F.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTQgMTloNFY1aC00TTYgMTloNFY1SDZ2MTR6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="})},this.operationVolumeButton=()=>this.props.volume>.9?F.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTQgMy4yM3YyLjA2YzIuODkuODYgNSAzLjU0IDUgNi43MXMtMi4xMSA1Ljg0LTUgNi43djIuMDdjNC0uOTEgNy00LjQ5IDctOC43N2MwLTQuMjgtMy03Ljg2LTctOC43N00xNi41IDEyYzAtMS43Ny0xLTMuMjktMi41LTQuMDNWMTZjMS41LS43MSAyLjUtMi4yNCAyLjUtNE0zIDl2Nmg0bDUgNVY0TDcgOUgzeiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvc3ZnPgo="}):this.props.volume===0?F.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNyA5djZoNGw1IDVWNGwtNSA1SDd6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="}):F.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNSA5djZoNGw1IDVWNEw5IDltOS41IDNjMC0xLjc3LTEtMy4yOS0yLjUtNC4wM1YxNmMxLjUtLjcxIDIuNS0yLjI0IDIuNS00eiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvc3ZnPgo="}),this.handleClickVolume=()=>{this.props.volume===0?this.stageVolume!==0?this.props.setVolume(this.stageVolume):this.props.setVolume(1):(this.stageVolume=this.props.volume,this.props.setVolume(0))},this.onChange=i=>{this.setState({currentTime:i}),i&&this.changeTime(i)},this.changeTime=Nr(i=>{this.props.setCurrentTime(i)},50),this.onVolumeChange=i=>{this.changeVolume(i),this.setState({seekVolume:i/100})},this.changeVolume=Nr(i=>{this.props.setVolume(i/100)},50),this.onVolumeSeekStart=()=>{this.onVolumeSeeking=!0},this.onVolumeSeekEnd=Nr(()=>{this.onVolumeSeeking=!1},500),this.onProgressSeekStart=()=>this.setState({isPlayerSeeking:!0}),this.onProgressSeekEnd=Nr(()=>{this.setState({isPlayerSeeking:!1})},500),this.state={isPlayerSeeking:!1,isVolumeHover:!1,seekVolume:1,visible:!0,currentTime:0},this.stageVolume=t.volume}componentDidMount(){this.updateVolumeTimer=setInterval(()=>{this.onVolumeSeeking||this.setState({seekVolume:this.props.volume}),this.state.isPlayerSeeking||this.setState({currentTime:this.props.currentTime})},100)}componentWillUnmount(){this.updateVolumeTimer&&clearInterval(this.updateVolumeTimer)}render(){const{duration:t,currentTime:i}=this.props;return F.createElement("div",{className:"player-controller",style:{opacity:this.props.visible?"1":"0"}},F.createElement("div",{className:"player-controller-progress"},F.createElement(wd,{total:t,current:this.state.currentTime,onChange:this.onChange,buffered:this.props.buffered,bufferColor:"rgba(255,255,255,0.3)",hideHoverTime:!0,limitTimeTooltipBySides:!0,onSeekStart:this.onProgressSeekStart,onSeekEnd:this.onProgressSeekEnd,play:this.props.play,pause:this.props.pause,paused:this.props.paused,scale:this.props.scale})),F.createElement("div",{className:"player-controller-actions"},F.createElement("div",{className:"player-controller-actions-left"},F.createElement("div",{onClick:this.onClickOperationButton,className:"player-controller-play"},this.operationButton()),F.createElement("div",{className:"player-volume-box",onMouseEnter:()=>this.setState({isVolumeHover:!0}),onMouseLeave:()=>this.setState({isVolumeHover:!1})},F.createElement("div",{onClick:this.handleClickVolume,className:"player-volume"},this.operationVolumeButton()),F.createElement("div",{className:"player-volume-slider"},F.createElement(wd,{total:100,current:100*this.state.seekVolume,onChange:this.onVolumeChange,onSeekStart:this.onVolumeSeekStart,onSeekEnd:this.onVolumeSeekEnd,scale:this.props.scale,limitTimeTooltipBySides:!0,hideHoverTime:!0})))),F.createElement("div",{className:"player-mid-box-time"},yd(Math.floor(i/1e3))," /"," ",yd(Math.floor(t/1e3)))))}}function yd(e){const t=e%60,i=(e-t)/60;if(i>=60){const n=i%60;return`${pn((i-n)/60)}:${pn(n)}:${pn(t)}`}return`${pn(i)}:${pn(t)}`}function pn(e){return e<=9?`0${e}`:`${e}`}class ZS extends Si.exports.Component{constructor(){super(...arguments),this.putAttributes=t=>{const{context:i}=this.props,n=i.getAttributes()||{};for(const r in t)n[r]!==t[r]&&i.updateAttributes([r],t[r])}}render(){const{context:t}=this.props,i=t.getRoom(),n=i?void 0:t.getDisplayer(),r=this.putAttributes;return F.createElement(YS,{room:i,player:n,context:t,plugin:{putAttributes:r}})}}class YS extends Si.exports.Component{constructor(t){super(t),this.alertMask=null,this.container=F.createRef(),this.controllerHiddenTimer=0,this.syncPlayerTimer=0,this.retryCount=0,this.decreaseRetryTimer=0,this.noSoundSyncCount=0,this.showController=()=>{this.setState({controllerVisible:!0}),this.debounceHidingController()},this.play=()=>{var i;const n=(i=this.props.room)==null?void 0:i.calibrationTimestamp;this.debug(">>> play",{paused:!1,hostTime:n}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!1,hostTime:n})},this.pause=()=>{const i=Pr(this.getAttributes(),this.props);this.debug(">>> pause",{paused:!0,currentTime:i}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!0,currentTime:i})},this.setVolume=i=>{this.debug(">>> volume",{volume:i}),this.isEnabled()&&this.props.plugin.putAttributes({volume:i}),this.isEnabled()&&this.props.plugin.putAttributes({volume:i,muted:i===0})},this.setCurrentTime=i=>{var n;const r=(n=this.props.room)==null?void 0:n.calibrationTimestamp;this.debug(">>> seek",{currentTime:i/1e3,hostTime:r}),this.isEnabled()&&this.props.plugin.putAttributes({currentTime:i/1e3,hostTime:r})},this.resetPlayer=()=>{var i;(i=this.player)==null||i.autoplay(!1),this.state.NoSound||(this.debug(">>> ended",{paused:!0,currentTime:0}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!0,currentTime:0}))},this.syncPlayerWithAttributes=()=>{var i;const n=this.getAttributes();if(!n)return;const r=this.player;if(!r||this.state.NoSound&&(this.noSoundSyncCount+=1)%8!=0)return;r.paused()!==n.paused&&(this.debug("<<< paused -> %o",n.paused),n.paused?r.pause():(i=r.play())==null||i.catch(this.catchPlayFail)),r.muted()!==n.muted&&(this.debug("<<< muted -> %o",n.muted),r.muted(n.muted)),r.volume()!==n.volume&&(this.debug("<<< volume -> %o",n.volume),r.volume(n.volume));const s=Pr(n,this.props);let a=Dt.currentTimeMaxError;this.state.NoSound&&(a*=3),s>r.duration()?this.resetPlayer():Math.abs(r.currentTime()-s)>a&&(this.debug("<<< currentTime -> %o",s),r.currentTime(s))},this.debounceHidingController=()=>{this.controllerHiddenTimer&&(clearTimeout(this.controllerHiddenTimer),this.controllerHiddenTimer=0),this.controllerHiddenTimer=setTimeout(()=>{this.setState({controllerVisible:!1}),this.controllerHiddenTimer=0},3e3)},this.decreaseRetryCount=()=>{this.player&&this.retryCount>0&&(this.retryCount=this.retryCount-1)},this.catchPlayFail=i=>{var n,r;const s=String(i);if(kS&&s.includes("NotAllowedError")||s.includes("interact"))(n=this.player)==null||n.autoplay("any"),this.setState({NoSound:!0});else{const a=(r=this.player)==null?void 0:r.error();a&&(this.retryCount<=3?(this.initPlayer(),this.retryCount=this.retryCount+1):(this.debug("catch videojs media error",a),this.setState({MediaError:!0}))),this.debug("catch error",i)}},this.fixPlayFail=()=>{this.debug("try to fix play state"),this.setState({NoSound:!1});const{muted:i,volume:n}=this.getAttributes();this.player&&(this.player.muted(i),this.player.volume(n))},this.initPlayer=async()=>{var i;(i=this.player)==null||i.dispose(),this.player=void 0,this.debug("creating elements ...");const{type:n,src:r,poster:s}=this.getAttributes(),a=document.createElement("div");a.setAttribute("data-vjs-player","");const o=document.createElement("video");o.className="video-js",s&&(o.poster=s),o.setAttribute("playsInline",""),o.setAttribute("webkit-playsinline","");const l=document.createElement("source");new URL(r).pathname.endsWith(".m3u8")?l.type="application/x-mpegURL":o.src=r,l.src=r,n&&(l.type=n),o.appendChild(l),a.appendChild(o),this.container.current.appendChild(a),await new Promise(h=>(window.requestAnimationFrame||window.setTimeout)(h)),this.debug("initializing videojs() ...");const u=gu.default(o);this.player=u,window.player=u,u.one("loadedmetadata",this.gracefullyUpdate),u.on("ready",()=>{var h;(h=Dt.onPlayer)==null||h.call(Dt,u),u.on("timeupdate",this.gracefullyUpdate),u.on("volumechange",this.gracefullyUpdate),u.on("seeked",this.gracefullyUpdate),u.on("play",this.gracefullyUpdate),u.on("pause",this.gracefullyUpdate),u.on("ended",this.resetPlayer)}),u.on("error",this.catchPlayFail),this.setState({MediaError:!1})},this.gracefullyUpdate=()=>this.setState({updater:!this.state.updater}),this.setupAlert=i=>{i&&(i.addEventListener("touchstart",this.fixPlayFail),i.addEventListener("click",this.fixPlayFail)),this.alertMask=i},this.setupReload=i=>{i&&(i.addEventListener("touchstart",this.initPlayer),i.addEventListener("click",this.initPlayer))},this.state={NoSound:!1,MediaError:!1,updater:!1,controllerVisible:!1},t.room&&function(i){if(!i.calibrationTimestamp)throw new Error("@netless/app-media-player@0.1.0-alpha.5 requires white-web-sdk@^2.13.8 to work properly.")}(t.room)}getAttributes(){const{context:t}=this.props;let i=t.getAttributes();if(i){if(i=Re(Re({},eg),i),this.player){let r=Pr(i,this.props),s=this.player.duration();!i.paused&&r>s&&(n=Re({},i),i=IS(n,bS({currentTime:0,paused:!0})),this.resetPlayer())}var n;return i}}isShowingPoster(){const t=this.getAttributes();return!(t!=null&&t.src)||PS.some(i=>t.src.endsWith(i))}render(){var t,i;if(!this.props.room&&!this.props.player)return null;const n=this.getAttributes();if(!n)return null;const r=1e3*(((t=this.player)==null?void 0:t.duration())||1e3),s=((i=this.player)==null?void 0:i.bufferedPercent())||0;return F.createElement("div",{className:this.isEnabled()?"vjs-p":"vjs-p disabled",onMouseEnter:this.showController,onMouseMove:this.showController},F.createElement("div",{className:"video-js-plugin-player",ref:this.container}),this.isShowingPoster()&&F.createElement("div",{className:"video-js-plugin-poster"},n.poster&&F.createElement("img",{src:n.poster,alt:"",draggable:!1})),F.createElement(QS,{duration:r,volume:n.volume,setVolume:this.setVolume,paused:n.paused,play:this.play,pause:this.pause,currentTime:1e3*Pr(n,this.props),setCurrentTime:this.setCurrentTime,buffered:r*s,visible:!0}),this.state.NoSound&&F.createElement("div",{ref:this.setupAlert,className:"videojs-plugin-muted-alert"}),this.state.MediaError&&F.createElement("div",{className:"videojs-plugin-recovery-mode"},F.createElement("button",{ref:this.setupReload},"Reload Player")))}debug(t,...i){Dt.verbose&&Dt.log(`[MediaPlayer] ${t}`,...i)}componentDidMount(){this.debug("app version =","0.1.0-alpha.5"),this.debug("video.js version =",gu.default.VERSION),this.initPlayer(),this.props.context.emitter.on("attributesUpdate",this.syncPlayerWithAttributes),this.syncPlayerTimer=setInterval(this.syncPlayerWithAttributes,Dt.syncInterval),this.decreaseRetryTimer=setInterval(this.decreaseRetryCount,Dt.retryInterval)}componentWillUnmount(){var t;this.debug("unmount"),this.props.context.emitter.off("attributesUpdate",this.syncPlayerWithAttributes),(t=this.player)==null||t.dispose(),clearInterval(this.syncPlayerTimer),clearInterval(this.decreaseRetryTimer)}isEnabled(){return this.props.context.getIsWritable()}}const Wo={kind:"MediaPlayer",setup(e){let t=e.getAttributes();if(!t||!t.src)return e.emitter.emit("destroy",{error:new Error("[MediaPlayer]: Missing 'attributes'.'src'.")});t=Re(Re({},eg),t);const i=e.getBox();i.mountStyles(`.vjs-p{display:flex;flex-grow:1}.vjs-p *{pointer-events:auto}.vjs-p.disabled *{pointer-events:none}.vjs-p .video-js-plugin-poster{position:absolute;top:0;left:0;right:0;bottom:0;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgQAAACACAYAAAB0vHFxAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAACBKADAAQAAAABAAAAgAAAAACE3oPTAAAKXUlEQVR4Ae3dYW4ktxEG0LW9FwkC2McycokAOUGAXMLwtQwYvomdP4akHUnNnm6SVUU+/xqpe8ji+yiDWz3a/e7L5v/98se//3pL8K9//O+7t19Hv85eX7RP9vnllz2h4/rkd+wz+ir/0cLfjv/9t1/6igABAgQIENhRwIFgx9StmQABAgQIPAg4EDyA+JIAAQIECOwo8HXHRVvzPIHRzwBHjz9PKudMo31Hj59TdZ2qsueXvb5sO0GHIFsi6iFAgAABAgECOgQB6KbsJ5Dtt0L6rWyPkeRXO+fs+WWvL1v6OgTZElEPAQIECBAIENAhCEA3ZT8Bzwj7WUaMJL8I9X5zZs8ve339kugzkg5BH0ejECBAgACB0gIOBKXjUzwBAgQIEOgj4EDQx9EoBAgQIECgtIADQen4FE+AAAECBPoIOBD0cTQKAQIECBAoLeC3DErHp/iWgE8Zt4RyX5df7nxa1Y3Ob/T4rfWtdl2HYLVErYcAAQIECFwQWL5DsPoJcvX1XdjTpd4iv1JxvStWfu9IfCORwLP7U4cgUXhKIUCAAAECUQIOBFHy5iVAgAABAokEHAgShaEUAgQIECAQJXD7MwTPPqOIWujVeUevb/T4V9ftfecE5HfOKetd8suajLoiBHQIItTNSYAAAQIEkgnc7hAkW0/3ckb/e9qjx+8OYsBvBOT3DUe5L+RXLjIFDxTQIRiIa2gCBAgQIFBFoNkh2P0Z2+j1jx4/+0asvv7q9d/dH9XXX73+3fO7u/7W+3fbHzoErR3hOgECBAgQ2ECg2SHwjG2DXRC4xOj9tdufAHpHLb/eonPHk9+xd7TPcXX9r+oQ9Dc1IgECBAgQKCfgQFAuMgUTIECAAIH+Ag4E/U2NSIAAAQIEygk0P0MQvaLsz3hb9bWu840WOJ5ffsc+2a/KL3tC6jsSmL1/dQiO0nCNAAECBAhsItDsEMw+oTzrHl1f61OorevPrvfZ+6N9WvVmr09+xwnKr7ZP9vyOdcdfze7Tuz4dgvF7ygwECBAgQCC9QLNDkH0F0X+C45NdoHZ99rf8aguofqRA7/8/6BCMTMvYBAgQIECgiED5DkHvZyhFcjtdJp/TVClvlF/KWE4XJb/TVG68INB7f+kQXAjBWwgQIECAwGoCDgSrJWo9BAgQIEDggoADwQU0byFAgAABAqsJfO39DGI1IOuJFbA/Y/3vzi6/u4Kx7189v7vru/v+2HTfz65D8N7EdwgQIECAwHYCw3/LYLUT1HY7pLFg+TaAkl+WX/KAGuXJrwEUfLlaPjoEwRvG9AQIECBAIIPA8A5B779JKQOaGl4F5PtqUfGV/Cqm9lqz/F4tMr6qlo8OQcZdpCYCBAgQIDBZYHiHoNozlMn+5aeTb+0I5Se/2gK5q6/286VDkHs/qY4AAQIECEwRcCCYwmwSAgQIECCQW8CBIHc+qiNAgAABAlMEhn+GYMoqTEKAAAEC7wSqPcN+twDfmCqgQzCV22QECBAgQCCnQHiHoPoJtlV/63rObfFaVfX6X1dy7VX19Vev/1pqr++qvv7q9b8m4dVHAtny1SH4KCXfI0CAAAECmwmEdwiq/U1Om+2PL/Kpnbj85FdbYO3qs/186hCsvd+sjgABAgQInBJwIDjF5CYCBAgQILC2gAPB2vlaHQECBAgQOCUQ/hmCbJ+yPKW20U3yqR22/ORXW2Dt6qN/Ph/n1yFYe79ZHQECBAgQOCXgQHCKyU0ECBAgQGBtAQeCtfO1OgIECBAgcErAgeAUk5sIECBAgMDaAg4Ea+drdQQIECBA4JTA1+///OGnoztd52N/fC7g58PPx+e748sX+8P+qLQ/dAiO0nKNAAECBAhsIuBAsEnQlkmAAAECBI4EHAiOdFwjQIAAAQKbCDgQbBK0ZRIgQIAAgSMBB4IjHdcIECBAgMAmAuH/lsHP//zvb5tYl1ymfErG9lK0/F4oSr6QX8nYThcdne/j/DoEp6NzIwECBAgQWFfAgWDdbK2MAAECBAicFnAgOE3lRgIECBAgsK5A+GcIfv39Pz++5X18pvH2mtfzBeQz37znjPLrqTl/LPnNN585Y7Z8dQhmpm8uAgQIECCQVCC8Q1C9I9Cqv3U96b54Kat6/S8Lufii+vqr138xtpe3VV9/9fpfgvDiQ4Fs+eoQfBiTbxIgQIAAgb0EwjsEe3FbLQECBOYJZPsT6LyVm+mKgA7BFTXvIUCAAAECiwk4ECwWqOUQIECAAIErAg4EV9S8hwABAgQILCYw/DMEnmEttmMeliPfB5BiX8qvWGAP5crvASTZl9Xy0SFItoGUQ4AAAQIEIgSGdwiy/U1MEcgrzynf2unKT361BXJXX+3nS4cg935SHQECBAgQmCIwvENQ7RnKFPWFJpFv7TDlJ7/aArmrr/bzpUOQez+pjgABAgQITBH4Wu0EM0XFJGkE7M80UVwqRH6X2NK8afX87q7v7vvTBP13IToE2RJRDwECBAgQCBBwIAhANyUBAgQIEMgm4ECQLRH1ECBAgACBAIHhv2Uwek2rPcPp7cWnt+jc8eQ317v3bPLrLWq8twK995cOwVtdrwkQIECAwKYC5TsE1f4mqNn7jM9s8b7zya+v5+zR5DdbfK/5eu8vHYK99o/VEiBAgACBDwWaHYLezyg+rOLGN6Pra53QWtdvLP3UW6N9WkVmr09+xwnKr7ZP9vyOdcdfze7Tuz4dgvF7ygwECBAgQCC9QLNDEL2C3ieg3utp1de63rueZ8fLXt+z6+l9f3af7PX1zuPZ8bL7ZK/vWW/39xWYvT90CPrmZzQCBAgQIFBSwIGgZGyKJkCAAAECfQUcCPp6Go0AAQIECJQUaH6GIPpT1iVVFX1aIHp/zX5GdxqmyI3yKxLUJ2XK7xOYv78d7XNcXf+rOgT9TY1IgAABAgTKCTQ7BLv/CWr0+kePn31HVl9/9frv7o/q669e/+753V1/6/277Q8dgtaOcJ0AAQIECGwg0OwQbGBwuMTRz5BGj3+4OBdvC8jvNmHoAPIL5Td5MgEdgmSBKIcAAQIECEQI3O4QrP6MZfT6Ro8fsal2mlN+tdOWX+38VN9XQIegr6fRCBAgQIBASQEHgpKxKZoAAQIECPQVcCDo62k0AgQIECBQUuD2Zwiyr3r1Z4Srry/7/rpbn/zuCsa+X36x/mY/Fnh2f+oQHHu6SoAAAQIEthBYvkOwRYoW+anAsyfkTwdyIURAfiHs3SYdnd/o8btBFBlIh6BIUMokQIAAAQIjBRwIRuoamwABAgQIFBFwICgSlDIJECBAgMBIAQeCkbrGJkCAAAECRQQcCIoEpUwCBAgQIDBSwG8ZjNQ19nABnzIeTjx0AvkN5R0+ePb8stc3PKAnJ9AheBLM7QQIECBAYEUBHYIVU91oTf49+9phy09+IwXsr+d0dQie83I3AQIECBBYUkCHYMlY8yxq9DO80ePnkYypZLTv6PFj1PaZNXt+2evLtlN0CLIloh4CBAgQIBAg4EAQgG5KAgQIECCQTcCBIFsi6iFAgAABAgEC/wdVfx9UuC8B6AAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-position:0 50%;display:flex;align-items:center;justify-content:center}.vjs-p .video-js-plugin-poster img{box-shadow:0 0 5px 10px #0006}.vjs-p .player-controller,.vjs-p .videojs-plugin-muted-alert{pointer-events:auto}.vjs-p.disabled .videojs-plugin-close-icon,.vjs-p.disabled .player-controller{pointer-events:none}.vjs-p .video-js-plugin-player{position:absolute;top:0;left:0;right:0;bottom:0}.video-js,[data-vjs-player]{width:100%;height:100%}.vjs-p .videojs-plugin-muted-alert{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43}.vjs-p .videojs-plugin-muted-alert:before{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43;content:"\\f104";background:rgba(0,0,0,.3);font-family:VideoJS;font-size:2em;display:flex;align-items:center;justify-content:center;color:#fff}.vjs-p .videojs-plugin-recovery-mode{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:44}.vjs-p .videojs-plugin-recovery-mode button{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.vjs-p .seek-slider{position:relative;width:100%}.vjs-p .seek-slider:focus{outline:none}.vjs-p .seek-slider .track{padding:10px 0;cursor:pointer;outline:none}.vjs-p .seek-slider .track:focus{border:0;outline:none}.vjs-p .seek-slider .track .main{width:100%;height:3px;background-color:#ffffff4d;border-radius:30px;position:absolute;left:0;top:8.5px;transition:transform .4s;outline:none}.vjs-p .seek-slider .track .main:focus{border:0;outline:none}.vjs-p .seek-slider .track .main .buffered{position:absolute;background-color:#ffffff4d;width:100%;height:100%;transform:scaleX(.8);z-index:2;transform-origin:0 0}.vjs-p .seek-slider .track .main .seek-hover{position:absolute;background-color:#ffffff80;width:100%;height:100%;z-index:1;transform:scaleX(.6);transform-origin:0 0;opacity:0;transition:opacity .4s}.vjs-p .seek-slider .track .main .connect{position:absolute;background-color:#fff;width:100%;height:100%;z-index:3;left:0;transform:scaleX(.13);transform-origin:0 0}.vjs-p .seek-slider .track.active .main{transform:scaleY(2)}.vjs-p .seek-slider .thumb{pointer-events:none;position:absolute;width:12px;height:12px;left:-6px;top:4px;z-index:4;transform:translate(100px)}.vjs-p .seek-slider .thumb .handler{border-radius:100%;width:100%;height:100%;background-color:#fff;opacity:0;transform:scale(.4);cursor:pointer;transition:transform .2s;pointer-events:none}.vjs-p .seek-slider .thumb.active .handler{opacity:1;transform:scale(1)}.vjs-p .seek-slider .hover-time{position:absolute;background-color:#0000004d;line-height:18px;font-size:16px;color:#ddd;top:-25px;left:0;padding:5px 10px;border-radius:5px;box-shadow:0 0 5px #0000004d;opacity:0;transform:translate(150px);pointer-events:none}.vjs-p .seek-slider .hover-time.active{opacity:1}.vjs-p .seek-slider:hover .track .main .seek-hover{opacity:1}.vjs-p .player-controller{position:absolute;z-index:100;bottom:0px;left:0;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:64px;background-image:linear-gradient(0deg,#000,transparent);transition:opacity .2s;color:#fff}.vjs-p .player-menu-box{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:40px}.vjs-p .player-menu-cell{width:100%;text-align:center;font-size:12px;color:#7a7b7c}.vjs-p .player-multiple-play{width:64px;height:120px}.vjs-p .player-controller-actions-left{display:flex;justify-content:center;align-items:center;flex-shrink:0}.vjs-p .player-right-box{font-size:14px;color:#7a7b7c;cursor:pointer;margin-right:12px}.vjs-p .player-controller-actions{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px;padding-right:8px;margin-top:2px}.vjs-p .player-mid-box-time{font-size:9px;display:flex;justify-content:center;align-items:center;color:#fff;flex-shrink:0;margin-right:8px;font-family:monospace}.vjs-p .player-controller-play{display:flex;align-items:center;justify-content:center;cursor:pointer;padding-right:4px}.vjs-p .player-controller-progress{width:calc(100% - 28px);margin-left:14px;display:flex;align-items:center;justify-content:center;margin-top:8px}.vjs-p .player-volume{display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:16px;margin-left:8px}.vjs-p .player-volume-slider{width:60px;margin-right:12px;display:flex;align-items:center}.vjs-p .player-volume-box{display:flex;flex-direction:row}.netless-app-media-player-container{display:flex;position:relative;height:100%}
`);const n=document.createElement("div");n.classList.add("netless-app-media-player-container"),pd.render(F.createElement(ZS,{context:e}),n),i.mountContent(n),e.emitter.on("destroy",()=>{console.log("[MediaPlayer]: destroy"),pd.unmountComponentAtNode(n)})}},GS=()=>{re.debug&&TS({verbose:!0}),re.register({kind:Xa.kind,src:Xa}),re.register({kind:Wo.kind,src:Wo})},XS={DocsViewer:Xa.kind,MediaPlayer:Wo.kind};var rg=(e=>(e.Init="Init",e.AttributesUpdate="AttributesUpdate",e.SetAttributes="SetAttributes",e.RegisterMagixEvent="RegisterMagixEvent",e.RemoveMagixEvent="RemoveMagixEvent",e.RemoveAllMagixEvent="RemoveAllMagixEvent",e.RoomStateChanged="RoomStateChanged",e.DispatchMagixEvent="DispatchMagixEvent",e.ReciveMagixEvent="ReciveMagixEvent",e.NextPage="NextPage",e.PrevPage="PrevPage",e.SDKCreate="SDKCreate",e.OnCreate="OnCreate",e.SetPage="SetPage",e.GetAttributes="GetAttributes",e.Ready="Ready",e.Destory="Destory",e.StartCreate="StartCreate",e.WrapperDidUpdate="WrapperDidUpdate",e.DispayIframe="DispayIframe",e.HideIframe="HideIframe",e.GetRootRect="GetRootRect",e.ReplayRootRect="ReplayRootRect",e.PageTo="PageTo",e))(rg||{}),sg=(e=>(e.WrapperDidMount="WrapperDidMount",e.IframeLoad="IframeLoad",e))(sg||{});const Nt={Ready:"Ready",RootRect:"ReplayRootRect",Message:"message",ComputeStyle:"computeStyle",Load:"load",DisplayerState:"displayerState",Show:"show",Hide:"hide"},JS=(e,t)=>new Array(e).fill(0).map((i,n)=>t(n)),K=class{constructor(e,t){this.manager=e,this.appManager=t,this.magixEventMap=new Map,this.cssList=[],this.allowAppliances=["clicker"],this.bridgeDisposer=E.noop,this.rootRect=null,this.sideEffectManager=new Gi.SideEffectManager,this.execListenIframe=E.debounce(i=>{this.listenIframe(i)},50),this.onPhaseChangedListener=i=>{i===A.PlayerPhase.Playing&&this.computedStyleAndIframeDisplay()},this.stateChangeListener=i=>{i=q({},i),i.cameraState=this.manager.cameraState,this.postMessage({kind:"RoomStateChanged",payload:i}),i.cameraState&&(K.emitter.emit("GetRootRect"),this.computedStyle(i)),i.memberState&&(this.computedZindex(),this.updateStyle()),i.sceneState&&this.computedIframeDisplay(i,this.attributes)},this.displayer=K.displayer=t.displayer,this.iframe=this._createIframe(),this.sideEffectManager.addDisposer(K.emitter.on("ReplayRootRect",i=>{this.rootRect=i}),Nt.RootRect),this.sideEffectManager.addDisposer(K.emitter.on("HideIframe",()=>{this.iframe.className=K.hiddenClass}),Nt.Hide),this.sideEffectManager.addDisposer(K.emitter.on("DispayIframe",()=>{this.iframe.className=""}),Nt.Show),this.sideEffectManager.addDisposer(K.emitter.on("created",()=>{this.bridgeDisposer(),this.bridgeDisposer=A.autorun(()=>{var n;const i=this.attributes;if(i.url){const r=(n=this.iframe)==null?void 0:n.src;r&&r!==i.url&&this.execListenIframe(i)}i.displaySceneDir&&this.computedIframeDisplay(this.displayer.state,i),(i.width||i.height)&&this.iframe&&(this.iframe.width=`${i.width}px`,this.iframe.height=`${i.height}px`),this.postMessage({kind:"AttributesUpdate",payload:i})})})),this.sideEffectManager.addDisposer(e.emitter.on("cameraStateChange",()=>{this.computedStyle(this.displayer.state)})),K.onCreate(this)}static onCreate(e){K.emitter.emit("StartCreate"),K.emitter.emit("OnCreate",e),K.emitter.emit("created")}insert(e){const t={url:e.url,width:e.width,height:e.height,displaySceneDir:e.displaySceneDir,useClicker:e.useClicker||!1,useSelector:e.useSelector};this.setAttributes(t);const i=()=>{this.getIframe(),this.listenIframe(this.attributes),this.listenDisplayerState(),K.emitter.emit("GetRootRect")};if(this.getIframe())i();else{const n=this.sideEffectManager.addDisposer(K.emitter.on("WrapperDidMount",()=>{i(),this.sideEffectManager.flush(n)})),r=this.sideEffectManager.addDisposer(K.emitter.on("WrapperDidUpdate",()=>{i(),this.sideEffectManager.flush(r)}))}return this.attributes.useSelector&&this.allowAppliances.push("selector"),this.computedStyle(this.displayer.state),this.listenDisplayerCallbacks(),this.getComputedIframeStyle(),this.sideEffectManager.addEventListener(window,"message",this.messageListener.bind(this),void 0,Nt.Message),K.alreadyCreate=!0,this}getComputedIframeStyle(){this.sideEffectManager.setTimeout(()=>{this.iframe&&getComputedStyle(this.iframe)},200,Nt.ComputeStyle)}destroy(){this.sideEffectManager.flushAll(),K.emitter.emit("Destory"),K.alreadyCreate=!1,K.emitter.clearListeners()}getIframe(){return this.iframe||(this.iframe=this._createIframe()),this.iframe}setIframeSize(e){this.iframe&&(this.iframe.width=`${e.width}px`,this.iframe.height=`${e.height}px`,this.setAttributes({width:e.width,height:e.height}))}get attributes(){return this.appManager.store.getIframeBridge()}setAttributes(e){this.appManager.store.setIframeBridge(e)}_createIframe(){const e=document.createElement("iframe");return e.id="IframeBridge",e.className=K.hiddenClass,this.appManager.mainView.divElement&&this.appManager.mainView.divElement.appendChild(e),e}scaleIframeToFit(e=A.AnimationMode.Immediately){if(!this.inDisplaySceneDir)return;const{width:t=1280,height:i=720}=this.attributes,n=t?-t/2:0,r=i?-i/2:0;this.manager.moveCameraToContain({originX:n,originY:r,width:t,height:i,animationMode:e})}get isReplay(){return this.manager.isReplay}handleSetPage(e){if(this.isReplay||!this.attributes.displaySceneDir)return;const t=e.payload,i=this.displayer,n=i.entireScenes()[this.attributes.displaySceneDir];if(!n||n.length!==t){const r=JS(t,s=>({name:String(s+1)}));i.putScenes(this.attributes.displaySceneDir,r),this.manager.setMainViewScenePath(this.attributes.displaySceneDir)}}listenIframe(e){const t=i=>{var n;this.postMessage({kind:"Init",payload:{attributes:this.attributes,roomState:(n=K.displayer)==null?void 0:n.state,currentPage:this.currentPage,observerId:this.displayer.observerId}}),K.emitter.emit("IframeLoad",i),this.sideEffectManager.addDisposer(K.emitter.on("Ready",()=>{var r;this.postMessage((r=this.attributes.lastEvent)==null?void 0:r.payload)}),Nt.Ready),this.computedStyleAndIframeDisplay()};e.url&&this.iframe.src!==e.url&&(this.src_url_equal_anchor||(this.src_url_equal_anchor=document.createElement("a")),this.src_url_equal_anchor.href=e.url,this.src_url_equal_anchor.href!==this.iframe.src&&(this.iframe.src=e.url)),this.iframe.width=`${e.width}px`,this.iframe.height=`${e.height}px`,this.sideEffectManager.addEventListener(this.iframe,"load",t,void 0,Nt.Load)}listenDisplayerState(){this.isReplay&&(this.displayer._phase===A.PlayerPhase.Playing&&this.computedStyleAndIframeDisplay(),this.sideEffectManager.add(()=>(this.displayer.callbacks.on("onPhaseChanged",this.onPhaseChangedListener),()=>this.displayer.callbacks.off("onPhaseChanged",this.onPhaseChangedListener)),Nt.DisplayerState)),this.computedStyleAndIframeDisplay()}computedStyleAndIframeDisplay(){this.computedStyle(this.displayer.state),this.computedIframeDisplay(this.displayer.state,this.attributes)}listenDisplayerCallbacks(){this.displayer.callbacks.on(this.callbackName,this.stateChangeListener)}get callbackName(){return this.isReplay?"onPlayerStateChanged":"onRoomStateChanged"}computedStyle(e){const t=this.manager.cameraState,i=this.attributes.width||1280,n=this.attributes.height||720;if(this.iframe){const{width:r,height:s,scale:a,centerX:o,centerY:l}=t,u=this.rootRect||{x:0,y:0},h=`${r/2+u.x}px`,c=`${s/2+u.y}px`,m=`transform-origin: ${h} ${c};`,v=(r-i)/2*a,y=(s-n)/2*a,S=-(o*a)+v,d=-(l*a)+y,p=`transform: translate(${S}px,${d}px) scale(${a}, ${a});`,b=["position: absolute;","border: 0.1px solid rgba(0,0,0,0);","top: 0px;","left: 0px;",m,p];this.cssList=b,this.computedZindex(),this.updateStyle()}}computedIframeDisplay(e,t){this.inDisplaySceneDir?K.emitter.emit("DispayIframe"):K.emitter.emit("HideIframe")}computedZindex(){const e="z-index: -1;",t=this.cssList.findIndex(i=>i===e);t!==-1&&this.cssList.splice(t,1),(!this.isClicker()||this.isDisableInput)&&this.cssList.push(e)}updateStyle(){this.iframe.style.cssText=this.cssList.join(" ")}get iframeOrigin(){if(this.iframe)try{return new URL(this.iframe.src).origin}catch(e){console.warn(e)}}messageListener(e){if(lt("<<<",JSON.stringify(e.data)),e.origin!==this.iframeOrigin)return;const t=e.data;switch(t.kind){case"SetAttributes":{this.handleSetAttributes(t);break}case"RegisterMagixEvent":{this.handleRegisterMagixEvent(t);break}case"RemoveMagixEvent":{this.handleRemoveMagixEvent(t);break}case"DispatchMagixEvent":{this.handleDispatchMagixEvent(t);break}case"RemoveAllMagixEvent":{this.handleRemoveAllMagixEvent();break}case"NextPage":{this.handleNextPage();break}case"PrevPage":{this.handlePrevPage();break}case"SDKCreate":{this.handleSDKCreate();break}case"SetPage":{this.handleSetPage(t);break}case"GetAttributes":{this.handleGetAttributes();break}case"PageTo":{this.handlePageTo(t);break}default:{lt(`${t.kind} not allow event.`);break}}}handleSDKCreate(){this.postMessage({kind:"Init",payload:{attributes:this.attributes,roomState:this.displayer.state,currentPage:this.currentPage,observerId:this.displayer.observerId}})}handleDispatchMagixEvent(e){const t=e.payload;this.appManager.safeDispatchMagixEvent(t.event,t.payload)}handleSetAttributes(e){this.setAttributes(e.payload)}handleRegisterMagixEvent(e){const t=e.payload,i=n=>{n.authorId!==this.displayer.observerId&&this.postMessage({kind:"ReciveMagixEvent",payload:n})};this.magixEventMap.set(t,i),this.displayer.addMagixEventListener(t,i)}handleRemoveMagixEvent(e){const t=e.payload,i=this.magixEventMap.get(t);this.displayer.removeMagixEventListener(t,i)}handleNextPage(){this.manager.canOperate&&(this.manager.nextPage(),this.dispatchMagixEvent("NextPage",{}))}handlePrevPage(){this.manager.canOperate&&(this.manager.prevPage(),this.dispatchMagixEvent("PrevPage",{}))}handlePageTo(e){if(this.manager.canOperate){const t=e.payload;if(!Number.isSafeInteger(t)||t<=0)return;this.manager.setMainViewSceneIndex(t-1),this.dispatchMagixEvent("PageTo",t-1)}}handleRemoveAllMagixEvent(){this.magixEventMap.forEach((e,t)=>{this.displayer.removeMagixEventListener(t,e)}),this.magixEventMap.clear()}handleGetAttributes(){this.postMessage({kind:"GetAttributes",payload:this.attributes})}postMessage(e){var t;this.iframe&&((t=this.iframe.contentWindow)==null||t.postMessage(JSON.parse(JSON.stringify(e)),"*"))}dispatchMagixEvent(e,t){this.manager.canOperate&&(this.setAttributes({lastEvent:{name:e,payload:t}}),this.displayer.dispatchMagixEvent(e,t))}get currentIndex(){return this.manager.mainViewSceneIndex}get currentPage(){return this.currentIndex+1}get totalPage(){return this.manager.mainViewScenesLength}get readonly(){return!this.displayer.isWritable}get inDisplaySceneDir(){return this.manager.mainViewSceneDir===this.attributes.displaySceneDir}isClicker(){if(this.readonly)return!1;const e=this.displayer.state.memberState.currentApplianceName;return this.allowAppliances.includes(e)}get isDisableInput(){return"disableDeviceInputs"in this.displayer?this.displayer.disableDeviceInputs:!0}};let Ii=K;Ii.kind="IframeBridge";Ii.hiddenClass="netless-iframe-brdige-hidden";Ii.emitter=new Xi.default;Ii.displayer=null;Ii.alreadyCreate=!1;const ag=new vw({emitter:B}),U=class extends A.InvisiblePlugin{constructor(e){super(e);this.version="0.4.66-beta.0",this.dependencies={dependencies:{"@juggle/resize-observer":"^3.3.1","@netless/telebox-insider":"0.2.27",emittery:"^0.9.2",lodash:"^4.17.21","p-retry":"^4.6.1","side-effect-manager":"^0.1.5",uuid:"^7.0.3","video.js":">=7"},peerDependencies:{jspdf:"2.5.1","white-web-sdk":"^2.16.0"},devDependencies:{"@netless/app-docs-viewer":"^0.2.17","@netless/app-media-player":"0.1.0-beta.5","@rollup/plugin-commonjs":"^20.0.0","@rollup/plugin-node-resolve":"^13.0.4","@rollup/plugin-url":"^6.1.0","@sveltejs/vite-plugin-svelte":"^1.0.0-next.22","@tsconfig/svelte":"^2.0.1","@types/debug":"^4.1.7","@types/lodash":"^4.14.182","@types/lodash-es":"^4.17.4","@types/uuid":"^8.3.1","@typescript-eslint/eslint-plugin":"^4.30.0","@typescript-eslint/parser":"^4.30.0","@vitest/ui":"^0.14.1",cypress:"^8.7.0",dotenv:"^10.0.0",eslint:"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-svelte3":"^3.2.0",jsdom:"^19.0.0",jspdf:"^2.5.1",less:"^4.1.1",prettier:"^2.3.2","prettier-plugin-svelte":"^2.4.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-styles":"^3.14.1",svelte:"^3.42.4",typescript:"^4.5.5",vite:"^2.5.3",vitest:"^0.14.1","white-web-sdk":"2.16.43"}},this.emitter=ne,this.viewMode=A.ViewMode.Broadcaster,this.isReplay=A.isPlayer(this.displayer),this.containerSizeRatio=U.containerSizeRatio,U.displayer=e.displayer,window.NETLESS_DEPS={dependencies:{"@juggle/resize-observer":"^3.3.1","@netless/telebox-insider":"0.2.27",emittery:"^0.9.2",lodash:"^4.17.21","p-retry":"^4.6.1","side-effect-manager":"^0.1.5",uuid:"^7.0.3","video.js":">=7"},peerDependencies:{jspdf:"2.5.1","white-web-sdk":"^2.16.0"},devDependencies:{"@netless/app-docs-viewer":"^0.2.17","@netless/app-media-player":"0.1.0-beta.5","@rollup/plugin-commonjs":"^20.0.0","@rollup/plugin-node-resolve":"^13.0.4","@rollup/plugin-url":"^6.1.0","@sveltejs/vite-plugin-svelte":"^1.0.0-next.22","@tsconfig/svelte":"^2.0.1","@types/debug":"^4.1.7","@types/lodash":"^4.14.182","@types/lodash-es":"^4.17.4","@types/uuid":"^8.3.1","@typescript-eslint/eslint-plugin":"^4.30.0","@typescript-eslint/parser":"^4.30.0","@vitest/ui":"^0.14.1",cypress:"^8.7.0",dotenv:"^10.0.0",eslint:"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-svelte3":"^3.2.0",jsdom:"^19.0.0",jspdf:"^2.5.1",less:"^4.1.1",prettier:"^2.3.2","prettier-plugin-svelte":"^2.4.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-styles":"^3.14.1",svelte:"^3.42.4",typescript:"^4.5.5",vite:"^2.5.3",vitest:"^0.14.1","white-web-sdk":"2.16.43"}}}static async mount(e){const t=e.room;U.container=e.container;const i=e.containerSizeRatio,n=e.debug,r=e.cursor;U.params=e,U.displayer=e.room,lm();let s;if(A.isRoom(t)){if(t.phase!==A.RoomPhase.Connected)throw new Error("[WindowManager]: Room only Connected can be mount");t.phase===A.RoomPhase.Connected&&t.isWritable&&(t.disableSerialization=!1),s=await this.initManager(t)}if(U.isCreated)throw new Error("[WindowManager]: Already created cannot be created again");if(this.debug=Boolean(n),lt("Already insert room",s),A.isRoom(this.displayer)){if(!s)throw new Error("[WindowManager]: init InvisiblePlugin failed")}else await Sg.default(async a=>{if(s=await t.getInvisiblePlugin(U.kind),!s)throw lt(`manager is empty. retrying ${a}`),new Error},{retries:10,maxTimeout:5e3});if(!s)throw new Error("[WindowManager]: create manager failed");i&&(U.containerSizeRatio=i),await s.ensureAttributes(),s._fullscreen=e.fullscreen,s.appManager=new am(s),s._pageState=new mw(s.appManager),s.cursorManager=new gw(s.appManager,Boolean(r),e.applianceIcons),i&&(s.containerSizeRatio=i),e.container&&s.bindContainer(e.container),ww(t,s),B.emit("onCreated"),U.isCreated=!0;try{await Eg()}catch(a){console.warn("[WindowManager]: indexedDB open failed"),console.log(a)}return s}static async initManager(e){let t=e.getInvisiblePlugin(U.kind);if(!t&&A.isRoom(e))if(e.isWritable===!1){try{await e.setWritable(!0)}catch{throw new Error("[WindowManger]: room must be switched to be writable")}t=await Mu(e),t==null||t.ensureAttributes(),await Jr(500),await e.setWritable(!1)}else t=await Mu(e);return t}static initContainer(e,t,i){const{chessboard:n,overwriteStyles:r,fullscreen:s}=i;U.container||(U.container=t);const{playground:a,wrapper:o,sizer:l,mainViewElement:u}=om(t);if(U.playground=a,n&&l.classList.add("netless-window-manager-chess-sizer"),s&&l.classList.add("netless-window-manager-fullscreen"),r){const h=document.createElement("style");h.textContent=r,a.appendChild(h)}return e.containerResizeObserver=Qo.create(a,l,o,B),U.wrapper=o,U.sizer=l,u}static get registered(){return je.registered}bindContainer(e){var t,i,n,r,s,a;if(A.isRoom(this.displayer)&&this.room.phase!==A.RoomPhase.Connected)throw new Pd;if(U.isCreated&&U.container)U.container.firstChild&&e.appendChild(U.container.firstChild);else if(U.params){const o=U.params,l=U.initContainer(this,e,o);this.boxManager&&this.boxManager.destroy();const u=Vv(this,ne,B,yt,{collectorContainer:o.collectorContainer,collectorStyles:o.collectorStyles,prefersColorScheme:o.prefersColorScheme});this.boxManager=u,(t=this.appManager)==null||t.setBoxManager(u),this.bindMainView(l,o.disableCameraTransform),U.wrapper&&((i=this.cursorManager)==null||i.setupWrapper(U.wrapper))}B.emit("updateManagerRect"),(n=this.appManager)==null||n.refresh(),(r=this.appManager)==null||r.resetMaximized(),(s=this.appManager)==null||s.resetMinimized(),(a=this.appManager)==null||a.displayerWritableListener(!this.room.isWritable),U.container=e}bindCollectorContainer(e){U.isCreated&&this.boxManager?this.boxManager.setCollectorContainer(e):U.params&&(U.params.collectorContainer=e)}static register(e){return je.register(e)}static unregister(e){return je.unregister(e)}async addApp(e){if(this.appManager)return this.appManager.rootDirRemoving?new Promise((t,i)=>{B.once("rootDirRemoved").then(async()=>{try{const n=await this._addApp(e);t(n)}catch(n){i(n.message)}})}):this._addApp(e);throw new Je}async _addApp(e){var t,i,n;if(this.appManager){if(!e.kind||typeof e.kind!="string")throw new Ad;const r=await((t=je.appClasses.get(e.kind))==null?void 0:t());if(r&&((i=r.config)==null?void 0:i.singleton)&&this.appManager.appProxies.has(e.kind))throw new Id;const s=this.setupScenePath(e,this.appManager);return s===void 0?void 0:((n=e==null?void 0:e.options)!=null&&n.scenePath&&(e.options.scenePath=Fg(e.options.scenePath)),await this.appManager.addApp(e,Boolean(s)))}else throw new Je}setupScenePath(e,t){let i=!1;if(e.options){const{scenePath:n,scenes:r}=e.options;if(n){if(!$g(n))throw new Td;const s=Object.keys(this.apps||{});for(const a of s){const o=t.store.getAppScenePath(a);if(o&&o===n){if(console.warn(`[WindowManager]: ScenePath "${n}" already opened`),this.boxManager){const l=this.boxManager.getTopBox();l&&(this.boxManager.setZIndex(a,l.zIndex+1,!1),this.boxManager.focusBox({appId:a},!1))}return}}}n&&r&&r.length>0&&(this.isDynamicPPT(r)?(i=!0,Vi(this.displayer)[n]||yn(this.room,n,r)):Vi(this.displayer)[n]||yn(this.room,n,[{name:r[0].name}])),n&&r===void 0&&yn(this.room,n,[{}])}return i}async setMainViewScenePath(e){this.appManager&&await this.appManager.setMainViewScenePath(e)}async setMainViewSceneIndex(e){this.appManager&&await this.appManager.setMainViewSceneIndex(e)}async nextPage(){if(this.appManager){const e=this.mainViewSceneIndex+1;return e>=this.mainViewScenesLength?(console.warn("[WindowManager]: current page is the last page"),!1):(await this.appManager.setMainViewSceneIndex(e),!0)}else return!1}async prevPage(){if(this.appManager){const e=this.mainViewSceneIndex-1;return e<0?(console.warn("[WindowManager]: current page is the first page"),!1):(await this.appManager.setMainViewSceneIndex(e),!0)}else return!1}async jumpPage(e){return this.appManager?e<0||e>=this.pageState.length?(console.warn(`[WindowManager]: index ${e} out of range`),!1):(await this.appManager.setMainViewSceneIndex(e),!0):!1}async addPage(e){if(this.appManager){const t=e==null?void 0:e.after,i=e==null?void 0:e.scene;if(t){const n=this.mainViewSceneIndex+1;this.room.putScenes(Le,[i||{}],n)}else this.room.putScenes(Le,[i||{}])}}async removePage(e){if(this.appManager){const t=e===void 0?this.pageState.index:e;return this.pageState.length===1?(console.warn("[WindowManager]: can not remove the last page"),!1):t<0||t>=this.pageState.length?(console.warn(`[WindowManager]: index ${e} out of range`),!1):this.appManager.removeSceneByIndex(t)}else return!1}getMainViewScenePath(){var e;return(e=this.appManager)==null?void 0:e.store.getMainViewScenePath()}getMainViewSceneIndex(){var e;return(e=this.appManager)==null?void 0:e.store.getMainViewSceneIndex()}setReadonly(e){var t;this.readonly=e,(t=this.boxManager)==null||t.setReadonly(e),B.emit("setReadonly",e)}switchMainViewToWriter(){var e;return(e=this.appManager)==null?void 0:e.mainViewProxy.mainViewClickHandler()}onAppDestroy(e,t){Wg(`destroy-${e}`,t)}onAppEvent(e,t){return B.on(`custom-${e}`,t)}setViewMode(e){var t,i,n,r;(e===A.ViewMode.Broadcaster||e===A.ViewMode.Follower)&&(this.canOperate&&e===A.ViewMode.Broadcaster&&((t=this.appManager)==null||t.mainViewProxy.setCameraAndSize()),(i=this.appManager)==null||i.mainViewProxy.start()),e===A.ViewMode.Freedom&&((n=this.appManager)==null||n.mainViewProxy.stop()),this.viewMode=e,(r=this.appManager)==null||r.mainViewProxy.setViewMode(e)}setBoxState(e){if(!!this.canOperate)switch(e){case"normal":this.setMaximized(!1),this.setMinimized(!1);break;case"maximized":this.setMaximized(!0),this.setMinimized(!1);break;case"minimized":this.setMinimized(!0);break}}setMaximized(e){var t;!this.canOperate||(t=this.boxManager)==null||t.setMaximized(e,!1)}setMinimized(e){var t;!this.canOperate||(t=this.boxManager)==null||t.setMinimized(e,!1)}setFullscreen(e){var t;this._fullscreen!==e&&(this._fullscreen=e,(t=U.sizer)==null||t.classList.toggle("netless-window-manager-fullscreen",e),ne.emit("fullscreenChange",e))}get mainView(){if(this.appManager)return this.appManager.mainViewProxy.view;throw new Je}get camera(){if(this.appManager)return this.appManager.mainViewProxy.view.camera;throw new Je}get cameraState(){if(this.appManager)return this.appManager.mainViewProxy.cameraState;throw new Je}get apps(){var e;return(e=this.appManager)==null?void 0:e.store.apps()}get boxState(){var e;if(this.appManager)return(e=this.appManager.boxManager)==null?void 0:e.boxState;throw new Je}get darkMode(){var e,t;return Boolean((t=(e=this.appManager)==null?void 0:e.boxManager)==null?void 0:t.darkMode)}get prefersColorScheme(){var e;if(this.appManager)return(e=this.appManager.boxManager)==null?void 0:e.prefersColorScheme;throw new Je}get focused(){return this.attributes.focus}get focusedView(){var e,t;return((t=(e=this.appManager)==null?void 0:e.focusApp)==null?void 0:t.view)||this.mainView}get mainViewSceneIndex(){var e;return((e=this._pageState)==null?void 0:e.index)||0}get mainViewSceneDir(){var e;if(this.appManager)return(e=this.appManager)==null?void 0:e.getMainViewSceneDir();throw new Je}get topApp(){var e,t;return(t=(e=this.boxManager)==null?void 0:e.getTopBox())==null?void 0:t.id}get mainViewScenesLength(){var e;return((e=this._pageState)==null?void 0:e.length)||0}get canRedoSteps(){var e;return((e=this.focusedView)==null?void 0:e.canRedoSteps)||0}get canUndoSteps(){var e;return((e=this.focusedView)==null?void 0:e.canUndoSteps)||0}get sceneState(){if(this.appManager)return this.appManager.sceneState;throw new Je}get pageState(){if(this._pageState)return this._pageState.toObject();throw new Je}get fullscreen(){return Boolean(this._fullscreen)}queryAll(){var e;return Array.from(((e=this.appManager)==null?void 0:e.appProxies.values())||[])}queryOne(e){var t;return(t=this.appManager)==null?void 0:t.appProxies.get(e)}async closeApp(e){var t;return(t=this.appManager)==null?void 0:t.closeApp(e)}focusApp(e){var i,n,r;const t=(i=this.boxManager)==null?void 0:i.getBox(e);t&&((n=this.boxManager)==null||n.focusBox({appId:e},!1),((r=this.boxManager)==null?void 0:r.teleBoxManager).makeBoxTop(t,!1))}moveCamera(e){var n;const t=E.omit(e,["animationMode"]),i=q({},this.mainView.camera);E.isEqual(q(q({},i),t),i)||(this.mainView.moveCamera(e),(n=this.appManager)==null||n.dispatchInternalEvent(J.MoveCamera,e),setTimeout(()=>{var r;(r=this.appManager)==null||r.mainViewProxy.setCameraAndSize()},500))}moveCameraToContain(e){var t;this.mainView.moveCameraToContain(e),(t=this.appManager)==null||t.dispatchInternalEvent(J.MoveCameraToContain,e),setTimeout(()=>{var i;(i=this.appManager)==null||i.mainViewProxy.setCameraAndSize()},500)}convertToPointInWorld(e){return this.mainView.convertToPointInWorld(e)}setCameraBound(e){this.mainView.setCameraBound(e)}onDestroy(){this._destroy()}destroy(){this._destroy()}_destroy(){var e,t,i,n,r;(e=this.containerResizeObserver)==null||e.disconnect(),(t=this.appManager)==null||t.destroy(),(i=this.cursorManager)==null||i.destroy(),U.container=void 0,U.wrapper=void 0,U.sizer=void 0,U.isCreated=!1,U.playground&&((n=U.playground.parentNode)==null||n.removeChild(U.playground)),U.params=void 0,(r=this._iframeBridge)==null||r.destroy(),this._iframeBridge=void 0,lt("Destroyed")}bindMainView(e,t){var i;this.appManager&&(this.appManager.bindMainView(e,Boolean(t)),(i=this.cursorManager)==null||i.setMainViewDivElement(e))}get canOperate(){return A.isRoom(this.displayer)?this.displayer.isWritable&&this.displayer.phase===A.RoomPhase.Connected:!1}get room(){return this.displayer}safeSetAttributes(e){this.canOperate&&this.setAttributes(e)}safeUpdateAttributes(e,t){this.canOperate&&this.updateAttributes(e,t)}setPrefersColorScheme(e){var t,i;(i=(t=this.appManager)==null?void 0:t.boxManager)==null||i.setPrefersColorScheme(e)}cleanCurrentScene(){var e;lt("clean current scene"),(e=this.focusedView)==null||e.cleanCurrentScene()}redo(){var e;return((e=this.focusedView)==null?void 0:e.redo())||0}undo(){var e;return((e=this.focusedView)==null?void 0:e.undo())||0}delete(){var e;(e=this.focusedView)==null||e.delete()}copy(){var e;(e=this.focusedView)==null||e.copy()}paste(){var e;(e=this.focusedView)==null||e.paste()}duplicate(){var e;(e=this.focusedView)==null||e.duplicate()}insertText(e,t,i){var n;return((n=this.focusedView)==null?void 0:n.insertText(e,t,i))||""}insertImage(e){var t;return(t=this.focusedView)==null?void 0:t.insertImage(e)}completeImageUpload(e,t){var i;return(i=this.focusedView)==null?void 0:i.completeImageUpload(e,t)}lockImage(e,t){var i;return(i=this.focusedView)==null?void 0:i.lockImage(e,t)}lockImages(e){var t;return(t=this.focusedView)==null?void 0:t.lockImages(e)}refresh(){var e;this._refresh(),(e=this.appManager)==null||e.dispatchInternalEvent(J.Refresh)}_refresh(){var e,t,i;(e=this.appManager)==null||e.mainViewProxy.rebind(),U.container&&this.bindContainer(U.container),(i=(t=this.appManager)==null?void 0:t.refresher)==null||i.refresh()}setContainerSizeRatio(e){if(!E.isNumber(e)||!(e>0))throw new Error(`[WindowManager]: updateContainerSizeRatio error, ratio must be a positive number. but got ${e}`);U.containerSizeRatio=e,this.containerSizeRatio=e,B.emit("containerSizeRatioUpdate",e)}isDynamicPPT(e){var i,n;const t=(n=(i=e[0])==null?void 0:i.ppt)==null?void 0:n.src;return t==null?void 0:t.startsWith("pptx://")}async ensureAttributes(){E.isNull(this.attributes)&&await Jr(50),E.isObject(this.attributes)&&(this.attributes[we.Apps]||this.safeSetAttributes({[we.Apps]:{}}),this.attributes[we.Cursors]||this.safeSetAttributes({[we.Cursors]:{}}),this.attributes._mainScenePath||this.safeSetAttributes({_mainScenePath:Md}),this.attributes._mainSceneIndex||this.safeSetAttributes({_mainSceneIndex:0}),this.attributes[we.Registered]||this.safeSetAttributes({[we.Registered]:{}}),this.attributes[we.IframeBridge]||this.safeSetAttributes({[we.IframeBridge]:{}}))}getIframeBridge(){if(!this.appManager)throw new Error("[WindowManager]: should call getIframeBridge() after await mount()");return this._iframeBridge||(this._iframeBridge=new Ii(this,this.appManager)),this._iframeBridge}};let re=U;re.kind="WindowManager";re.debug=!1;re.containerSizeRatio=Ig;re.isCreated=!1;GS();exports.AppCreateError=Id;exports.AppManagerNotInitError=Je;exports.AppNotRegisterError=Yg;exports.BindContainerRoomPhaseInvalidError=Pd;exports.BoxManagerNotFoundError=kd;exports.BoxNotCreatedError=Ed;exports.BuiltinApps=XS;exports.DomEvents=sg;exports.IframeBridge=Ii;exports.IframeEvents=rg;exports.InvalidScenePath=Td;exports.ParamsInvalidError=Ad;exports.WhiteWebSDKInvalidError=bd;exports.WindowManager=re;exports.calculateNextIndex=$o;exports.reconnectRefresher=ag;
//# sourceMappingURL=index.js.map
