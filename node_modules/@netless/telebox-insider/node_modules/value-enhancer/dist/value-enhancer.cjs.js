"use strict";var e=Object.defineProperty,s=("undefined"!=typeof require&&require,(s,r,t)=>(((s,r,t)=>{r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t})(s,"symbol"!=typeof r?r+"":r,t),t));Object.defineProperty(exports,"__esModule",{value:!0}),exports[Symbol.toStringTag]="Module";class r{constructor(e,r){s(this,"_value"),s(this,"_beforeDestroys"),s(this,"_subscribers"),this._value=e,r&&(this.compare=r)}get value(){return this._value}setValue(e,s){if(!this.compare(e,this._value)){const r=this._value;this._value=e,this._subscribers&&this._subscribers.forEach((t=>t(e,r,s)))}}reaction(e){return this._subscribers||(this._subscribers=new Set),this._subscribers.add(e),()=>{this._subscribers&&this._subscribers.delete(e)}}subscribe(e,s){const r=this.reaction(e);return e(this._value,void 0,s),r}derive(e,s,t){const o=new r(e(this.value,void 0,t),s),i=this.reaction(((s,r,t)=>{o.setValue(e(s,r,t))}));return o.addBeforeDestroy(i),o}destroy(){this._beforeDestroys&&(this._beforeDestroys.forEach((e=>e())),this._beforeDestroys.clear()),this._subscribers&&this._subscribers.clear()}addBeforeDestroy(e){return this._beforeDestroys||(this._beforeDestroys=new Set),this._beforeDestroys.add(e),()=>{this._beforeDestroys&&this._beforeDestroys.delete(e)}}compare(e,s){return e===s}}function t(e,s,t,o){let i=e.map((e=>e.value));const n=new r(s(i,void 0,o),t);return e.forEach(((e,r)=>{const t=e.reaction(((e,t,o)=>{const c=i.slice();c[r]=e;const a=i;i=c,n.setValue(s(c,a,o),o)}));n.addBeforeDestroy(t)})),n}function o(e,s,r){var t;return Object.defineProperties(e,{[s]:{get:()=>r.value},[`_${s}$`]:{value:r},[`set${t=s,t[0].toUpperCase()+t.slice(1)}`]:{value:(e,s)=>r.setValue(e,s)}}),e}exports.Val=r,exports.bindInstance=o,exports.combine=t,exports.createInstanceBinder=function(e){return(s,r)=>(o(e,s,r),r)},exports.createSideEffectBinder=function(e){const s=s=>{const r=e.addDisposer((()=>{s.destroy()}));return s.addBeforeDestroy((()=>{e.remove(r)})),s};return{bindSideEffect:s,combine:(e,r,o,i)=>s(t(e,r,o,i)),createVal:(e,t)=>s(new r(e,t))}},exports.withValueEnhancer=function(e,s){Object.keys(s).forEach((r=>{o(e,r,s[r])}))};
//# sourceMappingURL=value-enhancer.cjs.js.map
